-----------------------------------------------------------------------------------------------------------------------
      name:  redi15_REDI_state_regressions
       log:  /Users/mollymking/Documents/SocResearch/Dissertation/redi/redi15_REDI_state_regressions.log
  log type:  text
 opened on:  26 Oct 2021, 09:29:15

. 
. //      project:        REDI Methods Paper
. 
. //  task:       Example of REDI regressed on data from a single state in 2019
. //  data:       CPS ASEC from IPUMS, available: https://cps.ipums.org/
. //                              ACS from IPUMS, available: https://usa.ipums.org/
. 
. //  github:     redi
. //  OSF:                https://osf.io/qmhe8/
. 
. //  author:     Molly King
. 
. display "$S_DATE  $S_TIME"
26 Oct 2021  09:29:15

. 
. ***--------------------------***
. // # PROGRAM SETUP
. ***--------------------------***
. 
. version 16 // keeps program consistent for future replications

. set linesize 80

. clear all

. set more off

. set seed 1

. 
. ***--------------------------***
. // #  REGRESSION: Income as IV: Predict Migration on 2019  Wyoming  DATA
. ***--------------------------***
. 
. use $deriv/redi14_REDI_Wy2019.dta, clear
(Wyoming 2019 ACS data converted to continuous REDI-calculated values)

. 
. // REDI Income as IV (redi_hinc_ln)
. di in red "WYOMING: " ///
>                   "Predict migration as function of ln(REDI-created income), "
>  ///
>                   "race/ethnicity, education, gender, disability, labor force,
>  home ownership"
WYOMING: Predict migration as function of ln(REDI-created income), race/ethnicit
> y, education, gender, disability, labor force, home ownership

. svy: logistic migrate ///
>         redi_hinc_ln /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison cat
> egory
>         married disability   // labor ownhouse
(running logistic on estimation sample)

BRR replications (80)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..............................

Survey: Logistic regression                     Number of obs     =      4,694
                                                Population size   =    452,157
                                                Replications      =         80
                                                Design df         =         79
                                                F(  12,     68)   =       6.24
                                                Prob > F          =     0.0000

------------------------------------------------------------------------------
             |                BRR *
     migrate | Odds Ratio   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
redi_hinc_ln |   .8281686   .0367334    -4.25   0.000     .7581873    .9046092
      dB_fem |   1.057397   .0903534     0.65   0.516     .8920156     1.25344
   dB_rblack |   4.257994   2.186212     2.82   0.006     1.532388    11.83154
   dB_rasian |   3.222869   1.929107     1.96   0.054     .9790736    10.60889
    dB_rhisp |    2.03696   .4391902     3.30   0.001     1.326172     3.12871
   dB_rother |   1.244367   .2941341     0.92   0.358     .7773532    1.991951
   dB_edu_HS |   2.254131     .57229     3.20   0.002     1.359911    3.736353
 dB_edu_sCol |   2.411099   .6952935     3.05   0.003     1.358107    4.280513
  dB_edu_col |   1.962704   .5659335     2.34   0.022     1.105601    3.484264
 dB_edu_grad |   2.307282   .7380779     2.61   0.011     1.220602    4.361415
     married |   .4578194   .0705128    -5.07   0.000     .3369411     .622063
  disability |    .772663   .2387189    -0.83   0.406     .4177492    1.429106
       _cons |   .8914613   .4422693    -0.23   0.817     .3320765    2.393133
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.

. 
. // Original ACS Contnuous Income as IV (acs_hinc_ln)
. di in red "WYOMING: " ///
>                   "Predict migration as function of ln(ACS HH income), " ///
>                   "race/ethnicity, education, gender, disability, labor force"
WYOMING: Predict migration as function of ln(ACS HH income), race/ethnicity, edu
> cation, gender, disability, labor force

. svy: logistic migrate ///
>         acs_hinc_ln /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison cat
> egory
>         married disability //  labor  ownhouse
(running logistic on estimation sample)

BRR replications (80)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..............................

Survey: Logistic regression                     Number of obs     =      4,693
                                                Population size   =    451,787
                                                Replications      =         80
                                                Design df         =         79
                                                F(  12,     68)   =       6.31
                                                Prob > F          =     0.0000

------------------------------------------------------------------------------
             |                BRR *
     migrate | Odds Ratio   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
 acs_hinc_ln |    .847445   .0393859    -3.56   0.001     .7725661    .9295813
      dB_fem |   1.074697   .0933112     0.83   0.409     .9041286    1.277443
   dB_rblack |   4.206285   2.155971     2.80   0.006     1.516425    11.66746
   dB_rasian |   3.222012   1.919265     1.96   0.053     .9844708    10.54512
    dB_rhisp |   1.968983   .4161953     3.21   0.002     1.292766    2.998913
   dB_rother |   1.165744   .2950905     0.61   0.546     .7043409    1.929405
   dB_edu_HS |    2.23777   .5657087     3.19   0.002     1.352959    3.701233
 dB_edu_sCol |   2.416141   .6912803     3.08   0.003     1.367091    4.270188
  dB_edu_col |   2.005462   .5716729     2.44   0.017       1.1371    3.536962
 dB_edu_grad |   2.242088   .7113141     2.54   0.013     1.192351    4.216006
     married |   .4495843   .0684513    -5.25   0.000     .3320443    .6087323
  disability |   .7650869   .2306425    -0.89   0.377      .419872    1.394134
       _cons |   .7059218   .3940363    -0.62   0.534     .2324003    2.144256
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.

.         
. 
. // In both models, significance disappears when add home ownership:
. // REDI Income as IV (redi_hinc_ln)
. di in red "WYOMING: " ///
>                   "Predict migration as function of ln(REDI-created income), "
>  ///
>                   "add home ownership"
WYOMING: Predict migration as function of ln(REDI-created income), add home owne
> rship

. svy: logistic migrate ///
>         redi_hinc_ln /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison cat
> egory
>         married disability ownhouse //
(running logistic on estimation sample)

BRR replications (80)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..............................

Survey: Logistic regression                     Number of obs     =      4,694
                                                Population size   =    452,157
                                                Replications      =         80
                                                Design df         =         79
                                                F(  13,     67)   =      13.48
                                                Prob > F          =     0.0000

------------------------------------------------------------------------------
             |                BRR *
     migrate | Odds Ratio   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
redi_hinc_ln |    .917348    .043915    -1.80   0.075     .8339728    1.009059
      dB_fem |   1.092238   .0978114     0.99   0.328     .9139142    1.305357
   dB_rblack |   2.870019   1.635633     1.85   0.068     .9230743     8.92345
   dB_rasian |   2.746087   1.876171     1.48   0.143     .7048782    10.69829
    dB_rhisp |   1.714599   .3657568     2.53   0.013       1.1214    2.621588
   dB_rother |   1.156638   .2871636     0.59   0.559     .7056332    1.895903
   dB_edu_HS |    1.94565   .5622778     2.30   0.024     1.094581    3.458451
 dB_edu_sCol |   2.151356   .6942163     2.37   0.020     1.131795    4.089376
  dB_edu_col |   1.845029   .6072171     1.86   0.066      .958312    3.552216
 dB_edu_grad |    2.10718   .7557954     2.08   0.041     1.031922    4.302851
     married |   .6174607   .1074721    -2.77   0.007     .4366656    .8731113
  disability |   .7290179   .2010641    -1.15   0.255     .4210406     1.26227
    ownhouse |   .2296899   .0359131    -9.41   0.000     .1682605    .3135461
       _cons |   .7206776   .3916307    -0.60   0.548     .2443353     2.12567
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.

.         
. 
. // Original ACS Contnuous Income as IV (acs_hinc_ln)
. di in red "WYOMING: " ///
>                   "Predict migration as function of ln(ACS HH income), " ///
>                   "add home ownership"
WYOMING: Predict migration as function of ln(ACS HH income), add home ownership

. svy: logistic migrate ///
>         acs_hinc_ln /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison cat
> egory
>         married disability ownhouse //  
(running logistic on estimation sample)

BRR replications (80)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..............................

Survey: Logistic regression                     Number of obs     =      4,693
                                                Population size   =    451,787
                                                Replications      =         80
                                                Design df         =         79
                                                F(  13,     67)   =      13.81
                                                Prob > F          =     0.0000

------------------------------------------------------------------------------
             |                BRR *
     migrate | Odds Ratio   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
 acs_hinc_ln |   .9415949   .0538024    -1.05   0.295     .8403693    1.055013
      dB_fem |    1.10063   .0991875     1.06   0.291     .9198961    1.316872
   dB_rblack |   2.856194   1.627302     1.84   0.069      .918918    8.877664
   dB_rasian |   2.735534   1.865354     1.48   0.144     .7040144    10.62925
    dB_rhisp |     1.6879   .3564116     2.48   0.015       1.1087    2.569683
   dB_rother |   1.124895   .2866776     0.46   0.645     .6773463    1.868158
   dB_edu_HS |   1.951373   .5612736     2.32   0.023     1.100781    3.459232
 dB_edu_sCol |   2.158942    .691347     2.40   0.019     1.141367    4.083727
  dB_edu_col |   1.861774   .6087661     1.90   0.061     .9711142    3.569304
 dB_edu_grad |   2.076299   .7419169     2.04   0.044     1.019534    4.228417
     married |   .6077125   .1043204    -2.90   0.005     .4318246    .8552418
  disability |    .725446   .1993933    -1.17   0.246     .4197667    1.253725
    ownhouse |   .2260492   .0366903    -9.16   0.000     .1636419    .3122563
       _cons |   .5525365   .3570026    -0.92   0.361     .1526974    1.999357
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.

.         
. 
. ***--------------------------***
. // #  REGRESSION: Income as IV: Predict Migration on 2019  California  DATA
. ***--------------------------***
. 
. use $deriv/redi14_REDI_Ca2019.dta, clear
(California 2019 ACS data converted to continuous REDI-calculated values)

. 
. // REDI Income as IV (redi_hinc_ln)
. di in red "CALIFORNIA: " ///
>                   "Predict migration as function of ln(REDI-created income), "
>  ///
>                   "race/ethnicity, education, gender, marital status, disabili
> ty"
CALIFORNIA: Predict migration as function of ln(REDI-created income), race/ethni
> city, education, gender, marital status, disability

. svy: logistic migrate ///
>         redi_hinc_ln /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison cat
> egory
>         married disability 
(running logistic on estimation sample)

BRR replications (80)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..............................

Survey: Logistic regression                    Number of obs     =     302,150
                                               Population size   =  31,295,834
                                               Replications      =          80
                                               Design df         =          79
                                               F(  12,     68)   =      124.46
                                               Prob > F          =      0.0000

------------------------------------------------------------------------------
             |                BRR *
     migrate | Odds Ratio   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
redi_hinc_ln |   .9458222   .0050006   -10.54   0.000      .935921    .9558281
      dB_fem |   .9365507   .0128134    -4.79   0.000     .9113905    .9624056
   dB_rblack |    1.04867   .0487836     1.02   0.310     .9559288    1.150409
   dB_rasian |   1.055851   .0234214     2.45   0.016     1.010247    1.103515
    dB_rhisp |   .8504288   .0195587    -7.04   0.000     .8123758    .8902643
   dB_rother |   1.275043   .0571769     5.42   0.000     1.166167    1.394085
   dB_edu_HS |   1.375488   .0455516     9.63   0.000     1.287744    1.469212
 dB_edu_sCol |   1.480384   .0428904    13.54   0.000     1.397427    1.568265
  dB_edu_col |   2.026337   .0683301    20.94   0.000     1.894794    2.167013
 dB_edu_grad |   2.068828   .0785703    19.14   0.000     1.918203    2.231281
     married |   .6040277   .0121028   -25.16   0.000     .5804118    .6286045
  disability |   .6788788   .0252533   -10.41   0.000     .6304291     .731052
       _cons |   .2096977   .0150144   -21.82   0.000     .1818442    .2418176
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.

.         
. // Original ACS Contnuous Income as IV (acs_hinc_ln)
. di in red "CALIFORNIA: " ///
>                   "Predict migration as function of ln(ACS HH income), " ///
>                   "race/ethnicity, education, gender, marital status, disabili
> ty"
CALIFORNIA: Predict migration as function of ln(ACS HH income), race/ethnicity, 
> education, gender, marital status, disability

. svy: logistic migrate ///
>         acs_hinc_ln /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison cat
> egory
>         married disability
(running logistic on estimation sample)

BRR replications (80)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..............................

Survey: Logistic regression                    Number of obs     =     302,245
                                               Population size   =  31,307,314
                                               Replications      =          80
                                               Design df         =          79
                                               F(  12,     68)   =      120.98
                                               Prob > F          =      0.0000

------------------------------------------------------------------------------
             |                BRR *
     migrate | Odds Ratio   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
 acs_hinc_ln |   .9368348   .0054951   -11.12   0.000     .9259607    .9478367
      dB_fem |   .9369998   .0128294    -4.75   0.000     .9118084    .9628873
   dB_rblack |   1.044921   .0487701     0.94   0.349     .9522192    1.146647
   dB_rasian |   1.050248   .0233386     2.21   0.030     1.004806    1.097745
    dB_rhisp |    .850753     .01943    -7.08   0.000     .8129445      .89032
   dB_rother |   1.275898   .0572507     5.43   0.000     1.166884    1.395097
   dB_edu_HS |   1.375132   .0457051     9.58   0.000     1.287102    1.469182
 dB_edu_sCol |   1.478536   .0430937    13.42   0.000     1.395201    1.566849
  dB_edu_col |    2.03395   .0692733    20.85   0.000     1.900635    2.176616
 dB_edu_grad |   2.084415   .0800331    19.13   0.000     1.931048    2.249962
     married |   .6073822   .0120961   -25.04   0.000     .5837764    .6319426
  disability |   .6798401   .0249417   -10.52   0.000     .6319642    .7313428
       _cons |   .2329548   .0169289   -20.05   0.000     .2015823    .2692098
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.

.         
. 
. // In both models, significance disappears when add home ownership:
. // REDI Income as IV (redi_hinc_ln)
. di in red "CALIFORNIA: " ///
>                   "Predict migration as function of ln(REDI-created income), "
>  ///
>                   "add home ownership"
CALIFORNIA: Predict migration as function of ln(REDI-created income), add home o
> wnership

. svy: logistic migrate ///
>         redi_hinc_ln /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison cat
> egory
>         married disability ownhouse //  
(running logistic on estimation sample)

BRR replications (80)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..............................

Survey: Logistic regression                    Number of obs     =     302,150
                                               Population size   =  31,295,834
                                               Replications      =          80
                                               Design df         =          79
                                               F(  13,     67)   =      226.87
                                               Prob > F          =      0.0000

------------------------------------------------------------------------------
             |                BRR *
     migrate | Odds Ratio   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
redi_hinc_ln |   1.012025   .0063172     1.91   0.059     .9995284    1.024677
      dB_fem |    .948903   .0131924    -3.77   0.000     .9230041    .9755286
   dB_rblack |   .8781499   .0421504    -2.71   0.008     .7981348    .9661868
   dB_rasian |   1.023436   .0226835     1.05   0.299     .9792675    1.069597
    dB_rhisp |   .7337025   .0178423   -12.73   0.000     .6990341    .7700903
   dB_rother |    1.16053    .053205     3.25   0.002     1.059316    1.271414
   dB_edu_HS |     1.4287   .0476448    10.70   0.000     1.336944    1.526753
 dB_edu_sCol |   1.556963   .0449943    15.32   0.000     1.469931    1.649148
  dB_edu_col |   2.103462   .0701435    22.30   0.000     1.968378    2.247817
 dB_edu_grad |   2.226747    .085109    20.94   0.000     2.063625    2.402763
     married |   .7097223   .0138784   -17.53   0.000     .6826287    .7378912
  disability |   .7136737   .0267934    -8.99   0.000     .6622867    .7690479
    ownhouse |   .3205451   .0077891   -46.82   0.000     .3054103      .33643
       _cons |   .1613556   .0131465   -22.39   0.000     .1371998    .1897642
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.

. 
. // Original ACS Contnuous Income as IV (acs_hinc_ln)
. di in red "CALIFORNIA: " ///
>                   "Predict migration as function of ln(ACS HH income), " ///
>                   "add home ownership"
CALIFORNIA: Predict migration as function of ln(ACS HH income), add home ownersh
> ip

. svy: logistic migrate ///
>         acs_hinc_ln /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison cat
> egory
>         married disability ownhouse //
(running logistic on estimation sample)

BRR replications (80)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..............................

Survey: Logistic regression                    Number of obs     =     302,245
                                               Population size   =  31,307,314
                                               Replications      =          80
                                               Design df         =          79
                                               F(  13,     67)   =      226.89
                                               Prob > F          =      0.0000

------------------------------------------------------------------------------
             |                BRR *
     migrate | Odds Ratio   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
 acs_hinc_ln |   1.001878   .0074817     0.25   0.802     .9870967    1.016882
      dB_fem |   .9476824   .0131068    -3.89   0.000     .9219498    .9741333
   dB_rblack |   .8751409   .0420044    -2.78   0.007     .7954028    .9628727
   dB_rasian |   1.023029   .0227061     1.03   0.308     .9788174    1.069237
    dB_rhisp |   .7339024   .0177706   -12.78   0.000     .6993696    .7701402
   dB_rother |   1.159872   .0532752     3.23   0.002     1.058533    1.270912
   dB_edu_HS |   1.431019   .0479587    10.69   0.000     1.338674    1.529734
 dB_edu_sCol |   1.560721   .0453896    15.31   0.000      1.47294    1.653732
  dB_edu_col |    2.11696   .0719826    22.06   0.000     1.978423    2.265198
 dB_edu_grad |    2.24416   .0874209    20.75   0.000     2.076728    2.425091
     married |   .7116784   .0137926   -17.55   0.000     .6847478    .7396683
  disability |   .7082635   .0261679    -9.34   0.000     .6580467    .7623125
    ownhouse |   .3223763   .0079627   -45.83   0.000     .3069102    .3386218
       _cons |   .1794594   .0155872   -19.78   0.000     .1509677    .2133283
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.

. 
. 
. ***--------------------------***
. 
. capture log close redi15_REDI_state_regressions
