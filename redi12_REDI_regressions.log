--------------------------------------------------------------------------------
      name:  redi12_REDI_regressions
       log:  /Users/mollymking/Documents/SocResearch/Dissertation/redi/redi12_RE
> DI_regressions.log
  log type:  text
 opened on:   2 Nov 2021, 13:23:05

. 
. //      project:        REDI Methods Paper
. 
. //  task:               Regressions of original ACS Continuous and new continu
> ous REDI-created income
. //  data:               ACS & newly created REDI income variables
. 
. //  github:     redi
. //  OSF:                https://osf.io/qmhe8/
. 
. //  author:     Molly King
. 
. display "$S_DATE  $S_TIME"
 2 Nov 2021  13:23:05

. 
. ***--------------------------***
. // # PROGRAM SETUP
. ***--------------------------***
. 
. version 16 // keeps program consistent for future replications

. set linesize 80

. clear all

. set more off

. set seed 1

. 
. use $deriv/redi04_ACS_descriptives-hinc_shp.dta, clear
(ACS data converted to continuous REDI-calculated values)

. save $deriv/redi12_REDI_regressions-hinc_shp.dta, replace       
file ~/Documents/SocResearch/Dissertation/data/data_derv/redi12_REDI_regressions-hinc_shp.dta saved

. 
. local conv_year = 2017 // this is set in redi01_CPI-U-RS.do

. local y = year

. 
. 
. ***--------------------------***
. // # CREATE NATURAL LOG INCOME VARIABLES
. ***--------------------------***
. 
. gen redi_dV_lnhinc_shp_`conv_year' = ln(redi_dV_hinc_shp_`conv_year')
(56,487 missing values generated)

. label var redi_dV_lnhinc_shp_`conv_year' "Inflation-adjusted natural log household income (ACS), from shp categories
> , `conv_year' dollars"
note: label truncated to 80 characters

. 
. ***--------------------------***
. // DEMOGRAPHICS
. ***--------------------------***        
.                 
. // #1 GENDER
.  
. local gender_var sex_acs

. tab `gender_var', m

        Sex |      Freq.     Percent        Cum.
------------+-----------------------------------
       Male |  2,928,696       48.43       48.43
     Female |  3,119,191       51.57      100.00
------------+-----------------------------------
      Total |  6,047,887      100.00

. tab `gender_var', nolab m

        Sex |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  2,928,696       48.43       48.43
          2 |  3,119,191       51.57      100.00
------------+-----------------------------------
      Total |  6,047,887      100.00

. 
. include $redi/redi11a_include_female_from2W_1M.doi

. *! include file to convert gender variable
. *! Produces gender dummy bariable from woman=2-->fem=1; man=1-->man=0
. *! version 1.1 \ molly king 2017-03-29
. 
. gen dB_fem = . 
(6,047,887 missing values generated)

.         replace dB_fem = 1 if `gender_var' == 2
(3,119,191 real changes made)

.         replace dB_fem = 0 if `gender_var' == 1
(2,928,696 real changes made)

. 
. label var dB_fem "Respondent's sex (=1 if female)" 

. label define dB_fem 0 "0_Male" 1 "1_Female"

.         label val dB_fem dB_fem

. 
. notes dB_fem: Created from `gender_var' in `data_using' \ `do_file'.do mmk $S_DATE

. 
. 
. ***--------------------------***        
. 
. // #2 RACE / ETHNICITY - with RACE and HISP
. 
. local race_var race_acs

. tab `race_var'

                 Race [general version] |      Freq.     Percent        Cum.
----------------------------------------+-----------------------------------
                                      1 |  4,652,038       76.92       76.92
                                      2 |    577,190        9.54       86.46
                                      3 |     68,798        1.14       87.60
                                      4 |     81,785        1.35       88.95
                                      5 |     15,521        0.26       89.21
                                      6 |    235,393        3.89       93.10
                                      7 |    233,381        3.86       96.96
                                      8 |    161,683        2.67       99.63
                                      9 |     22,098        0.37      100.00
----------------------------------------+-----------------------------------
                                  Total |  6,047,887      100.00

. tab `race_var', m nolab

       Race |
   [general |
   version] |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,652,038       76.92       76.92
          2 |    577,190        9.54       86.46
          3 |     68,798        1.14       87.60
          4 |     81,785        1.35       88.95
          5 |     15,521        0.26       89.21
          6 |    235,393        3.89       93.10
          7 |    233,381        3.86       96.96
          8 |    161,683        2.67       99.63
          9 |     22,098        0.37      100.00
------------+-----------------------------------
      Total |  6,047,887      100.00

. 
. gen hisp = .
(6,047,887 missing values generated)

. replace hisp = 1 if hispan_acs >0
(880,173 real changes made)

. replace hisp = 0 if hispan_acs == 0
(5,167,714 real changes made)

. 
. local hisp_var hisp

. 
. if "`hisp_var'" != "none" {
.         tab `hisp_var', m

       hisp |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |  5,167,714       85.45       85.45
          1 |    880,173       14.55      100.00
------------+-----------------------------------
      Total |  6,047,887      100.00
.         tab `hisp_var', m nolab

       hisp |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |  5,167,714       85.45       85.45
          1 |    880,173       14.55      100.00
------------+-----------------------------------
      Total |  6,047,887      100.00
.         tab `race_var' `hisp_var'

        Race [general |         hisp
             version] |         0          1 |     Total
----------------------+----------------------+----------
                    1 | 4,071,821    580,217 | 4,652,038 
                    2 |   558,992     18,198 |   577,190 
                    3 |    58,336     10,462 |    68,798 
                    4 |    81,193        592 |    81,785 
                    5 |    15,057        464 |    15,521 
                    6 |   231,407      3,986 |   235,393 
                    7 |    12,436    220,945 |   233,381 
                    8 |   122,836     38,847 |   161,683 
                    9 |    15,636      6,462 |    22,098 
----------------------+----------------------+----------
                Total | 5,167,714    880,173 | 6,047,887 
. }

. 
. 
. *don't know/refused code(s) for `race_var'
. local race_missing_condition none

. 
. local white_race_value =        1

. local black_race_value =        2

. local asian_race_value =        4

. local hisp_value =                      1

. local other_race_value =        7

. local mult_race_value =         8

. local amerInd_race_value  = 3

. 
. include $redi/redi11b_racethnicity.doi

. *! include file to label race/ethnicity variables
. *! version 1.0 \ molly king 2017-01-20
. 
.   *compilation of originally individual include files that programmed each race/ethnicity separate
. ***--------------------------***
. 
. // #1 GENERATE ALL VARIABLES, AND LABEL, ADD NOTES
. 
. // White
.                 gen dB_rwhite = 0

.                 // Replace each with . for missing race if there is a race missing condition: 
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rwhite = . if `race_var' == `race_missing_condition' // don't know/refuse
> d
.                         }

.                 label var dB_rwhite "Non-Hispanic White race = 1"

.                         label define dB_rwhite 0 "0_NotWhite" 1 "1_White"

.                 label val dB_rwhite dB_rwhite

.                 notes dB_rwhite: White respondent race created from `race_var' & `hisp_var' in `dataset' \ ki`catego
> ry'`dataset'.do mmk $S_DATE

. 
. // Black
.                 gen dB_rblack = 0

.                 // Replace each with . for missing race if there is a race missing condition: 
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rblack = . if  `race_var' == `race_missing_condition' // don't know/refus
> ed
.                         }

.                 label var dB_rblack "Non-Hispanic Black/AfAmer race = 1"

.                 label define dB_rblack 0 "0_NotBlack" 1 "1_Black"

.                         label val dB_rblack dB_rblack

.                 notes dB_rblack: Black/AfAmer race created from `race_var' & `hisp_var' in `dataset' \ ki`category'`
> dataset'.do mmk $S_DATE

. 
. // Asian
.         if "`asian_race_value'" != "none" {
.                 gen dB_rasian = 0
.                 // Replace each with . for missing race if there is a race missing condition: 
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rasian = . if `race_var' == `race_missing_condition' 
.                         }
.                 label var dB_rasian "Non-Hispanic Asian race = 1"
.                 label define dB_rasian 0 "0_NotAsian" 1 "1_Asian"
.                         label val dB_rasian dB_rasian
.                 notes dB_rasian: Asian race created from `race_var' & `hisp_var' in `dataset' \ ki`category'`dataset
> '.do mmk $S_DATE    
.         }

. 
. // Hispanic
.         if "`hisp_value'" != "none" {
.                 gen dB_rhisp = 0
.                 // Replace each with . for missing race if there is a race missing condition: 
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rhisp  = . if `race_var' == `race_missing_condition' 
.                         }
.                 label var dB_rhisp  "Hispanic ethnicity = 1"
.                 label define dB_rhisp  0 "0_NotHispanic" 1 "1_Hispanic"
.                         label val dB_rhisp dB_rhisp     
.                 notes dB_rhisp: Hispanic ethnicity only created from `race_var' & `hisp_var' in `dataset' \ ki`categ
> ory'`dataset'.do mmk $S_DATE
.         }

. 
. // Other
.         if "`mult_race_value'" != "none" |  "`other_race_value'" != "none" |  "`amerInd_race_value'" != "none" {
.                 gen dB_rother = 0
.                 // Replace each with . for missing race if there is a race missing condition: 
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rother = . if `race_var' == `race_missing_condition' // don't know/refuse
> d
.                         }
.                 label var dB_rother "Non-Hispanic Other, mixed race = 1"
.                 label define dB_rother 0 "0_NotOther" 1 "1_Mixed/OtherRace"
.                         label val dB_rother dB_rother   
.                 notes dB_rother: Other, unknown, or mixed race created from `race_var' & `hisp_var' in `dataset' \ k
> i`category'`dataset'.do mmk $S_DATE
.         }

.         
.         
. // All Categories
.         gen dG_race = .
(6,047,887 missing values generated)

.         label var dG_race "Categorical race variable"

.         label define race_5categ 1 "White" 2 "Black" 3 "Asian" 4 "Hispanic" 5 "Other/mixed"

.                 label val dG_race race_5categ

.         notes dG_race: Race/ethnicity categorical variable, created from `race_var' & `hisp_var'  variable in `datas
> et' \ ki`category'`dataset'.do mmk $S_DATE

.         
. 
. ***--------------------------***
. 
. // #2 SEPARATE RACE AND HISPANIC VARIABLES
. 
. if "`hisp_var'" != "none" {
. 
. *White: dB_rwhite
.         if "`white_race_value'" != "none" {
.                 replace dB_rwhite = 1   if `race_var' == `white_race_value' & `hisp_var' != `hisp_value'
(4,071,821 real changes made)
.                 replace dG_race = 1     if `race_var' == `white_race_value' & `hisp_var' != `hisp_value'
(4,071,821 real changes made)
.         }
.         
. *Black: dB_rblack
.         if "`black_race_value'" != "none" {
.                 replace dB_rblack = 1   if `race_var' == `black_race_value' & `hisp_var' != `hisp_value'
(558,992 real changes made)
.                 replace dG_race = 2     if `race_var' == `black_race_value' & `hisp_var' != `hisp_value'
(558,992 real changes made)
.         }
.         
. *Asian: dB_rasian
.         if "`asian_race_value'" != "none" {
.                 replace dB_rasian = 1   if `race_var' == `asian_race_value' & `hisp_var' != `hisp_value' 
(81,193 real changes made)
.                 replace dG_race = 3     if `race_var' == `asian_race_value' & `hisp_var' != `hisp_value' 
(81,193 real changes made)
.         }
.                 
. *Other/mixed: dB_rother
.         if "`other_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `other_race_value' & `hisp_var' != `hisp_value' 
(12,436 real changes made)
.                 replace dG_race = 5     if `race_var' == `other_race_value' & `hisp_var' != `hisp_value' 
(12,436 real changes made)
.         }
.         if "`mult_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `mult_race_value' & `hisp_var' != `hisp_value' 
(122,836 real changes made)
.                 replace dG_race = 5     if `race_var' == `mult_race_value' & `hisp_var' != `hisp_value' 
(122,836 real changes made)
.         }
.         if "`amerInd_race_value'" != "none" {
.                  replace dB_rother = 1  if `race_var' == `amerInd_race_value' & `hisp_var' != `hisp_value' 
(58,336 real changes made)
.                  replace dG_race = 5    if `race_var' == `amerInd_race_value' & `hisp_var' != `hisp_value' 
(58,336 real changes made)
.         }
.         
. *Hispanic: dB_rhisp
.                 replace dB_rhisp = 1    if `hisp_var' == `hisp_value'
(880,173 real changes made)
.                 replace dG_race = 4     if `hisp_var' == `hisp_value'
(880,173 real changes made)
. }

. 
. 
. ***--------------------------***
. 
. // #3 with RACE variable only
. 
. if "`hisp_var'" == "none" {
. 
. *White: dB_rwhite
.         if "`white_race_value'" != "none" {
.                 replace dB_rwhite = 1   if `race_var' == `white_race_value'
.                 replace dG_race = 1     if `race_var' == `white_race_value'
.         }
.         
. *Black: dB_rblack
.         if "`black_race_value'" != "none" {
.                 replace dB_rblack = 1   if `race_var' == `black_race_value'
.                 replace dG_race = 2     if `race_var' == `black_race_value'
.         }
.         
. *Asian: dB_rasian
.         if "`asian_race_value'" != "none" {
.                 replace dB_rasian = 1   if `race_var' == `asian_race_value'
.                 replace dG_race = 3     if `race_var' == `asian_race_value'
.         }
.         
. *Other/mixed: dB_rother
.         if "`other_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `other_race_value'
.                 replace dG_race = 5     if `race_var' == `other_race_value'
.         }
.         if "`mult_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `mult_race_value'
.                 replace dG_race = 5     if `race_var' == `mult_race_value'
.         }
.         if "`amerInd_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `amerInd_race_value'
.                 replace dG_race = 5     if `race_var' == `amerInd_race_value'
.         }
.         
. *Hispanic: dB_rhisp
.         if "`hisp_value'" != "none" {
.                 replace dB_rhisp = 1    if `race_var' == `hisp_value'
.                 replace dG_race = 4     if `race_var' == `hisp_value'
.         }
. }

.         
. ***--------------------------***
. 
. //else {
. //      display as err /*
. //      */ "Need to enter either name of Hispanic variable or none after local hisp_var"
. //      exit 198
. //}
.         
. ***--------------------------***
.         
. // #4 CHECK ALL RESULTING VARIABLES     
. ***check all to ensure correct***
. 
. 
. *Check White
. capture confirm variable dB_rwhite

. if !_rc {
.         tab `race_var' dB_rwhite, m

                      |  Non-Hispanic White
        Race [general |       race = 1
             version] | 0_NotWhit    1_White |     Total
----------------------+----------------------+----------
                    1 |   580,217  4,071,821 | 4,652,038 
                    2 |   577,190          0 |   577,190 
                    3 |    68,798          0 |    68,798 
                    4 |    81,785          0 |    81,785 
                    5 |    15,521          0 |    15,521 
                    6 |   235,393          0 |   235,393 
                    7 |   233,381          0 |   233,381 
                    8 |   161,683          0 |   161,683 
                    9 |    22,098          0 |    22,098 
----------------------+----------------------+----------
                Total | 1,976,066  4,071,821 | 6,047,887 
. }

. 
. *Check Black
. capture confirm variable dB_rblack

. if !_rc {
.         tab `race_var' dB_rblack, m

                      |     Non-Hispanic
        Race [general | Black/AfAmer race = 1
             version] | 0_NotBlac    1_Black |     Total
----------------------+----------------------+----------
                    1 | 4,652,038          0 | 4,652,038 
                    2 |    18,198    558,992 |   577,190 
                    3 |    68,798          0 |    68,798 
                    4 |    81,785          0 |    81,785 
                    5 |    15,521          0 |    15,521 
                    6 |   235,393          0 |   235,393 
                    7 |   233,381          0 |   233,381 
                    8 |   161,683          0 |   161,683 
                    9 |    22,098          0 |    22,098 
----------------------+----------------------+----------
                Total | 5,488,895    558,992 | 6,047,887 
. }

. 
. *Check Asian
. capture confirm variable dB_rasian

. if !_rc {
.         tab `race_var' dB_rasian, m

                      |  Non-Hispanic Asian
        Race [general |       race = 1
             version] | 0_NotAsia    1_Asian |     Total
----------------------+----------------------+----------
                    1 | 4,652,038          0 | 4,652,038 
                    2 |   577,190          0 |   577,190 
                    3 |    68,798          0 |    68,798 
                    4 |       592     81,193 |    81,785 
                    5 |    15,521          0 |    15,521 
                    6 |   235,393          0 |   235,393 
                    7 |   233,381          0 |   233,381 
                    8 |   161,683          0 |   161,683 
                    9 |    22,098          0 |    22,098 
----------------------+----------------------+----------
                Total | 5,966,694     81,193 | 6,047,887 
. } 

. 
. *Check Other
. capture confirm variable dB_rother

. if !_rc {
.         tab `race_var' dB_rother, m

                      |  Non-Hispanic Other,
        Race [general |    mixed race = 1
             version] | 0_NotOthe  1_Mixed/O |     Total
----------------------+----------------------+----------
                    1 | 4,652,038          0 | 4,652,038 
                    2 |   577,190          0 |   577,190 
                    3 |    10,462     58,336 |    68,798 
                    4 |    81,785          0 |    81,785 
                    5 |    15,521          0 |    15,521 
                    6 |   235,393          0 |   235,393 
                    7 |   220,945     12,436 |   233,381 
                    8 |    38,847    122,836 |   161,683 
                    9 |    22,098          0 |    22,098 
----------------------+----------------------+----------
                Total | 5,854,279    193,608 | 6,047,887 
. }

. 
. *Check Hispanic
. capture confirm variable dB_rhisp

. if !_rc {
.         tab `race_var' dB_rhisp, m

                      | Hispanic ethnicity =
        Race [general |           1
             version] | 0_NotHisp  1_Hispani |     Total
----------------------+----------------------+----------
                    1 | 4,071,821    580,217 | 4,652,038 
                    2 |   558,992     18,198 |   577,190 
                    3 |    58,336     10,462 |    68,798 
                    4 |    81,193        592 |    81,785 
                    5 |    15,057        464 |    15,521 
                    6 |   231,407      3,986 |   235,393 
                    7 |    12,436    220,945 |   233,381 
                    8 |   122,836     38,847 |   161,683 
                    9 |    15,636      6,462 |    22,098 
----------------------+----------------------+----------
                Total | 5,167,714    880,173 | 6,047,887 
. }

. 
. *Check Categorical Race Variable
. tab `race_var' dG_race, m

        Race [general |                     Categorical race variable
             version] |     White      Black      Asian   Hispanic  Other/mix          . |     Total
----------------------+------------------------------------------------------------------+----------
                    1 | 4,071,821          0          0    580,217          0          0 | 4,652,038 
                    2 |         0    558,992          0     18,198          0          0 |   577,190 
                    3 |         0          0          0     10,462     58,336          0 |    68,798 
                    4 |         0          0     81,193        592          0          0 |    81,785 
                    5 |         0          0          0        464          0     15,057 |    15,521 
                    6 |         0          0          0      3,986          0    231,407 |   235,393 
                    7 |         0          0          0    220,945     12,436          0 |   233,381 
                    8 |         0          0          0     38,847    122,836          0 |   161,683 
                    9 |         0          0          0      6,462          0     15,636 |    22,098 
----------------------+------------------------------------------------------------------+----------
                Total | 4,071,821    558,992     81,193    880,173    193,608    262,100 | 6,047,887 

. tab dG_race `race_var', m

Categorical |
       race |                                 Race [general version]
   variable |         1          2          3          4          5          6          7          8 |     Total
------------+----------------------------------------------------------------------------------------+----------
      White | 4,071,821          0          0          0          0          0          0          0 | 4,071,821 
      Black |         0    558,992          0          0          0          0          0          0 |   558,992 
      Asian |         0          0          0     81,193          0          0          0          0 |    81,193 
   Hispanic |   580,217     18,198     10,462        592        464      3,986    220,945     38,847 |   880,173 
Other/mixed |         0          0     58,336          0          0          0     12,436    122,836 |   193,608 
          . |         0          0          0          0     15,057    231,407          0          0 |   262,100 
------------+----------------------------------------------------------------------------------------+----------
      Total | 4,652,038    577,190     68,798     81,785     15,521    235,393    233,381    161,683 | 6,047,887 


            |    Race
Categorical |  [general
       race |  version]
   variable |         9 |     Total
------------+-----------+----------
      White |         0 | 4,071,821 
      Black |         0 |   558,992 
      Asian |         0 |    81,193 
   Hispanic |     6,462 |   880,173 
Other/mixed |         0 |   193,608 
          . |    15,636 |   262,100 
------------+-----------+----------
      Total |    22,098 | 6,047,887 

. if "`hisp_var'" != "none" {
.         tab dG_race `hisp_var', m

Categorical |
       race |         hisp
   variable |         0          1 |     Total
------------+----------------------+----------
      White | 4,071,821          0 | 4,071,821 
      Black |   558,992          0 |   558,992 
      Asian |    81,193          0 |    81,193 
   Hispanic |         0    880,173 |   880,173 
Other/mixed |   193,608          0 |   193,608 
          . |   262,100          0 |   262,100 
------------+----------------------+----------
      Total | 5,167,714    880,173 | 6,047,887 
. }

. 
. 
. // Japanese
. replace dB_rasian = 1 if `race_var' == 5 & `hisp_var' != `hisp_value'
(15,057 real changes made)

. replace dG_race = 3   if `race_var' == 5 & `hisp_var' != `hisp_value'
(15,057 real changes made)

. // Other Asian or Pacific Islander 
. replace dB_rasian = 1 if `race_var' == 6 & `hisp_var' != `hisp_value'
(231,407 real changes made)

. replace dG_race = 3   if `race_var' == 6 & `hisp_var' != `hisp_value'
(231,407 real changes made)

. // Three or more
. replace dB_rother = 1 if `race_var' == 9 & `hisp_var' != `hisp_value'
(15,636 real changes made)

. replace dG_race = 5 if `race_var' == 9 & `hisp_var' != `hisp_value' 
(15,636 real changes made)

. 
. fvset base 1 dG_race            // ref: white_race_value

. tab `race_var' dG_race, m

        Race [general |               Categorical race variable
             version] |     White      Black      Asian   Hispanic  Other/mix |     Total
----------------------+-------------------------------------------------------+----------
                    1 | 4,071,821          0          0    580,217          0 | 4,652,038 
                    2 |         0    558,992          0     18,198          0 |   577,190 
                    3 |         0          0          0     10,462     58,336 |    68,798 
                    4 |         0          0     81,193        592          0 |    81,785 
                    5 |         0          0     15,057        464          0 |    15,521 
                    6 |         0          0    231,407      3,986          0 |   235,393 
                    7 |         0          0          0    220,945     12,436 |   233,381 
                    8 |         0          0          0     38,847    122,836 |   161,683 
                    9 |         0          0          0      6,462     15,636 |    22,098 
----------------------+-------------------------------------------------------+----------
                Total | 4,071,821    558,992    327,657    880,173    209,244 | 6,047,887 

. 
. ***--------------------------***        
. 
. // #3 EDUCATION
. 
. local edu_var educ_acs

. tab `edu_var'

        Educational attainment [general |
                               version] |      Freq.     Percent        Cum.
----------------------------------------+-----------------------------------
                    NIU or no schooling |    379,739        6.28        6.28
                           NIU or blank |    484,636        8.01       14.29
                      None or preschool |    419,762        6.94       21.23
                                      3 |    133,434        2.21       23.44
                                      4 |    148,168        2.45       25.89
                                      5 |    162,703        2.69       28.58
                                      6 |  1,727,195       28.56       57.14
                                      7 |    699,852       11.57       68.71
                                      8 |    400,985        6.63       75.34
                   Grades 1, 2, 3, or 4 |    918,477       15.19       90.53
                                Grade 1 |    572,936        9.47      100.00
----------------------------------------+-----------------------------------
                                  Total |  6,047,887      100.00

. tab `edu_var', nolab m

Educational |
 attainment |
   [general |
   version] |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    379,739        6.28        6.28
          1 |    484,636        8.01       14.29
          2 |    419,762        6.94       21.23
          3 |    133,434        2.21       23.44
          4 |    148,168        2.45       25.89
          5 |    162,703        2.69       28.58
          6 |  1,727,195       28.56       57.14
          7 |    699,852       11.57       68.71
          8 |    400,985        6.63       75.34
         10 |    918,477       15.19       90.53
         11 |    572,936        9.47      100.00
------------+-----------------------------------
      Total |  6,047,887      100.00

. 
. *don't know/refused code(s) for `edu_var'
. local edu_missing_condition "none"

. 
. * Conditions for each category
. local lHS_condition     `"`edu_var' <= 5"'

. local HS_condition              `"`edu_var' == 6"'

. local sCol_condition    `"`edu_var' == 7 | `edu_var' == 8"'

. local col_condition             `"`edu_var' == 10"'

. local grad_condition    `"`edu_var' == 11"'

. 
. include $redi/redi11c_education.doi

. *! include file to label education variables
. *! version 1.0 \ molly king 2017-01-24
. 
.   *compilation of originally individual include files that programmed each education variable separate
. ***--------------------------***
. 
. // #1 GENERATE ALL VARIABLES, AND LABEL, ADD NOTES
. 
. 
. // Categorical Education Variable
.         gen dG_edu = .
(6,047,887 missing values generated)

.         label var dG_edu "Categorical education variable"

.         label define edu_5categ 1 "< HS" 2 "HS" 3 "some college" 4 "college" 5 "grad school"

.                 label val dG_edu edu_5categ

.         notes dG_edu: Education categorical variable, created from `edu_var' variable in `dataset' \ ki`category'`da
> taset'.do mmk $S_DATE

. 
.         
. // Less than HS
.         if "`lHS_condition'" != "none" {
.                 gen dB_edu_lHS = 0
.                 // Replace each with . for missing edu. if there is a edu. missing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_lHS = . if `edu_missing_condition'
.                         }
.                 label var dB_edu_lHS "<HS"
.                 label define dB_edu_lHS 0 "0_>HS" 1 "1_<HS"
.                         label val dB_edu_lHS dB_edu_lHS
.                 notes dB_edu_lHS: Less than HS edu. created from `edu_var' variable in `dataset' \ ki`category'`data
> set'.do mmk $S_DATE
.                 
.                 replace dB_edu_lHS = 1 if `lHS_condition'
(1,728,442 real changes made)
.                 replace dG_edu     = 1 if `lHS_condition'
(1,728,442 real changes made)
.         }

.         
. 
. // High School
.         if "`HS_condition'" != "none" {
.                 gen dB_edu_HS = 0
.                 // Replace each with . for missing edu. if there is a edu. missing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_HS = . if `edu_missing_condition'
.                         }
.                 label var dB_edu_HS "HS"
.                 label define dB_edu_HS 0 "0_notHS" 1 "1_HS"
.                         label val dB_edu_HS dB_edu_HS
.                 notes dB_edu_HS: HS edu. created from `edu_var' variable in `dataset' \ ki`category'`dataset'.do mmk
>  $S_DATE
.                 
.                 replace dB_edu_HS = 1 if `HS_condition'
(1,727,195 real changes made)
.                 replace dG_edu    = 2 if `HS_condition'
(1,727,195 real changes made)
.         }

.         
.         
. // Some college
.         if "`sCol_condition'" != "none" {
.                 gen dB_edu_sCol = 0
.                 // Replace each with . for missing edu. if there is a edu. missing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_sCol = . if `edu_missing_condition'
.                         }
.                 label var dB_edu_sCol "Some College / Voc. Training"
.                 label define dB_edu_sCol 0 "0_notSomeCol" 1 "1_SomeCol"
.                         label val dB_edu_sCol dB_edu_sCol
.                 notes dB_edu_sCol: Some College edu. created from `edu_var' variable in `dataset' \ ki`category'`dat
> aset'.do mmk $S_DATE
. 
.                 replace dB_edu_sCol = 1 if `sCol_condition'
(1,100,837 real changes made)
.                 replace dG_edu      = 3 if `sCol_condition'
(1,100,837 real changes made)
.         }

. 
.         
. // College Degree
.         if "`col_condition'" != "none" {
.                 gen dB_edu_col = 0
.                 // Replace each with . for missing edu. if there is a edu. missing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_col = . if `edu_missing_condition'
.                         }
.                 label var dB_edu_col "College degree"
.                 label define dB_edu_col 0 "0_notCol" 1 "1_College"
.                         label val dB_edu_col dB_edu_col
.                 notes dB_edu_col: College degree, created from `edu_var' variable in `dataset' \ ki`category'`datase
> t'.do mmk $S_DATE
.         
.                 replace dB_edu_col = 1 if `col_condition'
(918,477 real changes made)
.                 replace dG_edu     = 4 if `col_condition'
(918,477 real changes made)
.         }

.         
.         
. // Post-graduate degree
.         if "`grad_condition'" != "none" {
.                 gen dB_edu_grad = 0
.                 // Replace each with . for missing edu. if there is a edu. missing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_grad = . if `edu_missing_condition'
.                         }
.                 label var dB_edu_grad "Graduate degree"
.                 label define dB_edu_grad 0 "0_<GradDeg" 1 "1_GradDegree"
.                         label val dB_edu_grad dB_edu_grad
.                 notes dB_edu_grad: Graduate degree, created from `edu_var' variable in `dataset' \ ki`category'`data
> set'.do mmk $S_DATE
.                 
.                 replace dB_edu_grad = 1 if `grad_condition'
(572,936 real changes made)
.                 replace dG_edu      = 5 if `grad_condition'
(572,936 real changes made)
.         }

.         
. 
. // College + post-graduate
.         if "`grad_condition'" != "none" & "`col_condition'" != "none" {
.                 gen dB_edu_colp = 0
.                 // Replace each with . for missing edu. if there is a edu. missing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_colp = . if `edu_missing_condition'
.                         }
.                 label var dB_edu_colp "College or Graduate Degree"
.                 label define dB_edu_colp 0 "0_NoBA" 1 "1_BA+"
.                         label val dB_edu_colp dB_edu_colp       
.                 notes dB_edu_colp: College plus grad, created from `edu_var' variable in `dataset' \ ki`category'`da
> taset'.do mmk $S_DATE
. 
.                 replace dB_edu_colp = 1  if `col_condition' | `grad_condition'
(1,491,413 real changes made)
.         }

. 
. // College + post-graduate, where can't disentangle the two
.         if "`grad_condition'" == "none" & "`col_condition'" != "none" {
.                 gen dB_edu_colp = 0
.                 // Replace each with . for missing edu. if there is a edu. missing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_colp = . if `edu_missing_condition'
.                         }
.                 label var dB_edu_colp "College or Graduate Degree"
.                 label define dB_edu_colp 0 "0_NoBA" 1 "1_BA+"
.                         label val dB_edu_colp dB_edu_colp       
.                 notes dB_edu_colp: College plus grad, created from `edu_var' variable in `dataset' \ ki`category'`da
> taset'.do mmk $S_DATE
. 
.                 replace dB_edu_colp = 1  if `col_condition' 
.                 // here, the college condition covers both those who have a bachelors and more
.                 drop dB_edu_col
.         }

.         
. 
. 
. // # CHECK TO ENSURE CORRECT
. if "`lHS_condition'" != "none" {
.         tab `edu_var' dB_edu_lHS, m

          Educational |
  attainment [general |          <HS
             version] |     0_>HS      1_<HS |     Total
----------------------+----------------------+----------
  NIU or no schooling |         0    379,739 |   379,739 
         NIU or blank |         0    484,636 |   484,636 
    None or preschool |         0    419,762 |   419,762 
                    3 |         0    133,434 |   133,434 
                    4 |         0    148,168 |   148,168 
                    5 |         0    162,703 |   162,703 
                    6 | 1,727,195          0 | 1,727,195 
                    7 |   699,852          0 |   699,852 
                    8 |   400,985          0 |   400,985 
 Grades 1, 2, 3, or 4 |   918,477          0 |   918,477 
              Grade 1 |   572,936          0 |   572,936 
----------------------+----------------------+----------
                Total | 4,319,445  1,728,442 | 6,047,887 
. }

. if "`HS_condition'" != "none" {
.         tab `edu_var' dB_edu_HS, m

          Educational |
  attainment [general |          HS
             version] |   0_notHS       1_HS |     Total
----------------------+----------------------+----------
  NIU or no schooling |   379,739          0 |   379,739 
         NIU or blank |   484,636          0 |   484,636 
    None or preschool |   419,762          0 |   419,762 
                    3 |   133,434          0 |   133,434 
                    4 |   148,168          0 |   148,168 
                    5 |   162,703          0 |   162,703 
                    6 |         0  1,727,195 | 1,727,195 
                    7 |   699,852          0 |   699,852 
                    8 |   400,985          0 |   400,985 
 Grades 1, 2, 3, or 4 |   918,477          0 |   918,477 
              Grade 1 |   572,936          0 |   572,936 
----------------------+----------------------+----------
                Total | 4,320,692  1,727,195 | 6,047,887 
. }

. if "`sCol_condition'" != "none" {
.         tab `edu_var' dB_edu_sCol, m

          Educational |  Some College / Voc.
  attainment [general |       Training
             version] | 0_notSome  1_SomeCol |     Total
----------------------+----------------------+----------
  NIU or no schooling |   379,739          0 |   379,739 
         NIU or blank |   484,636          0 |   484,636 
    None or preschool |   419,762          0 |   419,762 
                    3 |   133,434          0 |   133,434 
                    4 |   148,168          0 |   148,168 
                    5 |   162,703          0 |   162,703 
                    6 | 1,727,195          0 | 1,727,195 
                    7 |         0    699,852 |   699,852 
                    8 |         0    400,985 |   400,985 
 Grades 1, 2, 3, or 4 |   918,477          0 |   918,477 
              Grade 1 |   572,936          0 |   572,936 
----------------------+----------------------+----------
                Total | 4,947,050  1,100,837 | 6,047,887 
. }

. if "`col_condition'" != "none" & "`grad_condition'" != "none" {
.         tab `edu_var' dB_edu_col, m

          Educational |
  attainment [general |    College degree
             version] |  0_notCol  1_College |     Total
----------------------+----------------------+----------
  NIU or no schooling |   379,739          0 |   379,739 
         NIU or blank |   484,636          0 |   484,636 
    None or preschool |   419,762          0 |   419,762 
                    3 |   133,434          0 |   133,434 
                    4 |   148,168          0 |   148,168 
                    5 |   162,703          0 |   162,703 
                    6 | 1,727,195          0 | 1,727,195 
                    7 |   699,852          0 |   699,852 
                    8 |   400,985          0 |   400,985 
 Grades 1, 2, 3, or 4 |         0    918,477 |   918,477 
              Grade 1 |   572,936          0 |   572,936 
----------------------+----------------------+----------
                Total | 5,129,410    918,477 | 6,047,887 
. }

. if "`col_condition'" != "none" {
.         tab `edu_var' dB_edu_colp, m

          Educational |  College or Graduate
  attainment [general |        Degree
             version] |    0_NoBA      1_BA+ |     Total
----------------------+----------------------+----------
  NIU or no schooling |   379,739          0 |   379,739 
         NIU or blank |   484,636          0 |   484,636 
    None or preschool |   419,762          0 |   419,762 
                    3 |   133,434          0 |   133,434 
                    4 |   148,168          0 |   148,168 
                    5 |   162,703          0 |   162,703 
                    6 | 1,727,195          0 | 1,727,195 
                    7 |   699,852          0 |   699,852 
                    8 |   400,985          0 |   400,985 
 Grades 1, 2, 3, or 4 |         0    918,477 |   918,477 
              Grade 1 |         0    572,936 |   572,936 
----------------------+----------------------+----------
                Total | 4,556,474  1,491,413 | 6,047,887 
. }

. if "`grad_condition'" != "none" {
.         tab `edu_var' dB_edu_grad, m

          Educational |
  attainment [general |    Graduate degree
             version] | 0_<GradDe  1_GradDeg |     Total
----------------------+----------------------+----------
  NIU or no schooling |   379,739          0 |   379,739 
         NIU or blank |   484,636          0 |   484,636 
    None or preschool |   419,762          0 |   419,762 
                    3 |   133,434          0 |   133,434 
                    4 |   148,168          0 |   148,168 
                    5 |   162,703          0 |   162,703 
                    6 | 1,727,195          0 | 1,727,195 
                    7 |   699,852          0 |   699,852 
                    8 |   400,985          0 |   400,985 
 Grades 1, 2, 3, or 4 |   918,477          0 |   918,477 
              Grade 1 |         0    572,936 |   572,936 
----------------------+----------------------+----------
                Total | 5,474,951    572,936 | 6,047,887 
.         tab `edu_var' dB_edu_grad, m nolabel

Educationa |
         l |
attainment |
  [general |    Graduate degree
  version] |         0          1 |     Total
-----------+----------------------+----------
         0 |   379,739          0 |   379,739 
         1 |   484,636          0 |   484,636 
         2 |   419,762          0 |   419,762 
         3 |   133,434          0 |   133,434 
         4 |   148,168          0 |   148,168 
         5 |   162,703          0 |   162,703 
         6 | 1,727,195          0 | 1,727,195 
         7 |   699,852          0 |   699,852 
         8 |   400,985          0 |   400,985 
        10 |   918,477          0 |   918,477 
        11 |         0    572,936 |   572,936 
-----------+----------------------+----------
     Total | 5,474,951    572,936 | 6,047,887 
. }

. tab `edu_var' dG_edu, m

          Educational |
  attainment [general |             Categorical education variable
             version] |      < HS         HS  some coll    college  grad scho |     Total
----------------------+-------------------------------------------------------+----------
  NIU or no schooling |   379,739          0          0          0          0 |   379,739 
         NIU or blank |   484,636          0          0          0          0 |   484,636 
    None or preschool |   419,762          0          0          0          0 |   419,762 
                    3 |   133,434          0          0          0          0 |   133,434 
                    4 |   148,168          0          0          0          0 |   148,168 
                    5 |   162,703          0          0          0          0 |   162,703 
                    6 |         0  1,727,195          0          0          0 | 1,727,195 
                    7 |         0          0    699,852          0          0 |   699,852 
                    8 |         0          0    400,985          0          0 |   400,985 
 Grades 1, 2, 3, or 4 |         0          0          0    918,477          0 |   918,477 
              Grade 1 |         0          0          0          0    572,936 |   572,936 
----------------------+-------------------------------------------------------+----------
                Total | 1,728,442  1,727,195  1,100,837    918,477    572,936 | 6,047,887 

.         
. 
. 
. fvset base 1 dG_edu             // ref: less than HS

. tab `edu_var' dG_edu, m

          Educational |
  attainment [general |             Categorical education variable
             version] |      < HS         HS  some coll    college  grad scho |     Total
----------------------+-------------------------------------------------------+----------
  NIU or no schooling |   379,739          0          0          0          0 |   379,739 
         NIU or blank |   484,636          0          0          0          0 |   484,636 
    None or preschool |   419,762          0          0          0          0 |   419,762 
                    3 |   133,434          0          0          0          0 |   133,434 
                    4 |   148,168          0          0          0          0 |   148,168 
                    5 |   162,703          0          0          0          0 |   162,703 
                    6 |         0  1,727,195          0          0          0 | 1,727,195 
                    7 |         0          0    699,852          0          0 |   699,852 
                    8 |         0          0    400,985          0          0 |   400,985 
 Grades 1, 2, 3, or 4 |         0          0          0    918,477          0 |   918,477 
              Grade 1 |         0          0          0          0    572,936 |   572,936 
----------------------+-------------------------------------------------------+----------
                Total | 1,728,442  1,727,195  1,100,837    918,477    572,936 | 6,047,887 

. 
. ***--------------------------***
. 
. // # INDEPENDENT LIVING DIFFICULTY
. 
. /*DIFFMOB indicates whether the respondent has any physical, mental, or 
> emotional condition lasting six months or more that makes it difficult or 
> impossible to perform basic activities outside the home alone. 
> This does not include temporary health problems, such as broken bones.*/
. 
. local disab diffmob_acs

. tab `disab'

     Independent living |
             difficulty |      Freq.     Percent        Cum.
------------------------+-----------------------------------
                    NIU |  1,066,928       17.64       17.64
 No mobility limitation |  4,692,510       77.59       95.23
Has mobility limitation |    288,449        4.77      100.00
------------------------+-----------------------------------
                  Total |  6,047,887      100.00

. tab `disab', nolab

Independent |
     living |
 difficulty |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |  1,066,928       17.64       17.64
          1 |  4,692,510       77.59       95.23
          2 |    288,449        4.77      100.00
------------+-----------------------------------
      Total |  6,047,887      100.00

. 
. generate disability = .
(6,047,887 missing values generated)

. replace disability = 1 if `disab' == 2  // has mobility limitation
(288,449 real changes made)

. replace disability = 0 if `disab' == 1  // no mobility limitation
(4,692,510 real changes made)

. 
. tab `disab' disability, m

   Independent living |            disability
           difficulty |         0          1          . |     Total
----------------------+---------------------------------+----------
                  NIU |         0          0  1,066,928 | 1,066,928 
No mobility limitatio | 4,692,510          0          0 | 4,692,510 
Has mobility limitati |         0    288,449          0 |   288,449 
----------------------+---------------------------------+----------
                Total | 4,692,510    288,449  1,066,928 | 6,047,887 

. 
. ***--------------------------***
. 
. // # MARITAL STATUS
. 
. /*MARST gives each person's current marital status,
>  including whether the spouse was currently living in the same household.*/
. 
. local mar_var  marst_acs

. tab `mar_var'

         Marital status |      Freq.     Percent        Cum.
------------------------+-----------------------------------
Married, spouse present |  2,591,012       42.84       42.84
 Married, spouse absent |     88,671        1.47       44.31
              Separated |     83,371        1.38       45.69
               Divorced |    538,181        8.90       54.58
                Widowed |    311,085        5.14       59.73
   Never married/single |  2,435,567       40.27      100.00
------------------------+-----------------------------------
                  Total |  6,047,887      100.00

. tab `mar_var', nolab

    Marital |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  2,591,012       42.84       42.84
          2 |     88,671        1.47       44.31
          3 |     83,371        1.38       45.69
          4 |    538,181        8.90       54.58
          5 |    311,085        5.14       59.73
          6 |  2,435,567       40.27      100.00
------------+-----------------------------------
      Total |  6,047,887      100.00

. 
. generate married = .
(6,047,887 missing values generated)

. replace married = 1 if `mar_var' == 1 | `mar_var' == 2
(2,679,683 real changes made)

. replace married = 0 if `mar_var' == 3 | `mar_var' == 4 | `mar_var' == 5 | `mar_var' == 6
(3,368,204 real changes made)

. 
. tab `mar_var' married, m

                      |        married
       Marital status |         0          1 |     Total
----------------------+----------------------+----------
Married, spouse prese |         0  2,591,012 | 2,591,012 
Married, spouse absen |         0     88,671 |    88,671 
            Separated |    83,371          0 |    83,371 
             Divorced |   538,181          0 |   538,181 
              Widowed |   311,085          0 |   311,085 
 Never married/single | 2,435,567          0 | 2,435,567 
----------------------+----------------------+----------
                Total | 3,368,204  2,679,683 | 6,047,887 

. 
. ***--------------------------***
. 
. // # LABOR FORCE
. 
. /*LABFORCE is a dichotomous variable indicating whether a person participated 
> in the labor force. See EMPSTAT for a non-dichotomous variable that indicates 
> whether the respondent was part of the labor force -- working or seeking work 
> -- and, if so, whether the person was currently unemployed.*/
. 
. tab labforce

        Labor force status |      Freq.     Percent        Cum.
---------------------------+-----------------------------------
                       NIU |     32,143        0.53        0.53
No, not in the labor force |  1,829,915       30.26       30.79
   Yes, in the labor force |  4,185,829       69.21      100.00
---------------------------+-----------------------------------
                     Total |  6,047,887      100.00

. tab labforce, nolab m

Labor force |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     32,143        0.53        0.53
          1 |  1,829,915       30.26       30.79
          2 |  4,185,829       69.21      100.00
------------+-----------------------------------
      Total |  6,047,887      100.00

. 
. generate labor = .
(6,047,887 missing values generated)

. replace labor = 1 if labforce == 2
(4,185,829 real changes made)

. replace labor = 0 if labforce == 1
(1,829,915 real changes made)

. 
. tab labforce labor, m

                      |              labor
   Labor force status |         0          1          . |     Total
----------------------+---------------------------------+----------
                  NIU |         0          0     32,143 |    32,143 
No, not in the labor  | 1,829,915          0          0 | 1,829,915 
Yes, in the labor for |         0  4,185,829          0 | 4,185,829 
----------------------+---------------------------------+----------
                Total | 1,829,915  4,185,829     32,143 | 6,047,887 

. 
. ***--------------------------***
. 
. // # OWNERSHIP OF HOUSING
. 
. /*OWNERSHP indicates whether the household rented or owned its housing unit. 
> Households that acquired their unit with a mortgage or other lending arrangement
>  were understood to "own" their unit even if they had not yet completed repayment.
> Two types of renters were identified: those who paid cash rent and those who 
> paid no cash rent. The latter category included occupants who paid only for their utilities.*/
. 
. local owner  ownershp_acs

. tab `owner'

Ownership of dwelling |
    (tenure) [general |
             version] |      Freq.     Percent        Cum.
----------------------+-----------------------------------
                    1 |  4,330,936       71.61       71.61
                    2 |  1,716,951       28.39      100.00
----------------------+-----------------------------------
                Total |  6,047,887      100.00

. tab `owner', nolab

  Ownership |
of dwelling |
   (tenure) |
   [general |
   version] |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  4,330,936       71.61       71.61
          2 |  1,716,951       28.39      100.00
------------+-----------------------------------
      Total |  6,047,887      100.00

. 
. generate ownhouse = .
(6,047,887 missing values generated)

. replace ownhouse = 1 if `owner' == 1
(4,330,936 real changes made)

. replace ownhouse = 0 if `owner' == 2 
(1,716,951 real changes made)

. 
. tab `owner' ownhouse, m

Ownership of dwelling |
    (tenure) [general |       ownhouse
             version] |         0          1 |     Total
----------------------+----------------------+----------
                    1 |         0  4,330,936 | 4,330,936 
                    2 | 1,716,951          0 | 1,716,951 
----------------------+----------------------+----------
                Total | 1,716,951  4,330,936 | 6,047,887 

. 
. ***--------------------------***
. /*
> // # MIGRATION STATUS
> 
> /*MIGRATE1 indicates whether the respondent had changed residence in the past year. Those who were living in the sam
> e house as one year ago were considered non-movers and were asked no further questions about migration over the past
>  year. Movers were asked about the city, county and state and/or the U.S. territory or foreign country where they re
> sided one year ago.*/
> 
> local mig_status migrate1_acs
> tab `mig_status'
> tab `mig_status', nolab
> 
> generate migrate = .
> replace migrate = 1 if `mig_status' == 2 | `mig_status' == 3 | `mig_status' == 4 
> replace migrate = 0 if `mig_status'     == 1
> 
> tab `mig_status' migrate, m
> */
. ***--------------------------***
. 
. save $deriv/redi12_REDI_regressions-hinc_shp.dta, replace
file ~/Documents/SocResearch/Dissertation/data/data_derv/redi12_REDI_regressions-hinc_shp.dta saved

. 
. ***--------------------------***
. // REGRESSION: ACS Income as DV (Original Research Continuous Income)
. ***--------------------------***        
. 
. *use $deriv/redi12_REDI_regressions-hinc_shp.dta, clear
. 
. di in red "Predict original ACS continuous income as a function of gender of householder, " ///
>                   "race/ethnicity, education"           
Predict original ACS continuous income as a function of gender of householder, race/ethnicity, education

. svy: reg acs_hinc_shp_`conv_year' /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad // lessHS comparison category
(running regress on estimation sample)

BRR replications (80)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..............................

Survey: Linear regression                     Number of obs     =    6,047,887
                                              Population size   =  632,679,577
                                              Replications      =           80
                                              Design df         =           79
                                              F(   9,     71)   =     22912.79
                                              Prob > F          =       0.0000
                                              R-squared         =       0.0887

------------------------------------------------------------------------------
             |                BRR *
acs_hin~2017 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      dB_fem |  -6454.229   71.57683   -90.17   0.000      -6596.7   -6311.759
   dB_rblack |  -32136.49   179.9233  -178.61   0.000    -32494.62   -31778.36
   dB_rasian |   12559.47   429.8961    29.22   0.000     11703.78    13415.16
    dB_rhisp |  -22360.66   189.1955  -118.19   0.000    -22737.25   -21984.08
   dB_rother |   -7267.85   382.6508   -18.99   0.000    -8029.497   -6506.203
   dB_edu_HS |  -14112.14   196.2653   -71.90   0.000    -14502.79   -13721.48
 dB_edu_sCol |  -2341.328   188.6743   -12.41   0.000    -2716.874   -1965.781
  dB_edu_col |   33909.52   249.5979   135.86   0.000     33412.71    34406.33
 dB_edu_grad |      65298   295.1262   221.25   0.000     64710.57    65885.44
       _cons |   99285.57   226.0764   439.17   0.000     98835.58    99735.57
------------------------------------------------------------------------------

.         
. 
. di in red "Predict original ACS continuous income as a function of gender of householder, " ///
>                   "race/ethnicity, education, married, disability"              
Predict original ACS continuous income as a function of gender of householder, race/ethnicity, education, married, dis
> ability

. svy: reg acs_hinc_shp_`conv_year' /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison category
>         married disability
(running regress on estimation sample)

BRR replications (80)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..............................

Survey: Linear regression                     Number of obs     =    4,980,959
                                              Population size   =  510,877,920
                                              Replications      =           80
                                              Design df         =           79
                                              F(  11,     69)   =     22425.40
                                              Prob > F          =       0.0000
                                              R-squared         =       0.1214

------------------------------------------------------------------------------
             |                BRR *
acs_hin~2017 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      dB_fem |  -6752.023   77.74273   -86.85   0.000    -6906.766    -6597.28
   dB_rblack |  -21516.79    184.325  -116.73   0.000    -21883.68    -21149.9
   dB_rasian |   9947.756   406.3103    24.48   0.000     9139.015     10756.5
    dB_rhisp |  -13610.93   195.4299   -69.65   0.000    -13999.92   -13221.94
   dB_rother |  -4407.358   428.5493   -10.28   0.000    -5260.364   -3554.352
   dB_edu_HS |  -4559.462   192.7385   -23.66   0.000    -4943.098   -4175.825
 dB_edu_sCol |   6406.213   195.3763    32.79   0.000     6017.326      6795.1
  dB_edu_col |   40946.89   246.6271   166.03   0.000     40455.99    41437.79
 dB_edu_grad |   70457.83   308.6476   228.28   0.000     69843.48    71072.18
     married |   22960.94    109.541   209.61   0.000     22742.91    23178.98
  disability |   -22399.6   181.4621  -123.44   0.000    -22760.79    -22038.4
       _cons |   78023.62   237.4853   328.54   0.000     77550.92    78496.32
------------------------------------------------------------------------------

. 
.         
. di in red "Predict original ACS continuous income as a function of gender of householder, " ///
>                   "race/ethnicity, education, married, disability, labor force"         
Predict original ACS continuous income as a function of gender of householder, race/ethnicity, education, married, dis
> ability, labor force

. svy: reg acs_hinc_shp_`conv_year' /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison category
>         married disability      labor
(running regress on estimation sample)

BRR replications (80)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..............................

Survey: Linear regression                     Number of obs     =    4,954,499
                                              Population size   =  508,197,095
                                              Replications      =           80
                                              Design df         =           79
                                              F(  12,     68)   =     30240.62
                                              Prob > F          =       0.0000
                                              R-squared         =       0.1551

------------------------------------------------------------------------------
             |                BRR *
acs_hin~2017 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      dB_fem |  -6007.559    76.7175   -78.31   0.000    -6160.262   -5854.857
   dB_rblack |  -19642.76    182.067  -107.89   0.000    -20005.16   -19280.37
   dB_rasian |   9801.141   385.8035    25.40   0.000     9033.218    10569.06
    dB_rhisp |  -12997.42   192.7645   -67.43   0.000    -13381.11   -12613.73
   dB_rother |  -3907.344   409.0402    -9.55   0.000    -4721.518    -3093.17
   dB_edu_HS |  -5106.425   185.0891   -27.59   0.000    -5474.835   -4738.014
 dB_edu_sCol |   4895.267   183.5241    26.67   0.000     4529.971    5260.562
  dB_edu_col |   37646.16   243.1767   154.81   0.000     37162.13    38130.19
 dB_edu_grad |   66416.28   300.6959   220.88   0.000     65817.76     67014.8
     married |   20564.32   106.4111   193.25   0.000     20352.51    20776.12
  disability |  -19507.81   177.6303  -109.82   0.000    -19861.37   -19154.24
       labor |      38264     104.74   365.32   0.000     38055.52    38472.48
       _cons |    53367.7   225.4275   236.74   0.000        52919     53816.4
------------------------------------------------------------------------------

.         
. ***--------------------------***
. // REGRESSION: REDI Income as DV
. ***--------------------------***        
. 
. di in red "Predict REDI-created income as a function of education, race/ethnicity, gender of householder"       
Predict REDI-created income as a function of education, race/ethnicity, gender of householder

. svy: reg redi_dV_hinc_shp_`conv_year' /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad // lessHS comparison category
(running regress on estimation sample)

BRR replications (80)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..............................

Survey: Linear regression                     Number of obs     =    6,047,887
                                              Population size   =  632,679,577
                                              Replications      =           80
                                              Design df         =           79
                                              F(   9,     71)   =     31726.42
                                              Prob > F          =       0.0000
                                              R-squared         =       0.0857

------------------------------------------------------------------------------
             |                BRR *
redi_dV_hi~7 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      dB_fem |  -6045.454   72.02702   -83.93   0.000     -6188.82   -5902.088
   dB_rblack |  -28480.91   169.9932  -167.54   0.000    -28819.28   -28142.55
   dB_rasian |   12459.07   339.7131    36.68   0.000     11782.89    13135.25
    dB_rhisp |  -19205.75   168.2597  -114.14   0.000    -19540.66   -18870.84
   dB_rother |   -6621.62   355.4142   -18.63   0.000    -7329.055   -5914.186
   dB_edu_HS |  -11070.25   174.2731   -63.52   0.000    -11417.13   -10723.37
 dB_edu_sCol |   396.1005   177.1175     2.24   0.028     43.55699     748.644
  dB_edu_col |   32697.91   218.7855   149.45   0.000     32262.43     33133.4
 dB_edu_grad |   55832.89   231.9065   240.76   0.000     55371.29    56294.49
       _cons |   94037.96   191.0965   492.10   0.000     93657.59    94418.32
------------------------------------------------------------------------------

. 
. 
. di in red "Predict REDI-created income as a function of gender of householder, " ///
>                   "race/ethnicity, education, marital status, disability"       
Predict REDI-created income as a function of gender of householder, race/ethnicity, education, marital status, disabil
> ity

. svy: reg redi_dV_hinc_shp_`conv_year' /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison category
>         married disability 
(running regress on estimation sample)

BRR replications (80)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..............................

Survey: Linear regression                     Number of obs     =    4,980,959
                                              Population size   =  510,877,920
                                              Replications      =           80
                                              Design df         =           79
                                              F(  11,     69)   =     28567.16
                                              Prob > F          =       0.0000
                                              R-squared         =       0.1172

------------------------------------------------------------------------------
             |                BRR *
redi_dV_hi~7 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      dB_fem |  -6307.187   76.37697   -82.58   0.000    -6459.211   -6155.162
   dB_rblack |  -18966.33   174.7294  -108.55   0.000    -19314.12   -18618.54
   dB_rasian |   10209.38   345.6732    29.53   0.000     9521.336    10897.43
    dB_rhisp |  -11351.21   163.7344   -69.33   0.000    -11677.11    -11025.3
   dB_rother |  -3580.499   396.5107    -9.03   0.000    -4369.734   -2791.265
   dB_edu_HS |  -2629.926   169.4217   -15.52   0.000    -2967.152   -2292.701
 dB_edu_sCol |   8072.861   177.2287    45.55   0.000     7720.096    8425.626
  dB_edu_col |   38780.04   212.4492   182.54   0.000     38357.17    39202.91
 dB_edu_grad |   60194.27   227.9252   264.10   0.000     59740.59    60647.94
     married |   20962.75   103.0691   203.39   0.000      20757.6     21167.9
  disability |  -21163.43   162.6426  -130.12   0.000    -21487.16   -20839.69
       _cons |   74985.92     198.27   378.20   0.000     74591.28    75380.57
------------------------------------------------------------------------------

.         
. di in red "Predict REDI-created income as a function of gender of householder, " ///
>                   "race/ethnicity, education, marital status, disability, labor"        
Predict REDI-created income as a function of gender of householder, race/ethnicity, education, marital status, disabil
> ity, labor

. svy: reg redi_dV_hinc_shp_`conv_year' /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison category
>         married disability labor
(running regress on estimation sample)

BRR replications (80)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..............................

Survey: Linear regression                     Number of obs     =    4,954,499
                                              Population size   =  508,197,095
                                              Replications      =           80
                                              Design df         =           79
                                              F(  12,     68)   =     34530.52
                                              Prob > F          =       0.0000
                                              R-squared         =       0.1577

------------------------------------------------------------------------------
             |                BRR *
redi_dV_hi~7 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      dB_fem |  -5576.426    74.9076   -74.44   0.000    -5725.525   -5427.326
   dB_rblack |  -17127.33   176.2507   -97.18   0.000    -17478.15   -16776.51
   dB_rasian |   10072.56    328.225    30.69   0.000     9419.247    10725.88
    dB_rhisp |  -10751.34   160.9771   -66.79   0.000    -11071.76   -10430.93
   dB_rother |  -3099.278   376.2976    -8.24   0.000     -3848.28   -2350.277
   dB_edu_HS |  -3172.399   159.1288   -19.94   0.000    -3489.136   -2855.661
 dB_edu_sCol |   6592.634   164.3416    40.12   0.000      6265.52    6919.748
  dB_edu_col |   35544.26   204.9109   173.46   0.000      35136.4    35952.13
 dB_edu_grad |   56217.77   217.5582   258.40   0.000     55784.73    56650.81
     married |    18612.2   98.93827   188.12   0.000     18415.27    18809.13
  disability |  -18330.28   159.4247  -114.98   0.000    -18647.61   -18012.95
       labor |   37610.32   94.98649   395.95   0.000     37421.26    37799.39
       _cons |   50758.34    197.182   257.42   0.000     50365.86    51150.82
------------------------------------------------------------------------------

. 
. 
. /* currently do the following using state subsets instead
> ***--------------------------***
> // REGRESSION: REDI Income as IV: Predict Migration
> ***--------------------------***        
> 
> di in red "Predict migration as function of ln(REDI-created income), " ///
>                   "gender, race/ethnicity, education, married, disability"
> svy: logistic migrate ///
>         redi_dV_lnhinc_shp_`conv_year' /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison category
>         married disability // 
> 
> 
> di in red "Predict migration as function of ln(REDI-created income), add home ownership"
> svy: logistic migrate ///
>         redi_dV_lnhinc_shp_`conv_year' /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison category
>         married disability ownhouse //
> 
> 
> 
> ***--------------------------***
> // REGRESSION: ACS Income as IV (Artificial Categorical Income): Predict Migration
> ***--------------------------***        
> 
> *use $deriv/redi12_REDI_regressions-hinc_shp.dta, clear
> 
> fvset base 1 acs_hinc_shp       
> 
> di in red "Predict migration as function of ACS artificial categorical income, "  ///
>                   " gender, race/ethnicity, education, married, disability"             
> svy: logistic migrate ///
>         i.acs_hinc_shp /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison category
>         married disability
> 
> di in red "Predict migration as function of ACS artificial categorical income, "  ///
>                   " add home ownership"         
> svy: logistic migrate ///
>         i.acs_hinc_shp /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison category
>         married disability ownhouse //
> 
>         
> */
. ***-----
. // Check if systematically different values between REDI and ACS Research Dataset
. 
. 
. 
. *inflation-adjusted
. table dB_fem,   c(mean redi_dV_hinc_shp_2017    mean acs_hinc_shp_2017)

------------------------------------------
Responden |
t's sex   |
(=1 if    |
female)   | mean(red~2017)  mean(acs~2017)
----------+-------------------------------
   0_Male |         96,562          101110
 1_Female |         90,769          94,849
------------------------------------------

. table dG_race,  c(mean redi_dV_hinc_shp_2017    mean acs_hinc_shp_2017)

--------------------------------------------
Categorical |
race        |
variable    | mean(red~2017)  mean(acs~2017)
------------+-------------------------------
      White |         99,217          104428
      Black |         66,358          66,991
      Asian |         121831          128900
   Hispanic |         75,746          77,180
Other/mixed |         87,221          91,496
--------------------------------------------

. table dG_edu,   c(mean redi_dV_hinc_shp_2017    mean acs_hinc_shp_2017)

---------------------------------------------
Categorical  |
education    |
variable     | mean(red~2017)  mean(acs~2017)
-------------+-------------------------------
        < HS |         86,582          91,086
          HS |         72,901          74,004
some college |         86,160          87,733
     college |         121782          128335
 grad school |         146018          161035
---------------------------------------------

. 
. 
.  
. ***--------------------------***
. // CLEAN UP
. ***--------------------------***
. 
. capture log close redi12_REDI_regressions
