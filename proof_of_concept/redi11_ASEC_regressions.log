--------------------------------------------------------------------------------
      name:  redi11_ASEC_regressions
       log:  /Users/mmking/Documents/SocResearch/redi/redi_code/redi11_ASEC_regr
> essions.log
  log type:  text
 opened on:  11 May 2022, 14:07:05

.
. //      project:        REDI Methods Paper
.
. //  task:       Regression of continuous CPS ASEC variables
. //  data:       CPS ASEC from IPUMS, available: https://cps.ipums.org/
.
. //  github:     redi
. //  OSF:                https://osf.io/qmhe8/
.
. //  author:     Molly King
.
. display "$S_DATE  $S_TIME"
11 May 2022  14:07:05

.
. ***--------------------------***
. // # PROGRAM SETUP
. ***--------------------------***
.
. version 16 // keeps program consistent for future replications

. set linesize 80

. clear all

. set more off

. set seed 1

.
. local conv_year = 2017 // this is set in redi01_CPI-U-RS.do

.
. do $redi/cps_00015.do // larger data set includes variables for later regressi
> on

. * NOTE: You need to set the Stata working directory to the path
. * where the data file is located.
.
. set more off

.
. clear

. quietly infix                ///
>   int     year      1-4      ///
>   long    serial    5-9      ///
>   byte    month     10-11    ///
>   double  cpsid     12-25    ///
>   byte    asecflag  26-26    ///
>   double  asecwth   27-36    ///
>   byte    statefip  37-38    ///
>   long    county    39-43    ///
>   byte    ownershp  44-45    ///
>   double  hhincome  46-53    ///
>   byte    pernum    54-55    ///
>   double  cpsidp    56-69    ///
>   double  asecwt    70-79    ///
>   byte    age       80-81    ///
>   byte    sex       82-82    ///
>   int     race      83-85    ///
>   byte    marst     86-86    ///
>   byte    nchild    87-87    ///
>   int     hispan    88-90    ///
>   byte    labforce  91-91    ///
>   int     educ      92-94    ///
>   byte    diffmob   95-95    ///
>   byte    whymove   96-97    ///
>   byte    migrate1  98-98    ///
>   byte    health    99-99    ///
>   byte    union     100-100  ///
>   using `"cps_00015.dat"'

.
. replace asecwth  = asecwth  / 10000
(551,502 real changes made)

. replace asecwt   = asecwt   / 10000
(551,502 real changes made)

.
. format cpsid    %14.0f

. format asecwth  %10.4f

. format hhincome %8.0f

. format cpsidp   %14.0f

. format asecwt   %10.4f

.
. label var year     `"Survey year"'

. label var serial   `"Household serial number"'

. label var month    `"Month"'

. label var cpsid    `"CPSID, household record"'

. label var asecflag `"Flag for ASEC"'

. label var asecwth  `"Annual Social and Economic Supplement Household weight"'

. label var statefip `"State (FIPS code)"'

. label var county   `"FIPS county code"'

. label var ownershp `"Ownership of dwelling"'

. label var hhincome `"Total household income"'

. label var pernum   `"Person number in sample unit"'

. label var cpsidp   `"CPSID, person record"'

. label var asecwt   `"Annual Social and Economic Supplement Weight"'

. label var age      `"Age"'

. label var sex      `"Sex"'

. label var race     `"Race"'

. label var marst    `"Marital status"'

. label var nchild   `"Number of own children in household"'

. label var hispan   `"Hispanic origin"'

. label var labforce `"Labor force status"'

. label var educ     `"Educational attainment recode"'

. label var diffmob  `"Disability limiting mobility"'

. label var whymove  `"Reason for moving"'

. label var migrate1 `"Migration status, 1 year"'

. label var health   `"Health status"'

. label var union    `"Union membership"'

.
. label define month_lbl 01 `"January"'

. label define month_lbl 02 `"February"', add

. label define month_lbl 03 `"March"', add

. label define month_lbl 04 `"April"', add

. label define month_lbl 05 `"May"', add

. label define month_lbl 06 `"June"', add

. label define month_lbl 07 `"July"', add

. label define month_lbl 08 `"August"', add

. label define month_lbl 09 `"September"', add

. label define month_lbl 10 `"October"', add

. label define month_lbl 11 `"November"', add

. label define month_lbl 12 `"December"', add

. label values month month_lbl

.
. label define asecflag_lbl 1 `"ASEC"'

. label define asecflag_lbl 2 `"March Basic"', add

. label values asecflag asecflag_lbl

.
. label define statefip_lbl 01 `"Alabama"'

. label define statefip_lbl 02 `"Alaska"', add

. label define statefip_lbl 04 `"Arizona"', add

. label define statefip_lbl 05 `"Arkansas"', add

. label define statefip_lbl 06 `"California"', add

. label define statefip_lbl 08 `"Colorado"', add

. label define statefip_lbl 09 `"Connecticut"', add

. label define statefip_lbl 10 `"Delaware"', add

. label define statefip_lbl 11 `"District of Columbia"', add

. label define statefip_lbl 12 `"Florida"', add

. label define statefip_lbl 13 `"Georgia"', add

. label define statefip_lbl 15 `"Hawaii"', add

. label define statefip_lbl 16 `"Idaho"', add

. label define statefip_lbl 17 `"Illinois"', add

. label define statefip_lbl 18 `"Indiana"', add

. label define statefip_lbl 19 `"Iowa"', add

. label define statefip_lbl 20 `"Kansas"', add

. label define statefip_lbl 21 `"Kentucky"', add

. label define statefip_lbl 22 `"Louisiana"', add

. label define statefip_lbl 23 `"Maine"', add

. label define statefip_lbl 24 `"Maryland"', add

. label define statefip_lbl 25 `"Massachusetts"', add

. label define statefip_lbl 26 `"Michigan"', add

. label define statefip_lbl 27 `"Minnesota"', add

. label define statefip_lbl 28 `"Mississippi"', add

. label define statefip_lbl 29 `"Missouri"', add

. label define statefip_lbl 30 `"Montana"', add

. label define statefip_lbl 31 `"Nebraska"', add

. label define statefip_lbl 32 `"Nevada"', add

. label define statefip_lbl 33 `"New Hampshire"', add

. label define statefip_lbl 34 `"New Jersey"', add

. label define statefip_lbl 35 `"New Mexico"', add

. label define statefip_lbl 36 `"New York"', add

. label define statefip_lbl 37 `"North Carolina"', add

. label define statefip_lbl 38 `"North Dakota"', add

. label define statefip_lbl 39 `"Ohio"', add

. label define statefip_lbl 40 `"Oklahoma"', add

. label define statefip_lbl 41 `"Oregon"', add

. label define statefip_lbl 42 `"Pennsylvania"', add

. label define statefip_lbl 44 `"Rhode Island"', add

. label define statefip_lbl 45 `"South Carolina"', add

. label define statefip_lbl 46 `"South Dakota"', add

. label define statefip_lbl 47 `"Tennessee"', add

. label define statefip_lbl 48 `"Texas"', add

. label define statefip_lbl 49 `"Utah"', add

. label define statefip_lbl 50 `"Vermont"', add

. label define statefip_lbl 51 `"Virginia"', add

. label define statefip_lbl 53 `"Washington"', add

. label define statefip_lbl 54 `"West Virginia"', add

. label define statefip_lbl 55 `"Wisconsin"', add

. label define statefip_lbl 56 `"Wyoming"', add

. label define statefip_lbl 61 `"Maine-New Hampshire-Vermont"', add

. label define statefip_lbl 65 `"Montana-Idaho-Wyoming"', add

. label define statefip_lbl 68 `"Alaska-Hawaii"', add

. label define statefip_lbl 69 `"Nebraska-North Dakota-South Dakota"', add

. label define statefip_lbl 70 `"Maine-Massachusetts-New Hampshire-Rhode Island-
> Vermont"', add

. label define statefip_lbl 71 `"Michigan-Wisconsin"', add

. label define statefip_lbl 72 `"Minnesota-Iowa"', add

. label define statefip_lbl 73 `"Nebraska-North Dakota-South Dakota-Kansas"', ad
> d

. label define statefip_lbl 74 `"Delaware-Virginia"', add

. label define statefip_lbl 75 `"North Carolina-South Carolina"', add

. label define statefip_lbl 76 `"Alabama-Mississippi"', add

. label define statefip_lbl 77 `"Arkansas-Oklahoma"', add

. label define statefip_lbl 78 `"Arizona-New Mexico-Colorado"', add

. label define statefip_lbl 79 `"Idaho-Wyoming-Utah-Montana-Nevada"', add

. label define statefip_lbl 80 `"Alaska-Washington-Hawaii"', add

. label define statefip_lbl 81 `"New Hampshire-Maine-Vermont-Rhode Island"', add

. label define statefip_lbl 83 `"South Carolina-Georgia"', add

. label define statefip_lbl 84 `"Kentucky-Tennessee"', add

. label define statefip_lbl 85 `"Arkansas-Louisiana-Oklahoma"', add

. label define statefip_lbl 87 `"Iowa-N Dakota-S Dakota-Nebraska-Kansas-Minnesot
> a-Missouri"', add

. label define statefip_lbl 88 `"Washington-Oregon-Alaska-Hawaii"', add

. label define statefip_lbl 89 `"Montana-Wyoming-Colorado-New Mexico-Utah-Nevada
> -Arizona"', add

. label define statefip_lbl 90 `"Delaware-Maryland-Virginia-West Virginia"', add

. label define statefip_lbl 99 `"State not identified"', add

. label values statefip statefip_lbl

.
. label define ownershp_lbl 00 `"NIU"'

. label define ownershp_lbl 10 `"Owned or being bought"', add

. label define ownershp_lbl 21 `"No cash rent"', add

. label define ownershp_lbl 22 `"With cash rent"', add

. label values ownershp ownershp_lbl

.
. label define age_lbl 00 `"Under 1 year"'

. label define age_lbl 01 `"1"', add

. label define age_lbl 02 `"2"', add

. label define age_lbl 03 `"3"', add

. label define age_lbl 04 `"4"', add

. label define age_lbl 05 `"5"', add

. label define age_lbl 06 `"6"', add

. label define age_lbl 07 `"7"', add

. label define age_lbl 08 `"8"', add

. label define age_lbl 09 `"9"', add

. label define age_lbl 10 `"10"', add

. label define age_lbl 11 `"11"', add

. label define age_lbl 12 `"12"', add

. label define age_lbl 13 `"13"', add

. label define age_lbl 14 `"14"', add

. label define age_lbl 15 `"15"', add

. label define age_lbl 16 `"16"', add

. label define age_lbl 17 `"17"', add

. label define age_lbl 18 `"18"', add

. label define age_lbl 19 `"19"', add

. label define age_lbl 20 `"20"', add

. label define age_lbl 21 `"21"', add

. label define age_lbl 22 `"22"', add

. label define age_lbl 23 `"23"', add

. label define age_lbl 24 `"24"', add

. label define age_lbl 25 `"25"', add

. label define age_lbl 26 `"26"', add

. label define age_lbl 27 `"27"', add

. label define age_lbl 28 `"28"', add

. label define age_lbl 29 `"29"', add

. label define age_lbl 30 `"30"', add

. label define age_lbl 31 `"31"', add

. label define age_lbl 32 `"32"', add

. label define age_lbl 33 `"33"', add

. label define age_lbl 34 `"34"', add

. label define age_lbl 35 `"35"', add

. label define age_lbl 36 `"36"', add

. label define age_lbl 37 `"37"', add

. label define age_lbl 38 `"38"', add

. label define age_lbl 39 `"39"', add

. label define age_lbl 40 `"40"', add

. label define age_lbl 41 `"41"', add

. label define age_lbl 42 `"42"', add

. label define age_lbl 43 `"43"', add

. label define age_lbl 44 `"44"', add

. label define age_lbl 45 `"45"', add

. label define age_lbl 46 `"46"', add

. label define age_lbl 47 `"47"', add

. label define age_lbl 48 `"48"', add

. label define age_lbl 49 `"49"', add

. label define age_lbl 50 `"50"', add

. label define age_lbl 51 `"51"', add

. label define age_lbl 52 `"52"', add

. label define age_lbl 53 `"53"', add

. label define age_lbl 54 `"54"', add

. label define age_lbl 55 `"55"', add

. label define age_lbl 56 `"56"', add

. label define age_lbl 57 `"57"', add

. label define age_lbl 58 `"58"', add

. label define age_lbl 59 `"59"', add

. label define age_lbl 60 `"60"', add

. label define age_lbl 61 `"61"', add

. label define age_lbl 62 `"62"', add

. label define age_lbl 63 `"63"', add

. label define age_lbl 64 `"64"', add

. label define age_lbl 65 `"65"', add

. label define age_lbl 66 `"66"', add

. label define age_lbl 67 `"67"', add

. label define age_lbl 68 `"68"', add

. label define age_lbl 69 `"69"', add

. label define age_lbl 70 `"70"', add

. label define age_lbl 71 `"71"', add

. label define age_lbl 72 `"72"', add

. label define age_lbl 73 `"73"', add

. label define age_lbl 74 `"74"', add

. label define age_lbl 75 `"75"', add

. label define age_lbl 76 `"76"', add

. label define age_lbl 77 `"77"', add

. label define age_lbl 78 `"78"', add

. label define age_lbl 79 `"79"', add

. label define age_lbl 80 `"80"', add

. label define age_lbl 81 `"81"', add

. label define age_lbl 82 `"82"', add

. label define age_lbl 83 `"83"', add

. label define age_lbl 84 `"84"', add

. label define age_lbl 85 `"85"', add

. label define age_lbl 86 `"86"', add

. label define age_lbl 87 `"87"', add

. label define age_lbl 88 `"88"', add

. label define age_lbl 89 `"89"', add

. label define age_lbl 90 `"90 (90+, 1988-2002)"', add

. label define age_lbl 91 `"91"', add

. label define age_lbl 92 `"92"', add

. label define age_lbl 93 `"93"', add

. label define age_lbl 94 `"94"', add

. label define age_lbl 95 `"95"', add

. label define age_lbl 96 `"96"', add

. label define age_lbl 97 `"97"', add

. label define age_lbl 98 `"98"', add

. label define age_lbl 99 `"99+"', add

. label values age age_lbl

.
. label define sex_lbl 1 `"Male"'

. label define sex_lbl 2 `"Female"', add

. label define sex_lbl 9 `"NIU"', add

. label values sex sex_lbl

.
. label define race_lbl 100 `"White"'

. label define race_lbl 200 `"Black/Negro"', add

. label define race_lbl 300 `"American Indian/Aleut/Eskimo"', add

. label define race_lbl 650 `"Asian or Pacific Islander"', add

. label define race_lbl 651 `"Asian only"', add

. label define race_lbl 652 `"Hawaiian/Pacific Islander only"', add

. label define race_lbl 700 `"Other (single) race, n.e.c."', add

. label define race_lbl 801 `"White-Black"', add

. label define race_lbl 802 `"White-American Indian"', add

. label define race_lbl 803 `"White-Asian"', add

. label define race_lbl 804 `"White-Hawaiian/Pacific Islander"', add

. label define race_lbl 805 `"Black-American Indian"', add

. label define race_lbl 806 `"Black-Asian"', add

. label define race_lbl 807 `"Black-Hawaiian/Pacific Islander"', add

. label define race_lbl 808 `"American Indian-Asian"', add

. label define race_lbl 809 `"Asian-Hawaiian/Pacific Islander"', add

. label define race_lbl 810 `"White-Black-American Indian"', add

. label define race_lbl 811 `"White-Black-Asian"', add

. label define race_lbl 812 `"White-American Indian-Asian"', add

. label define race_lbl 813 `"White-Asian-Hawaiian/Pacific Islander"', add

. label define race_lbl 814 `"White-Black-American Indian-Asian"', add

. label define race_lbl 815 `"American Indian-Hawaiian/Pacific Islander"', add

. label define race_lbl 816 `"White-Black--Hawaiian/Pacific Islander"', add

. label define race_lbl 817 `"White-American Indian-Hawaiian/Pacific Islander"',
>  add

. label define race_lbl 818 `"Black-American Indian-Asian"', add

. label define race_lbl 819 `"White-American Indian-Asian-Hawaiian/Pacific Islan
> der"', add

. label define race_lbl 820 `"Two or three races, unspecified"', add

. label define race_lbl 830 `"Four or five races, unspecified"', add

. label define race_lbl 999 `"Blank"', add

. label values race race_lbl

.
. label define marst_lbl 1 `"Married, spouse present"'

. label define marst_lbl 2 `"Married, spouse absent"', add

. label define marst_lbl 3 `"Separated"', add

. label define marst_lbl 4 `"Divorced"', add

. label define marst_lbl 5 `"Widowed"', add

. label define marst_lbl 6 `"Never married/single"', add

. label define marst_lbl 7 `"Widowed or Divorced"', add

. label define marst_lbl 9 `"NIU"', add

. label values marst marst_lbl

.
. label define nchild_lbl 0 `"0 children present"'

. label define nchild_lbl 1 `"1 child present"', add

. label define nchild_lbl 2 `"2"', add

. label define nchild_lbl 3 `"3"', add

. label define nchild_lbl 4 `"4"', add

. label define nchild_lbl 5 `"5"', add

. label define nchild_lbl 6 `"6"', add

. label define nchild_lbl 7 `"7"', add

. label define nchild_lbl 8 `"8"', add

. label define nchild_lbl 9 `"9+"', add

. label values nchild nchild_lbl

.
. label define hispan_lbl 000 `"Not Hispanic"'

. label define hispan_lbl 100 `"Mexican"', add

. label define hispan_lbl 102 `"Mexican American"', add

. label define hispan_lbl 103 `"Mexicano/Mexicana"', add

. label define hispan_lbl 104 `"Chicano/Chicana"', add

. label define hispan_lbl 108 `"Mexican (Mexicano)"', add

. label define hispan_lbl 109 `"Mexicano/Chicano"', add

. label define hispan_lbl 200 `"Puerto Rican"', add

. label define hispan_lbl 300 `"Cuban"', add

. label define hispan_lbl 400 `"Dominican"', add

. label define hispan_lbl 500 `"Salvadoran"', add

. label define hispan_lbl 600 `"Other Hispanic"', add

. label define hispan_lbl 610 `"Central/South American"', add

. label define hispan_lbl 611 `"Central American, (excluding Salvadoran)"', add

. label define hispan_lbl 612 `"South American"', add

. label define hispan_lbl 901 `"Do not know"', add

. label define hispan_lbl 902 `"N/A (and no response 1985-87)"', add

. label values hispan hispan_lbl

.
. label define labforce_lbl 0 `"NIU"'

. label define labforce_lbl 1 `"No, not in the labor force"', add

. label define labforce_lbl 2 `"Yes, in the labor force"', add

. label values labforce labforce_lbl

.
. label define educ_lbl 000 `"NIU or no schooling"'

. label define educ_lbl 001 `"NIU or blank"', add

. label define educ_lbl 002 `"None or preschool"', add

. label define educ_lbl 010 `"Grades 1, 2, 3, or 4"', add

. label define educ_lbl 011 `"Grade 1"', add

. label define educ_lbl 012 `"Grade 2"', add

. label define educ_lbl 013 `"Grade 3"', add

. label define educ_lbl 014 `"Grade 4"', add

. label define educ_lbl 020 `"Grades 5 or 6"', add

. label define educ_lbl 021 `"Grade 5"', add

. label define educ_lbl 022 `"Grade 6"', add

. label define educ_lbl 030 `"Grades 7 or 8"', add

. label define educ_lbl 031 `"Grade 7"', add

. label define educ_lbl 032 `"Grade 8"', add

. label define educ_lbl 040 `"Grade 9"', add

. label define educ_lbl 050 `"Grade 10"', add

. label define educ_lbl 060 `"Grade 11"', add

. label define educ_lbl 070 `"Grade 12"', add

. label define educ_lbl 071 `"12th grade, no diploma"', add

. label define educ_lbl 072 `"12th grade, diploma unclear"', add

. label define educ_lbl 073 `"High school diploma or equivalent"', add

. label define educ_lbl 080 `"1 year of college"', add

. label define educ_lbl 081 `"Some college but no degree"', add

. label define educ_lbl 090 `"2 years of college"', add

. label define educ_lbl 091 `"Associate's degree, occupational/vocational progra
> m"', add

. label define educ_lbl 092 `"Associate's degree, academic program"', add

. label define educ_lbl 100 `"3 years of college"', add

. label define educ_lbl 110 `"4 years of college"', add

. label define educ_lbl 111 `"Bachelor's degree"', add

. label define educ_lbl 120 `"5+ years of college"', add

. label define educ_lbl 121 `"5 years of college"', add

. label define educ_lbl 122 `"6+ years of college"', add

. label define educ_lbl 123 `"Master's degree"', add

. label define educ_lbl 124 `"Professional school degree"', add

. label define educ_lbl 125 `"Doctorate degree"', add

. label define educ_lbl 999 `"Missing/Unknown"', add

. label values educ educ_lbl

.
. label define diffmob_lbl 0 `"NIU"'

. label define diffmob_lbl 1 `"No mobility limitation"', add

. label define diffmob_lbl 2 `"Has mobility limitation"', add

. label values diffmob diffmob_lbl

.
. label define whymove_lbl 00 `"NIU"'

. label define whymove_lbl 01 `"Change in marital status"', add

. label define whymove_lbl 02 `"To establish own household"', add

. label define whymove_lbl 03 `"Other family reason"', add

. label define whymove_lbl 04 `"New job or job transfer"', add

. label define whymove_lbl 05 `"To look for work or lost job"', add

. label define whymove_lbl 06 `"For easier commute"', add

. label define whymove_lbl 07 `"Retired"', add

. label define whymove_lbl 08 `"Other job-related reason"', add

. label define whymove_lbl 09 `"Wanted to own home, not rent"', add

. label define whymove_lbl 10 `"Wanted new or better housing"', add

. label define whymove_lbl 11 `"Wanted better neighborhood"', add

. label define whymove_lbl 12 `"For cheaper housing"', add

. label define whymove_lbl 13 `"Other housing reason"', add

. label define whymove_lbl 14 `"Attend/leave college"', add

. label define whymove_lbl 15 `"Change of climate"', add

. label define whymove_lbl 16 `"Health reasons"', add

. label define whymove_lbl 17 `"Other reasons"', add

. label define whymove_lbl 18 `"Natural disaster"', add

. label define whymove_lbl 19 `"Foreclosure or eviction"', add

. label define whymove_lbl 20 `"Relationship with unmarried partner"', add

. label values whymove whymove_lbl

.
. label define migrate1_lbl 0 `"NIU"'

. label define migrate1_lbl 1 `"Same house"', add

. label define migrate1_lbl 2 `"Different house, place not reported"', add

. label define migrate1_lbl 3 `"Moved within county"', add

. label define migrate1_lbl 4 `"Moved within state, different county"', add

. label define migrate1_lbl 5 `"Moved between states"', add

. label define migrate1_lbl 6 `"Abroad"', add

. label define migrate1_lbl 9 `"Unknown"', add

. label values migrate1 migrate1_lbl

.
. label define health_lbl 1 `"Excellent"'

. label define health_lbl 2 `"Very good"', add

. label define health_lbl 3 `"Good"', add

. label define health_lbl 4 `"Fair"', add

. label define health_lbl 5 `"Poor"', add

. label values health health_lbl

.
. label define union_lbl 0 `"NIU"'

. label define union_lbl 1 `"No union coverage"', add

. label define union_lbl 2 `"Member of labor union"', add

. label define union_lbl 3 `"Covered by union but not a member"', add

. label values union union_lbl

.
.
.
end of do-file

.
. keep if pernum == 1
(343,716 observations deleted)

. svyset [pweight=asecwth]

      pweight: asecwth
          VCE: linearized
  Single unit: missing
     Strata 1: <one>
         SU 1: <observations>
        FPC 1: <zero>

. compress
  variable hhincome was double now long
  (831,144 bytes saved)

.
. // RENAME to avoid confusion with ACS
. rename hhincome asec_hinc_cont

. rename race race_asec

. rename hispan hispan_asec

. rename educ educ_asec

. rename sex sex_asec

. rename marst marst_asec

. rename migrate1  migrate1_asec

. rename diffmob diffmob_asec

. rename ownershp ownershp_asec

.
. ***--------------------------***
. // # CREATE SHARP CATEGORY BOUNDS - HOUSEHOLD
. ***--------------------------***
.
. label define  cat_inc                                   ///
>         1       "Less than $15000"                              ///
>         2       "15000 to less than 25000"              ///
>         3       "25000 to less than 35000"              ///
>         4       "35000 to less than 50000"              ///
>         5       "50000 to less than 75000"              ///
>         6       "75000 to less than 100000"     ///
>         7       "100000 to less than 150000"    ///
>         8       "150000 to less than 200000"    ///
>         9       "200000 or more"                                //

.
. *arbitrary categories invented to demonstrate flexibility of method
. gen     asec_hinc_shp = .
(207,786 missing values generated)

. replace asec_hinc_shp = 1 if asec_hinc_cont     <= 15000
(23,435 real changes made)

. replace asec_hinc_shp = 2 if asec_hinc_cont  > 15000    & asec_hinc_cont <= 25
> 000
(19,886 real changes made)

. replace asec_hinc_shp = 3 if asec_hinc_cont  > 25000    & asec_hinc_cont <= 35
> 000
(19,143 real changes made)

. replace asec_hinc_shp = 4 if asec_hinc_cont  > 35000    & asec_hinc_cont <= 50
> 000
(25,839 real changes made)

. replace asec_hinc_shp = 5 if asec_hinc_cont  > 50000    & asec_hinc_cont <= 75
> 000
(34,703 real changes made)

. replace asec_hinc_shp = 6 if asec_hinc_cont  > 75000    & asec_hinc_cont <= 10
> 0000
(25,725 real changes made)

. replace asec_hinc_shp = 7 if asec_hinc_cont  > 100000   & asec_hinc_cont <= 15
> 0000
(30,599 real changes made)

. replace asec_hinc_shp = 8 if asec_hinc_cont  > 150000   & asec_hinc_cont <= 20
> 0000
(13,834 real changes made)

. replace asec_hinc_shp = 9 if asec_hinc_cont  > 200000   & asec_hinc_cont != 99
> 99999
(14,622 real changes made)

. replace asec_hinc_shp = . if asec_hinc_cont == 9999999
(0 real changes made)

. replace asec_hinc_shp = . if asec_hinc_cont == .
(0 real changes made)

.
. label values asec_hinc_shp cat_inc

.
. tab asec_hinc_shp, m

             asec_hinc_shp |      Freq.     Percent        Cum.
---------------------------+-----------------------------------
          Less than $15000 |     23,435       11.28       11.28
  15000 to less than 25000 |     19,886        9.57       20.85
  25000 to less than 35000 |     19,143        9.21       30.06
  35000 to less than 50000 |     25,839       12.44       42.50
  50000 to less than 75000 |     34,703       16.70       59.20
 75000 to less than 100000 |     25,725       12.38       71.58
100000 to less than 150000 |     30,599       14.73       86.31
150000 to less than 200000 |     13,834        6.66       92.96
            200000 or more |     14,622        7.04      100.00
---------------------------+-----------------------------------
                     Total |    207,786      100.00

. tab asec_hinc_shp, m nolab

asec_hinc_s |
         hp |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     23,435       11.28       11.28
          2 |     19,886        9.57       20.85
          3 |     19,143        9.21       30.06
          4 |     25,839       12.44       42.50
          5 |     34,703       16.70       59.20
          6 |     25,725       12.38       71.58
          7 |     30,599       14.73       86.31
          8 |     13,834        6.66       92.96
          9 |     14,622        7.04      100.00
------------+-----------------------------------
      Total |    207,786      100.00

.
. * SAVE SHARP INCOME VARIABLE
. label var asec_hinc_shp "household Income (ASEC) sharp categories based on ase
> c_hinc_cont"

. notes asec_hinc_shp: ASEC household Income Sharp Categories from asec_hinc_con
> t \  mmk $S_DATE

.
. ***--------------------------***
. // # COUNT NUMBER OF CASES IN EACH BIN
. ***--------------------------***
.
. * COUNT BY SHARP BINS
. gen id = _n

. egen asec_hinc_shp_n = count(id), by(asec_hinc_shp year)

. label var asec_hinc_shp_n "Count of cases of household Income (ASEC) sharp wit
> hin year (count of asec_hinc_shp by year)"
note: label truncated to 80 characters

.
. label data "CPS ASEC data - Household Income - 2016, 2017, 2019"

. notes: redi01_ASEC-hhincome_all.dta \ CPS ASEC Data - Household Income 2016-20
> 17, 2019 \ redi01_ASEC.do

. datasignature set, reset
  207786:29(75047):326062879:72786210       (data signature set)

. save $deriv/redi11_ASEC_regressions-hinc_shp.dta, replace
file ~/Documents/SocResearch/Dissertation/data/data_derv/redi11_ASEC_regressions
> -hinc_shp.dta saved

.
. ***--------------------------***
. // INFLATION
. ***--------------------------***
.
. local y = year

.
. merge m:1 year using $deriv/redi01_CPI-U-RS.dta

    Result                           # of obs.
    -----------------------------------------
    not matched                        68,384
        from master                    68,345  (_merge==1)
        from using                         39  (_merge==2)

    matched                           139,441  (_merge==3)
    -----------------------------------------

. keep if _merge == 3 // keep only matches - not matched where different years
(68,384 observations deleted)

. drop _merge

. svyset [iweight=asecwth]

      iweight: asecwth
          VCE: linearized
  Single unit: missing
     Strata 1: <one>
         SU 1: <observations>
        FPC 1: <zero>

.
. *original income variable, adjusted for inflation
. gen asec_hinc_shp_`conv_year' = asec_hinc_cont / conv_factor

. format asec_hinc_shp_`conv_year' %6.0fc

. label var asec_hinc_shp_`conv_year' "Inflation-adjusted household income (ASEC
> ), from shp categories, `conv_year' dollars"

.
. ***--------------------------***
. // # CREATE NATURAL LOG INCOME VARIABLES
. ***--------------------------***
.
. gen asec_lnhinc_shp_`conv_year' = ln(asec_hinc_shp_`conv_year')
(2,046 missing values generated)

.
. label var asec_hinc_shp_`conv_year' "Inflation-adjusted natural log household
> income (ASEC), from shp categories, `conv_year' dollars"
note: label truncated to 80 characters

.
.
. ***--------------------------***
. // SAVE
. ***--------------------------***
.
. save $deriv/redi11_ASEC_regressions-hinc_shp.dta, replace
file ~/Documents/SocResearch/Dissertation/data/data_derv/redi11_ASEC_regressions
> -hinc_shp.dta saved

.
. ***--------------------------***
. // DEMOGRAPHICS needed for REGRESSION
. ***--------------------------***
.
. // #1 GENDER
.
. local gender_var sex_asec // gender variable in ASEC is "sex"

. tab `gender_var', m

        Sex |      Freq.     Percent        Cum.
------------+-----------------------------------
       Male |     69,958       50.17       50.17
     Female |     69,483       49.83      100.00
------------+-----------------------------------
      Total |    139,441      100.00

. tab `gender_var', nolab m

        Sex |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     69,958       50.17       50.17
          2 |     69,483       49.83      100.00
------------+-----------------------------------
      Total |    139,441      100.00

.
. include $redi/redi11a_include_female_from2W_1M.doi

. *! include file to convert gender variable
. *! Produces gender dummy bariable from woman=2-->fem=1; man=1-->man=0
. *! version 1.1 \ molly king 2017-03-29
.
. gen dB_fem = .
(139,441 missing values generated)

.         replace dB_fem = 1 if `gender_var' == 2
(69,483 real changes made)

.         replace dB_fem = 0 if `gender_var' == 1
(69,958 real changes made)

.
. label var dB_fem "Respondent's sex (=1 if female)"

. label define dB_fem 0 "0_Male" 1 "1_Female"

.         label val dB_fem dB_fem

.
. notes dB_fem: Created from `gender_var' in `data_using' \ `do_file'.do mmk $S_
> DATE

.
.
. ***--------------------------***
.
. // #2 RACE / ETHNICITY - with RACE variable only
.
. local race_var race_asec

. tab `race_var'

                                   Race |      Freq.     Percent        Cum.
----------------------------------------+-----------------------------------
                                  White |    107,157       76.85       76.85
                            Black/Negro |     19,392       13.91       90.75
           American Indian/Aleut/Eskimo |      2,163        1.55       92.31
                             Asian only |      7,577        5.43       97.74
         Hawaiian/Pacific Islander only |        617        0.44       98.18
                            White-Black |        495        0.35       98.54
                  White-American Indian |      1,148        0.82       99.36
                            White-Asian |        307        0.22       99.58
        White-Hawaiian/Pacific Islander |         98        0.07       99.65
                  Black-American Indian |        155        0.11       99.76
                            Black-Asian |         30        0.02       99.78
        Black-Hawaiian/Pacific Islander |         14        0.01       99.79
                  American Indian-Asian |          7        0.01       99.80
        Asian-Hawaiian/Pacific Islander |         90        0.06       99.86
            White-Black-American Indian |        107        0.08       99.94
                      White-Black-Asian |          7        0.01       99.94
            White-American Indian-Asian |          8        0.01       99.95
  White-Asian-Hawaiian/Pacific Islander |         44        0.03       99.98
      White-Black-American Indian-Asian |          2        0.00       99.98
American Indian-Hawaiian/Pacific Island |          2        0.00       99.98
White-American Indian-Hawaiian/Pacific  |          4        0.00       99.99
            Black-American Indian-Asian |          3        0.00       99.99
White-American Indian-Asian-Hawaiian/Pa |          3        0.00       99.99
        Two or three races, unspecified |          2        0.00       99.99
        Four or five races, unspecified |          9        0.01      100.00
----------------------------------------+-----------------------------------
                                  Total |    139,441      100.00

. tab `race_var', m nolab

       Race |      Freq.     Percent        Cum.
------------+-----------------------------------
        100 |    107,157       76.85       76.85
        200 |     19,392       13.91       90.75
        300 |      2,163        1.55       92.31
        651 |      7,577        5.43       97.74
        652 |        617        0.44       98.18
        801 |        495        0.35       98.54
        802 |      1,148        0.82       99.36
        803 |        307        0.22       99.58
        804 |         98        0.07       99.65
        805 |        155        0.11       99.76
        806 |         30        0.02       99.78
        807 |         14        0.01       99.79
        808 |          7        0.01       99.80
        809 |         90        0.06       99.86
        810 |        107        0.08       99.94
        811 |          7        0.01       99.94
        812 |          8        0.01       99.95
        813 |         44        0.03       99.98
        814 |          2        0.00       99.98
        815 |          2        0.00       99.98
        817 |          4        0.00       99.99
        818 |          3        0.00       99.99
        819 |          3        0.00       99.99
        820 |          2        0.00       99.99
        830 |          9        0.01      100.00
------------+-----------------------------------
      Total |    139,441      100.00

.
. gen hisp = .
(139,441 missing values generated)

. replace hisp = 1 if hispan_asec >=1
(22,253 real changes made)

. replace hisp = 0 if hispan_asec == 0
(117,188 real changes made)

.
. replace race_asec = 800 if race_asec >=800
(2,535 real changes made)

.
. local hisp_var hisp

.
. if "`hisp_var'" != "none" {
.         tab `hisp_var', m

       hisp |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    117,188       84.04       84.04
          1 |     22,253       15.96      100.00
------------+-----------------------------------
      Total |    139,441      100.00
.         tab `hisp_var', m nolab

       hisp |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    117,188       84.04       84.04
          1 |     22,253       15.96      100.00
------------+-----------------------------------
      Total |    139,441      100.00
.         tab `race_var' `hisp_var'

                      |         hisp
                 Race |         0          1 |     Total
----------------------+----------------------+----------
                White |    86,629     20,528 |   107,157
          Black/Negro |    18,739        653 |    19,392
American Indian/Aleut |     1,727        436 |     2,163
           Asian only |     7,419        158 |     7,577
Hawaiian/Pacific Isla |       527         90 |       617
                  800 |     2,147        388 |     2,535
----------------------+----------------------+----------
                Total |   117,188     22,253 |   139,441
. }

.
. *don't know/refused code(s) for `race_var'
. local race_missing_condition none

.
. local white_race_value =        100

. local black_race_value =        200

. local asian_race_value =        651

. local hisp_value =                      1

. local other_race_value =        652

. local mult_race_value =         800

. local amerInd_race_value  = 300

.
. include $redi/redi11b_racethnicity.doi

. *! include file to label race/ethnicity variables
. *! version 1.0 \ molly king 2017-01-20
.
.   *compilation of originally individual include files that programmed each rac
> e/ethnicity separate
. ***--------------------------***
.
. // #1 GENERATE ALL VARIABLES, AND LABEL, ADD NOTES
.
. // White
.                 gen dB_rwhite = 0

.                 // Replace each with . for missing race if there is a race mis
> sing condition:
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rwhite = . if `race_var' == `race_m
> issing_condition' // don't know/refused
.                         }

.                 label var dB_rwhite "Non-Hispanic White race = 1"

.                         label define dB_rwhite 0 "0_NotWhite" 1 "1_White"

.                 label val dB_rwhite dB_rwhite

.                 notes dB_rwhite: White respondent race created from `race_var'
>  & `hisp_var' in `dataset' \ ki`category'`dataset'.do mmk $S_DATE

.
. // Black
.                 gen dB_rblack = 0

.                 // Replace each with . for missing race if there is a race mis
> sing condition:
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rblack = . if  `race_var' == `race_
> missing_condition' // don't know/refused
.                         }

.                 label var dB_rblack "Non-Hispanic Black/AfAmer race = 1"

.                 label define dB_rblack 0 "0_NotBlack" 1 "1_Black"

.                         label val dB_rblack dB_rblack

.                 notes dB_rblack: Black/AfAmer race created from `race_var' & `
> hisp_var' in `dataset' \ ki`category'`dataset'.do mmk $S_DATE

.
. // Asian
.         if "`asian_race_value'" != "none" {
.                 gen dB_rasian = 0
.                 // Replace each with . for missing race if there is a race mis
> sing condition:
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rasian = . if `race_var' == `race_m
> issing_condition'
.                         }
.                 label var dB_rasian "Non-Hispanic Asian race = 1"
.                 label define dB_rasian 0 "0_NotAsian" 1 "1_Asian"
.                         label val dB_rasian dB_rasian
.                 notes dB_rasian: Asian race created from `race_var' & `hisp_va
> r' in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
.         }

.
. // Hispanic
.         if "`hisp_value'" != "none" {
.                 gen dB_rhisp = 0
.                 // Replace each with . for missing race if there is a race mis
> sing condition:
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rhisp  = . if `race_var' == `race_m
> issing_condition'
.                         }
.                 label var dB_rhisp  "Hispanic ethnicity = 1"
.                 label define dB_rhisp  0 "0_NotHispanic" 1 "1_Hispanic"
.                         label val dB_rhisp dB_rhisp
.                 notes dB_rhisp: Hispanic ethnicity only created from `race_var
> ' & `hisp_var' in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
.         }

.
. // Other
.         if "`mult_race_value'" != "none" |  "`other_race_value'" != "none" |
> "`amerInd_race_value'" != "none" {
.                 gen dB_rother = 0
.                 // Replace each with . for missing race if there is a race mis
> sing condition:
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rother = . if `race_var' == `race_m
> issing_condition' // don't know/refused
.                         }
.                 label var dB_rother "Non-Hispanic Other, mixed race = 1"
.                 label define dB_rother 0 "0_NotOther" 1 "1_Mixed/OtherRace"
.                         label val dB_rother dB_rother
.                 notes dB_rother: Other, unknown, or mixed race created from `r
> ace_var' & `hisp_var' in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
.         }

.
.
. // All Categories
.         gen dG_race = .
(139,441 missing values generated)

.         label var dG_race "Categorical race variable"

.         label define race_5categ 1 "White" 2 "Black" 3 "Asian" 4 "Hispanic" 5
> "Other/mixed"

.                 label val dG_race race_5categ

.         notes dG_race: Race/ethnicity categorical variable, created from `race
> _var' & `hisp_var'  variable in `dataset' \ ki`category'`dataset'.do mmk $S_DA
> TE

.
.
. ***--------------------------***
.
. // #2 SEPARATE RACE AND HISPANIC VARIABLES
.
. if "`hisp_var'" != "none" {
.
. *White: dB_rwhite
.         if "`white_race_value'" != "none" {
.                 replace dB_rwhite = 1   if `race_var' == `white_race_value' &
> `hisp_var' != `hisp_value'
(86,629 real changes made)
.                 replace dG_race = 1     if `race_var' == `white_race_value' &
> `hisp_var' != `hisp_value'
(86,629 real changes made)
.         }
.
. *Black: dB_rblack
.         if "`black_race_value'" != "none" {
.                 replace dB_rblack = 1   if `race_var' == `black_race_value' &
> `hisp_var' != `hisp_value'
(18,739 real changes made)
.                 replace dG_race = 2     if `race_var' == `black_race_value' &
> `hisp_var' != `hisp_value'
(18,739 real changes made)
.         }
.
. *Asian: dB_rasian
.         if "`asian_race_value'" != "none" {
.                 replace dB_rasian = 1   if `race_var' == `asian_race_value' &
> `hisp_var' != `hisp_value'
(7,419 real changes made)
.                 replace dG_race = 3     if `race_var' == `asian_race_value' &
> `hisp_var' != `hisp_value'
(7,419 real changes made)
.         }
.
. *Other/mixed: dB_rother
.         if "`other_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `other_race_value' &
> `hisp_var' != `hisp_value'
(527 real changes made)
.                 replace dG_race = 5     if `race_var' == `other_race_value' &
> `hisp_var' != `hisp_value'
(527 real changes made)
.         }
.         if "`mult_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `mult_race_value' & `
> hisp_var' != `hisp_value'
(2,147 real changes made)
.                 replace dG_race = 5     if `race_var' == `mult_race_value' & `
> hisp_var' != `hisp_value'
(2,147 real changes made)
.         }
.         if "`amerInd_race_value'" != "none" {
.                  replace dB_rother = 1  if `race_var' == `amerInd_race_value'
> & `hisp_var' != `hisp_value'
(1,727 real changes made)
.                  replace dG_race = 5    if `race_var' == `amerInd_race_value'
> & `hisp_var' != `hisp_value'
(1,727 real changes made)
.         }
.
. *Hispanic: dB_rhisp
.                 replace dB_rhisp = 1    if `hisp_var' == `hisp_value'
(22,253 real changes made)
.                 replace dG_race = 4     if `hisp_var' == `hisp_value'
(22,253 real changes made)
. }

.
.
. ***--------------------------***
.
. // #3 with RACE variable only
.
. if "`hisp_var'" == "none" {
.
. *White: dB_rwhite
.         if "`white_race_value'" != "none" {
.                 replace dB_rwhite = 1   if `race_var' == `white_race_value'
.                 replace dG_race = 1     if `race_var' == `white_race_value'
.         }
.
. *Black: dB_rblack
.         if "`black_race_value'" != "none" {
.                 replace dB_rblack = 1   if `race_var' == `black_race_value'
.                 replace dG_race = 2     if `race_var' == `black_race_value'
.         }
.
. *Asian: dB_rasian
.         if "`asian_race_value'" != "none" {
.                 replace dB_rasian = 1   if `race_var' == `asian_race_value'
.                 replace dG_race = 3     if `race_var' == `asian_race_value'
.         }
.
. *Other/mixed: dB_rother
.         if "`other_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `other_race_value'
.                 replace dG_race = 5     if `race_var' == `other_race_value'
.         }
.         if "`mult_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `mult_race_value'
.                 replace dG_race = 5     if `race_var' == `mult_race_value'
.         }
.         if "`amerInd_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `amerInd_race_value'
.                 replace dG_race = 5     if `race_var' == `amerInd_race_value'
.         }
.
. *Hispanic: dB_rhisp
.         if "`hisp_value'" != "none" {
.                 replace dB_rhisp = 1    if `race_var' == `hisp_value'
.                 replace dG_race = 4     if `race_var' == `hisp_value'
.         }
. }

.
. ***--------------------------***
.
. //else {
. //      display as err /*
. //      */ "Need to enter either name of Hispanic variable or none after local
>  hisp_var"
. //      exit 198
. //}
.
. ***--------------------------***
.
. // #4 CHECK ALL RESULTING VARIABLES
. ***check all to ensure correct***
.
.
. *Check White
. capture confirm variable dB_rwhite

. if !_rc {
.         tab `race_var' dB_rwhite, m

                      |  Non-Hispanic White
                      |       race = 1
                 Race | 0_NotWhit    1_White |     Total
----------------------+----------------------+----------
                White |    20,528     86,629 |   107,157
          Black/Negro |    19,392          0 |    19,392
American Indian/Aleut |     2,163          0 |     2,163
           Asian only |     7,577          0 |     7,577
Hawaiian/Pacific Isla |       617          0 |       617
                  800 |     2,535          0 |     2,535
----------------------+----------------------+----------
                Total |    52,812     86,629 |   139,441
. }

.
. *Check Black
. capture confirm variable dB_rblack

. if !_rc {
.         tab `race_var' dB_rblack, m

                      |     Non-Hispanic
                      | Black/AfAmer race = 1
                 Race | 0_NotBlac    1_Black |     Total
----------------------+----------------------+----------
                White |   107,157          0 |   107,157
          Black/Negro |       653     18,739 |    19,392
American Indian/Aleut |     2,163          0 |     2,163
           Asian only |     7,577          0 |     7,577
Hawaiian/Pacific Isla |       617          0 |       617
                  800 |     2,535          0 |     2,535
----------------------+----------------------+----------
                Total |   120,702     18,739 |   139,441
. }

.
. *Check Asian
. capture confirm variable dB_rasian

. if !_rc {
.         tab `race_var' dB_rasian, m

                      |  Non-Hispanic Asian
                      |       race = 1
                 Race | 0_NotAsia    1_Asian |     Total
----------------------+----------------------+----------
                White |   107,157          0 |   107,157
          Black/Negro |    19,392          0 |    19,392
American Indian/Aleut |     2,163          0 |     2,163
           Asian only |       158      7,419 |     7,577
Hawaiian/Pacific Isla |       617          0 |       617
                  800 |     2,535          0 |     2,535
----------------------+----------------------+----------
                Total |   132,022      7,419 |   139,441
. }

.
. *Check Other
. capture confirm variable dB_rother

. if !_rc {
.         tab `race_var' dB_rother, m

                      |  Non-Hispanic Other,
                      |    mixed race = 1
                 Race | 0_NotOthe  1_Mixed/O |     Total
----------------------+----------------------+----------
                White |   107,157          0 |   107,157
          Black/Negro |    19,392          0 |    19,392
American Indian/Aleut |       436      1,727 |     2,163
           Asian only |     7,577          0 |     7,577
Hawaiian/Pacific Isla |        90        527 |       617
                  800 |       388      2,147 |     2,535
----------------------+----------------------+----------
                Total |   135,040      4,401 |   139,441
. }

.
. *Check Hispanic
. capture confirm variable dB_rhisp

. if !_rc {
.         tab `race_var' dB_rhisp, m

                      | Hispanic ethnicity =
                      |           1
                 Race | 0_NotHisp  1_Hispani |     Total
----------------------+----------------------+----------
                White |    86,629     20,528 |   107,157
          Black/Negro |    18,739        653 |    19,392
American Indian/Aleut |     1,727        436 |     2,163
           Asian only |     7,419        158 |     7,577
Hawaiian/Pacific Isla |       527         90 |       617
                  800 |     2,147        388 |     2,535
----------------------+----------------------+----------
                Total |   117,188     22,253 |   139,441
. }

.
. *Check Categorical Race Variable
. tab `race_var' dG_race, m

                      |          Categorical race variable
                 Race |     White      Black      Asian   Hispanic |     Total
----------------------+--------------------------------------------+----------
                White |    86,629          0          0     20,528 |   107,157
          Black/Negro |         0     18,739          0        653 |    19,392
American Indian/Aleut |         0          0          0        436 |     2,163
           Asian only |         0          0      7,419        158 |     7,577
Hawaiian/Pacific Isla |         0          0          0         90 |       617
                  800 |         0          0          0        388 |     2,535
----------------------+--------------------------------------------+----------
                Total |    86,629     18,739      7,419     22,253 |   139,441


                      | Categorica
                      |   l race
                      |  variable
                 Race | Other/mix |     Total
----------------------+-----------+----------
                White |         0 |   107,157
          Black/Negro |         0 |    19,392
American Indian/Aleut |     1,727 |     2,163
           Asian only |         0 |     7,577
Hawaiian/Pacific Isla |       527 |       617
                  800 |     2,147 |     2,535
----------------------+-----------+----------
                Total |     4,401 |   139,441

. tab dG_race `race_var', m

Categorical |
       race |                          Race
   variable |     White  Black/Neg  American   Asian onl  Hawaiian/ |     Total
------------+-------------------------------------------------------+----------
      White |    86,629          0          0          0          0 |    86,629
      Black |         0     18,739          0          0          0 |    18,739
      Asian |         0          0          0      7,419          0 |     7,419
   Hispanic |    20,528        653        436        158         90 |    22,253
Other/mixed |         0          0      1,727          0        527 |     4,401
------------+-------------------------------------------------------+----------
      Total |   107,157     19,392      2,163      7,577        617 |   139,441


Categorical |
       race |    Race
   variable |       800 |     Total
------------+-----------+----------
      White |         0 |    86,629
      Black |         0 |    18,739
      Asian |         0 |     7,419
   Hispanic |       388 |    22,253
Other/mixed |     2,147 |     4,401
------------+-----------+----------
      Total |     2,535 |   139,441

. if "`hisp_var'" != "none" {
.         tab dG_race `hisp_var', m

Categorical |
       race |         hisp
   variable |         0          1 |     Total
------------+----------------------+----------
      White |    86,629          0 |    86,629
      Black |    18,739          0 |    18,739
      Asian |     7,419          0 |     7,419
   Hispanic |         0     22,253 |    22,253
Other/mixed |     4,401          0 |     4,401
------------+----------------------+----------
      Total |   117,188     22,253 |   139,441
. }

.
.
. fvset base 1 dG_race            // ref: white

.
. ***--------------------------***
.
. // #3 EDUCATION
.
. local edu_var educ_asec

. tab `edu_var'

          Educational attainment recode |      Freq.     Percent        Cum.
----------------------------------------+-----------------------------------
                      None or preschool |        354        0.25        0.25
                   Grades 1, 2, 3, or 4 |        916        0.66        0.91
                          Grades 5 or 6 |      1,933        1.39        2.30
                          Grades 7 or 8 |      2,394        1.72        4.01
                                Grade 9 |      2,245        1.61        5.62
                               Grade 10 |      2,539        1.82        7.44
                               Grade 11 |      3,038        2.18        9.62
                 12th grade, no diploma |      1,811        1.30       10.92
      High school diploma or equivalent |     38,254       27.43       38.36
             Some college but no degree |     25,817       18.51       56.87
Associate's degree, occupational/vocati |      6,154        4.41       61.28
   Associate's degree, academic program |      8,226        5.90       67.18
                      Bachelor's degree |     28,228       20.24       87.43
                        Master's degree |     12,838        9.21       96.63
             Professional school degree |      2,027        1.45       98.09
                       Doctorate degree |      2,667        1.91      100.00
----------------------------------------+-----------------------------------
                                  Total |    139,441      100.00

. tab `edu_var', nolab m

Educational |
 attainment |
     recode |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |        354        0.25        0.25
         10 |        916        0.66        0.91
         20 |      1,933        1.39        2.30
         30 |      2,394        1.72        4.01
         40 |      2,245        1.61        5.62
         50 |      2,539        1.82        7.44
         60 |      3,038        2.18        9.62
         71 |      1,811        1.30       10.92
         73 |     38,254       27.43       38.36
         81 |     25,817       18.51       56.87
         91 |      6,154        4.41       61.28
         92 |      8,226        5.90       67.18
        111 |     28,228       20.24       87.43
        123 |     12,838        9.21       96.63
        124 |      2,027        1.45       98.09
        125 |      2,667        1.91      100.00
------------+-----------------------------------
      Total |    139,441      100.00

.
. *don't know/refused code(s) for `edu_var'
. local edu_missing_condition `"`edu_var' == 8 | `edu_var' == 9"'

.
. * Conditions for each category
. local lHS_condition     `"`edu_var' <= 71"'

. local HS_condition              `"`edu_var' == 73"'

. local sCol_condition    `"`edu_var' == 81 | `edu_var' == 91 | `edu_var' == 92"
> '

. local col_condition             `"`edu_var' == 111"'

. local grad_condition    `"`edu_var' >= 123"'

.
. include $redi/redi11c_education.doi

. *! include file to label education variables
. *! version 1.0 \ molly king 2017-01-24
.
.   *compilation of originally individual include files that programmed each edu
> cation variable separate
. ***--------------------------***
.
. // #1 GENERATE ALL VARIABLES, AND LABEL, ADD NOTES
.
.
. // Categorical Education Variable
.         gen dG_edu = .
(139,441 missing values generated)

.         label var dG_edu "Categorical education variable"

.         label define edu_5categ 1 "< HS" 2 "HS" 3 "some college" 4 "college" 5
>  "grad school"

.                 label val dG_edu edu_5categ

.         notes dG_edu: Education categorical variable, created from `edu_var' v
> ariable in `dataset' \ ki`category'`dataset'.do mmk $S_DATE

.
.
. // Less than HS
.         if "`lHS_condition'" != "none" {
.                 gen dB_edu_lHS = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition:
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_lHS = . if `edu_missing_conditi
> on'
(0 real changes made)
.                         }
.                 label var dB_edu_lHS "<HS"
.                 label define dB_edu_lHS 0 "0_>HS" 1 "1_<HS"
.                         label val dB_edu_lHS dB_edu_lHS
.                 notes dB_edu_lHS: Less than HS edu. created from `edu_var' var
> iable in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
.
.                 replace dB_edu_lHS = 1 if `lHS_condition'
(15,230 real changes made)
.                 replace dG_edu     = 1 if `lHS_condition'
(15,230 real changes made)
.         }

.
.
. // High School
.         if "`HS_condition'" != "none" {
.                 gen dB_edu_HS = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition:
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_HS = . if `edu_missing_conditio
> n'
(0 real changes made)
.                         }
.                 label var dB_edu_HS "HS"
.                 label define dB_edu_HS 0 "0_notHS" 1 "1_HS"
.                         label val dB_edu_HS dB_edu_HS
.                 notes dB_edu_HS: HS edu. created from `edu_var' variable in `d
> ataset' \ ki`category'`dataset'.do mmk $S_DATE
.
.                 replace dB_edu_HS = 1 if `HS_condition'
(38,254 real changes made)
.                 replace dG_edu    = 2 if `HS_condition'
(38,254 real changes made)
.         }

.
.
. // Some college
.         if "`sCol_condition'" != "none" {
.                 gen dB_edu_sCol = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition:
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_sCol = . if `edu_missing_condit
> ion'
(0 real changes made)
.                         }
.                 label var dB_edu_sCol "Some College / Voc. Training"
.                 label define dB_edu_sCol 0 "0_notSomeCol" 1 "1_SomeCol"
.                         label val dB_edu_sCol dB_edu_sCol
.                 notes dB_edu_sCol: Some College edu. created from `edu_var' va
> riable in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
.
.                 replace dB_edu_sCol = 1 if `sCol_condition'
(40,197 real changes made)
.                 replace dG_edu      = 3 if `sCol_condition'
(40,197 real changes made)
.         }

.
.
. // College Degree
.         if "`col_condition'" != "none" {
.                 gen dB_edu_col = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition:
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_col = . if `edu_missing_conditi
> on'
(0 real changes made)
.                         }
.                 label var dB_edu_col "College degree"
.                 label define dB_edu_col 0 "0_notCol" 1 "1_College"
.                         label val dB_edu_col dB_edu_col
.                 notes dB_edu_col: College degree, created from `edu_var' varia
> ble in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
.
.                 replace dB_edu_col = 1 if `col_condition'
(28,228 real changes made)
.                 replace dG_edu     = 4 if `col_condition'
(28,228 real changes made)
.         }

.
.
. // Post-graduate degree
.         if "`grad_condition'" != "none" {
.                 gen dB_edu_grad = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition:
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_grad = . if `edu_missing_condit
> ion'
(0 real changes made)
.                         }
.                 label var dB_edu_grad "Graduate degree"
.                 label define dB_edu_grad 0 "0_<GradDeg" 1 "1_GradDegree"
.                         label val dB_edu_grad dB_edu_grad
.                 notes dB_edu_grad: Graduate degree, created from `edu_var' var
> iable in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
.
.                 replace dB_edu_grad = 1 if `grad_condition'
(17,532 real changes made)
.                 replace dG_edu      = 5 if `grad_condition'
(17,532 real changes made)
.         }

.
.
. // College + post-graduate
.         if "`grad_condition'" != "none" & "`col_condition'" != "none" {
.                 gen dB_edu_colp = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition:
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_colp = . if `edu_missing_condit
> ion'
(0 real changes made)
.                         }
.                 label var dB_edu_colp "College or Graduate Degree"
.                 label define dB_edu_colp 0 "0_NoBA" 1 "1_BA+"
.                         label val dB_edu_colp dB_edu_colp
.                 notes dB_edu_colp: College plus grad, created from `edu_var' v
> ariable in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
.
.                 replace dB_edu_colp = 1  if `col_condition' | `grad_condition'
(45,760 real changes made)
.         }

.
. // College + post-graduate, where can't disentangle the two
.         if "`grad_condition'" == "none" & "`col_condition'" != "none" {
.                 gen dB_edu_colp = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition:
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_colp = . if `edu_missing_condit
> ion'
.                         }
.                 label var dB_edu_colp "College or Graduate Degree"
.                 label define dB_edu_colp 0 "0_NoBA" 1 "1_BA+"
.                         label val dB_edu_colp dB_edu_colp
.                 notes dB_edu_colp: College plus grad, created from `edu_var' v
> ariable in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
.
.                 replace dB_edu_colp = 1  if `col_condition'
.                 // here, the college condition covers both those who have a ba
> chelors and more
.                 drop dB_edu_col
.         }

.
.
.
. // # CHECK TO ENSURE CORRECT
. if "`lHS_condition'" != "none" {
.         tab `edu_var' dB_edu_lHS, m

          Educational |          <HS
    attainment recode |     0_>HS      1_<HS |     Total
----------------------+----------------------+----------
    None or preschool |         0        354 |       354
 Grades 1, 2, 3, or 4 |         0        916 |       916
        Grades 5 or 6 |         0      1,933 |     1,933
        Grades 7 or 8 |         0      2,394 |     2,394
              Grade 9 |         0      2,245 |     2,245
             Grade 10 |         0      2,539 |     2,539
             Grade 11 |         0      3,038 |     3,038
12th grade, no diplom |         0      1,811 |     1,811
High school diploma o |    38,254          0 |    38,254
Some college but no d |    25,817          0 |    25,817
Associate's degree, o |     6,154          0 |     6,154
Associate's degree, a |     8,226          0 |     8,226
    Bachelor's degree |    28,228          0 |    28,228
      Master's degree |    12,838          0 |    12,838
Professional school d |     2,027          0 |     2,027
     Doctorate degree |     2,667          0 |     2,667
----------------------+----------------------+----------
                Total |   124,211     15,230 |   139,441
. }

. if "`HS_condition'" != "none" {
.         tab `edu_var' dB_edu_HS, m

          Educational |          HS
    attainment recode |   0_notHS       1_HS |     Total
----------------------+----------------------+----------
    None or preschool |       354          0 |       354
 Grades 1, 2, 3, or 4 |       916          0 |       916
        Grades 5 or 6 |     1,933          0 |     1,933
        Grades 7 or 8 |     2,394          0 |     2,394
              Grade 9 |     2,245          0 |     2,245
             Grade 10 |     2,539          0 |     2,539
             Grade 11 |     3,038          0 |     3,038
12th grade, no diplom |     1,811          0 |     1,811
High school diploma o |         0     38,254 |    38,254
Some college but no d |    25,817          0 |    25,817
Associate's degree, o |     6,154          0 |     6,154
Associate's degree, a |     8,226          0 |     8,226
    Bachelor's degree |    28,228          0 |    28,228
      Master's degree |    12,838          0 |    12,838
Professional school d |     2,027          0 |     2,027
     Doctorate degree |     2,667          0 |     2,667
----------------------+----------------------+----------
                Total |   101,187     38,254 |   139,441
. }

. if "`sCol_condition'" != "none" {
.         tab `edu_var' dB_edu_sCol, m

                      |  Some College / Voc.
          Educational |       Training
    attainment recode | 0_notSome  1_SomeCol |     Total
----------------------+----------------------+----------
    None or preschool |       354          0 |       354
 Grades 1, 2, 3, or 4 |       916          0 |       916
        Grades 5 or 6 |     1,933          0 |     1,933
        Grades 7 or 8 |     2,394          0 |     2,394
              Grade 9 |     2,245          0 |     2,245
             Grade 10 |     2,539          0 |     2,539
             Grade 11 |     3,038          0 |     3,038
12th grade, no diplom |     1,811          0 |     1,811
High school diploma o |    38,254          0 |    38,254
Some college but no d |         0     25,817 |    25,817
Associate's degree, o |         0      6,154 |     6,154
Associate's degree, a |         0      8,226 |     8,226
    Bachelor's degree |    28,228          0 |    28,228
      Master's degree |    12,838          0 |    12,838
Professional school d |     2,027          0 |     2,027
     Doctorate degree |     2,667          0 |     2,667
----------------------+----------------------+----------
                Total |    99,244     40,197 |   139,441
. }

. if "`col_condition'" != "none" & "`grad_condition'" != "none" {
.         tab `edu_var' dB_edu_col, m

          Educational |    College degree
    attainment recode |  0_notCol  1_College |     Total
----------------------+----------------------+----------
    None or preschool |       354          0 |       354
 Grades 1, 2, 3, or 4 |       916          0 |       916
        Grades 5 or 6 |     1,933          0 |     1,933
        Grades 7 or 8 |     2,394          0 |     2,394
              Grade 9 |     2,245          0 |     2,245
             Grade 10 |     2,539          0 |     2,539
             Grade 11 |     3,038          0 |     3,038
12th grade, no diplom |     1,811          0 |     1,811
High school diploma o |    38,254          0 |    38,254
Some college but no d |    25,817          0 |    25,817
Associate's degree, o |     6,154          0 |     6,154
Associate's degree, a |     8,226          0 |     8,226
    Bachelor's degree |         0     28,228 |    28,228
      Master's degree |    12,838          0 |    12,838
Professional school d |     2,027          0 |     2,027
     Doctorate degree |     2,667          0 |     2,667
----------------------+----------------------+----------
                Total |   111,213     28,228 |   139,441
. }

. if "`col_condition'" != "none" {
.         tab `edu_var' dB_edu_colp, m

                      |  College or Graduate
          Educational |        Degree
    attainment recode |    0_NoBA      1_BA+ |     Total
----------------------+----------------------+----------
    None or preschool |       354          0 |       354
 Grades 1, 2, 3, or 4 |       916          0 |       916
        Grades 5 or 6 |     1,933          0 |     1,933
        Grades 7 or 8 |     2,394          0 |     2,394
              Grade 9 |     2,245          0 |     2,245
             Grade 10 |     2,539          0 |     2,539
             Grade 11 |     3,038          0 |     3,038
12th grade, no diplom |     1,811          0 |     1,811
High school diploma o |    38,254          0 |    38,254
Some college but no d |    25,817          0 |    25,817
Associate's degree, o |     6,154          0 |     6,154
Associate's degree, a |     8,226          0 |     8,226
    Bachelor's degree |         0     28,228 |    28,228
      Master's degree |         0     12,838 |    12,838
Professional school d |         0      2,027 |     2,027
     Doctorate degree |         0      2,667 |     2,667
----------------------+----------------------+----------
                Total |    93,681     45,760 |   139,441
. }

. if "`grad_condition'" != "none" {
.         tab `edu_var' dB_edu_grad, m

          Educational |    Graduate degree
    attainment recode | 0_<GradDe  1_GradDeg |     Total
----------------------+----------------------+----------
    None or preschool |       354          0 |       354
 Grades 1, 2, 3, or 4 |       916          0 |       916
        Grades 5 or 6 |     1,933          0 |     1,933
        Grades 7 or 8 |     2,394          0 |     2,394
              Grade 9 |     2,245          0 |     2,245
             Grade 10 |     2,539          0 |     2,539
             Grade 11 |     3,038          0 |     3,038
12th grade, no diplom |     1,811          0 |     1,811
High school diploma o |    38,254          0 |    38,254
Some college but no d |    25,817          0 |    25,817
Associate's degree, o |     6,154          0 |     6,154
Associate's degree, a |     8,226          0 |     8,226
    Bachelor's degree |    28,228          0 |    28,228
      Master's degree |         0     12,838 |    12,838
Professional school d |         0      2,027 |     2,027
     Doctorate degree |         0      2,667 |     2,667
----------------------+----------------------+----------
                Total |   121,909     17,532 |   139,441
.         tab `edu_var' dB_edu_grad, m nolabel

Educationa |
         l |
attainment |    Graduate degree
    recode |         0          1 |     Total
-----------+----------------------+----------
         2 |       354          0 |       354
        10 |       916          0 |       916
        20 |     1,933          0 |     1,933
        30 |     2,394          0 |     2,394
        40 |     2,245          0 |     2,245
        50 |     2,539          0 |     2,539
        60 |     3,038          0 |     3,038
        71 |     1,811          0 |     1,811
        73 |    38,254          0 |    38,254
        81 |    25,817          0 |    25,817
        91 |     6,154          0 |     6,154
        92 |     8,226          0 |     8,226
       111 |    28,228          0 |    28,228
       123 |         0     12,838 |    12,838
       124 |         0      2,027 |     2,027
       125 |         0      2,667 |     2,667
-----------+----------------------+----------
     Total |   121,909     17,532 |   139,441
. }

. tab `edu_var' dG_edu, m

          Educational |       Categorical education variable
    attainment recode |      < HS         HS  some coll    college |     Total
----------------------+--------------------------------------------+----------
    None or preschool |       354          0          0          0 |       354
 Grades 1, 2, 3, or 4 |       916          0          0          0 |       916
        Grades 5 or 6 |     1,933          0          0          0 |     1,933
        Grades 7 or 8 |     2,394          0          0          0 |     2,394
              Grade 9 |     2,245          0          0          0 |     2,245
             Grade 10 |     2,539          0          0          0 |     2,539
             Grade 11 |     3,038          0          0          0 |     3,038
12th grade, no diplom |     1,811          0          0          0 |     1,811
High school diploma o |         0     38,254          0          0 |    38,254
Some college but no d |         0          0     25,817          0 |    25,817
Associate's degree, o |         0          0      6,154          0 |     6,154
Associate's degree, a |         0          0      8,226          0 |     8,226
    Bachelor's degree |         0          0          0     28,228 |    28,228
      Master's degree |         0          0          0          0 |    12,838
Professional school d |         0          0          0          0 |     2,027
     Doctorate degree |         0          0          0          0 |     2,667
----------------------+--------------------------------------------+----------
                Total |    15,230     38,254     40,197     28,228 |   139,441


                      | Categorica
                      |     l
                      | education
          Educational |  variable
    attainment recode | grad scho |     Total
----------------------+-----------+----------
    None or preschool |         0 |       354
 Grades 1, 2, 3, or 4 |         0 |       916
        Grades 5 or 6 |         0 |     1,933
        Grades 7 or 8 |         0 |     2,394
              Grade 9 |         0 |     2,245
             Grade 10 |         0 |     2,539
             Grade 11 |         0 |     3,038
12th grade, no diplom |         0 |     1,811
High school diploma o |         0 |    38,254
Some college but no d |         0 |    25,817
Associate's degree, o |         0 |     6,154
Associate's degree, a |         0 |     8,226
    Bachelor's degree |         0 |    28,228
      Master's degree |    12,838 |    12,838
Professional school d |     2,027 |     2,027
     Doctorate degree |     2,667 |     2,667
----------------------+-----------+----------
                Total |    17,532 |   139,441

.
.
.
. fvset base 1 dG_edu             // ref: less than HS

.
.
. ***--------------------------***
.
. // # INDEPENDENT LIVING DIFFICULTY
.
. /*DIFFMOB indicates whether the respondent has any physical, mental, or
> emotional condition lasting six months or more that makes it difficult or
> impossible to perform basic activities outside the home alone.
> This does not include temporary health problems, such as broken bones.*/
.
. tab diffmob_asec

    Disability limiting |
               mobility |      Freq.     Percent        Cum.
------------------------+-----------------------------------
                    NIU |        684        0.49        0.49
 No mobility limitation |    132,292       94.87       95.36
Has mobility limitation |      6,465        4.64      100.00
------------------------+-----------------------------------
                  Total |    139,441      100.00

. tab diffmob_asec, nolab

 Disability |
   limiting |
   mobility |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        684        0.49        0.49
          1 |    132,292       94.87       95.36
          2 |      6,465        4.64      100.00
------------+-----------------------------------
      Total |    139,441      100.00

.
. generate disability = .
(139,441 missing values generated)

. replace disability = 1 if diffmob_asec == 2
(6,465 real changes made)

. replace disability = 0 if diffmob_asec == 1
(132,292 real changes made)

.
. tab diffmob_asec disability, m

  Disability limiting |            disability
             mobility |         0          1          . |     Total
----------------------+---------------------------------+----------
                  NIU |         0          0        684 |       684
No mobility limitatio |   132,292          0          0 |   132,292
Has mobility limitati |         0      6,465          0 |     6,465
----------------------+---------------------------------+----------
                Total |   132,292      6,465        684 |   139,441

.
.
. ***--------------------------***
.
. // # MARITAL STATUS
.
. tab marst_asec

         Marital status |      Freq.     Percent        Cum.
------------------------+-----------------------------------
Married, spouse present |     70,203       50.35       50.35
 Married, spouse absent |      2,457        1.76       52.11
              Separated |      3,993        2.86       54.97
               Divorced |     20,847       14.95       69.92
                Widowed |     12,237        8.78       78.70
   Never married/single |     29,704       21.30      100.00
------------------------+-----------------------------------
                  Total |    139,441      100.00

. tab marst_asec, nolab

    Marital |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     70,203       50.35       50.35
          2 |      2,457        1.76       52.11
          3 |      3,993        2.86       54.97
          4 |     20,847       14.95       69.92
          5 |     12,237        8.78       78.70
          6 |     29,704       21.30      100.00
------------+-----------------------------------
      Total |    139,441      100.00

.
. generate married = .
(139,441 missing values generated)

. replace married = 1 if marst_asec == 1 | marst_asec == 2
(72,660 real changes made)

. replace married = 0 if marst_asec == 3 | marst_asec == 4 |  marst_asec == 5 |
> marst_asec == 6
(66,781 real changes made)

.
. tab marst_asec married, m

                      |        married
       Marital status |         0          1 |     Total
----------------------+----------------------+----------
Married, spouse prese |         0     70,203 |    70,203
Married, spouse absen |         0      2,457 |     2,457
            Separated |     3,993          0 |     3,993
             Divorced |    20,847          0 |    20,847
              Widowed |    12,237          0 |    12,237
 Never married/single |    29,704          0 |    29,704
----------------------+----------------------+----------
                Total |    66,781     72,660 |   139,441

.
. ***--------------------------***
.
. // # LABOR FORCE
.
. /*LABFORCE is a dichotomous variable indicating whether a person participated
> in the labor force. See EMPSTAT for a non-dichotomous variable that indicates
> whether the respondent was part of the labor force -- working or seeking work
> -- and, if so, whether the person was currently unemployed.*/
.
. tab labforce

        Labor force status |      Freq.     Percent        Cum.
---------------------------+-----------------------------------
                       NIU |        684        0.49        0.49
No, not in the labor force |     47,911       34.36       34.85
   Yes, in the labor force |     90,846       65.15      100.00
---------------------------+-----------------------------------
                     Total |    139,441      100.00

. tab labforce, nolab m

Labor force |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        684        0.49        0.49
          1 |     47,911       34.36       34.85
          2 |     90,846       65.15      100.00
------------+-----------------------------------
      Total |    139,441      100.00

.
. generate labor = .
(139,441 missing values generated)

. replace labor = 1 if labforce == 2
(90,846 real changes made)

. replace labor = 0 if labforce == 1
(47,911 real changes made)

.
. tab labforce labor, m

                      |              labor
   Labor force status |         0          1          . |     Total
----------------------+---------------------------------+----------
                  NIU |         0          0        684 |       684
No, not in the labor  |    47,911          0          0 |    47,911
Yes, in the labor for |         0     90,846          0 |    90,846
----------------------+---------------------------------+----------
                Total |    47,911     90,846        684 |   139,441

.
.
. ***--------------------------***
.
. // # OWNERSHIP OF HOUSING
.
. /*OWNERSHP indicates whether the housing unit was rented or owned by its inhab
> itants.
> Housing units acquired with a mortgage or other lending arrangement(s) are
> classified as "owned," even if repayment was not yet completed.*/
.
. tab ownershp_asec

Ownership of dwelling |      Freq.     Percent        Cum.
----------------------+-----------------------------------
Owned or being bought |     89,370       64.09       64.09
         No cash rent |      1,999        1.43       65.53
       With cash rent |     48,072       34.47      100.00
----------------------+-----------------------------------
                Total |    139,441      100.00

. tab ownershp_asec, nolab

  Ownership |
of dwelling |      Freq.     Percent        Cum.
------------+-----------------------------------
         10 |     89,370       64.09       64.09
         21 |      1,999        1.43       65.53
         22 |     48,072       34.47      100.00
------------+-----------------------------------
      Total |    139,441      100.00

.
. generate ownhouse = .
(139,441 missing values generated)

. replace ownhouse = 1 if ownershp_asec == 10
(89,370 real changes made)

. replace ownhouse = 0 if ownershp_asec == 21 | ownershp_asec == 22
(50,071 real changes made)

.
. tab ownershp_asec ownhouse, m

                      |       ownhouse
Ownership of dwelling |         0          1 |     Total
----------------------+----------------------+----------
Owned or being bought |         0     89,370 |    89,370
         No cash rent |     1,999          0 |     1,999
       With cash rent |    48,072          0 |    48,072
----------------------+----------------------+----------
                Total |    50,071     89,370 |   139,441

.
. ***--------------------------***
. /*
> // # MIGRATION STATUS
>
> /*MIGRATE1 indicates whether the respondent had changed residence in the past
> year. Those who were living in the same house as one year ago were considered
> non-movers and were asked no further questions about migration over the past y
> ear. Movers were asked about the city, county and state and/or the U.S. territ
> ory or foreign country where they resided one year ago.*/
>
> tab migrate1_asec
> tab migrate1_asec, nolab
>
> generate migrate = .
> replace migrate = 1 if migrate1_asec == 2 | migrate1_asec == 3 | migrate1_asec
>  == 4 | migrate1_asec == 5 | migrate1_asec == 6
> replace migrate = 0 if migrate1_asec    == 1
>
> */
. ***--------------------------***
.
. save $deriv/redi11_ASEC_regressions-hinc_shp.dta, replace
file ~/Documents/SocResearch/Dissertation/data/data_derv/redi11_ASEC_regressions
> -hinc_shp.dta saved

. use $deriv/redi11_ASEC_regressions-hinc_shp.dta, clear
(CPS ASEC data - Household Income - 2016, 2017, 2019)

.
. ***--------------------------***
. // REGRESSION: CPS ASEC Income as DV
. ***--------------------------***
.
. di in red "Predict ASEC income as a function of gender of householder, " ///
>                   "race/ethnicity, education"
Predict ASEC income as a function of gender of householder, race/ethnicity, educ
> ation

. svy: reg asec_hinc_shp_`conv_year' ///
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad // lessHS comparison cate
> gory
(running regress on estimation sample)

Survey: Linear regression

Number of strata   =         1                Number of obs     =      139,441
Number of PSUs     =   139,441                Population size   =  252,586,892
                                              Design df         =      139,440
                                              F(   9, 139432)   =      1438.52
                                              Prob > F          =       0.0000
                                              R-squared         =       0.1229

------------------------------------------------------------------------------
             |             Linearized
asec_hi~2017 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      dB_fem |  -16227.93    552.018   -29.40   0.000    -17309.87   -15145.98
   dB_rblack |  -21199.14   665.0722   -31.87   0.000    -22502.67   -19895.61
   dB_rasian |   5860.212   1476.912     3.97   0.000     2965.493    8754.931
    dB_rhisp |  -4996.733   721.4411    -6.93   0.000    -6410.744   -3582.722
   dB_rother |  -11336.17   1574.543    -7.20   0.000    -14422.24   -8250.093
   dB_edu_HS |   15851.56    671.709    23.60   0.000     14535.03     17168.1
 dB_edu_sCol |   30222.01   694.8007    43.50   0.000     28860.21     31583.8
  dB_edu_col |   65715.94   900.6998    72.96   0.000     63950.58    67481.29
 dB_edu_grad |   96653.27    1306.64    73.97   0.000     94092.28    99214.26
       _cons |   53946.31   687.6419    78.45   0.000     52598.54    55294.07
------------------------------------------------------------------------------

.
.
. di in red "Predict ASEC income as a function of gender of householder, " ///
>                   "race/ethnicity, education, married, disability"
Predict ASEC income as a function of gender of householder, race/ethnicity, educ
> ation, married, disability

. svy: reg asec_hinc_shp_`conv_year' ///
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison cat
> egory
>         married disability
(running regress on estimation sample)

Survey: Linear regression

Number of strata   =         1                Number of obs     =      138,757
Number of PSUs     =   138,757                Population size   =  251,607,554
                                              Design df         =      138,756
                                              F(  11, 138746)   =      1872.60
                                              Prob > F          =       0.0000
                                              R-squared         =       0.1773

------------------------------------------------------------------------------
             |             Linearized
asec_hi~2017 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      dB_fem |  -7950.761   557.2913   -14.27   0.000    -9043.041    -6858.48
   dB_rblack |  -12902.57   645.5849   -19.99   0.000     -14167.9   -11637.23
   dB_rasian |   1994.287   1454.166     1.37   0.170    -855.8505    4844.425
    dB_rhisp |  -6655.502    714.406    -9.32   0.000    -8055.724   -5255.279
   dB_rother |  -6547.779   1529.823    -4.28   0.000    -9546.203   -3549.355
   dB_edu_HS |   12788.09   668.2333    19.14   0.000     11478.37    14097.82
 dB_edu_sCol |   26424.27   689.9065    38.30   0.000     25072.07    27776.48
  dB_edu_col |   58257.43    883.666    65.93   0.000     56525.47     59989.4
 dB_edu_grad |   86862.51   1271.471    68.32   0.000     84370.45    89354.57
     married |   43890.41   553.8387    79.25   0.000     42804.89    44975.92
  disability |  -23014.23    627.728   -36.66   0.000    -24244.56   -21783.89
       _cons |   33243.48   745.0325    44.62   0.000     31783.23    34703.73
------------------------------------------------------------------------------

.
.
. di in red "Predict ASEC income as a function of gender of householder, " ///
>                   "race/ethnicity, education, married, disability, labor force
> "
Predict ASEC income as a function of gender of householder, race/ethnicity, educ
> ation, married, disability, labor force

.
. svy: reg asec_hinc_shp_`conv_year' ///
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison cat
> egory
>         married disability labor
(running regress on estimation sample)

Survey: Linear regression

Number of strata   =         1                Number of obs     =      138,757
Number of PSUs     =   138,757                Population size   =  251,607,554
                                              Design df         =      138,756
                                              F(  12, 138745)   =      2011.39
                                              Prob > F          =       0.0000
                                              R-squared         =       0.2045

------------------------------------------------------------------------------
             |             Linearized
asec_hi~2017 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      dB_fem |  -4154.211   544.4834    -7.63   0.000    -5221.388   -3087.034
   dB_rblack |  -14921.26    639.924   -23.32   0.000     -16175.5   -13667.02
   dB_rasian |   258.5174   1435.049     0.18   0.857    -2554.152    3071.187
    dB_rhisp |  -11612.45   720.7876   -16.11   0.000    -13025.18   -10199.72
   dB_rother |  -8246.664   1511.645    -5.46   0.000    -11209.46   -5283.869
   dB_edu_HS |   7992.628   668.7226    11.95   0.000     6681.944    9303.311
 dB_edu_sCol |   18934.11   697.1926    27.16   0.000     17567.63     20300.6
  dB_edu_col |   47844.02   889.7651    53.77   0.000      46100.1    49587.94
 dB_edu_grad |   76222.77   1258.109    60.59   0.000      73756.9    78688.64
     married |   44024.94   543.8315    80.95   0.000     42959.05    45090.84
  disability |  -5033.953   654.1854    -7.69   0.000    -6316.144   -3751.762
       labor |   34805.15   523.5509    66.48   0.000        33779     35831.3
       _cons |    16233.5   742.3575    21.87   0.000      14778.5    17688.51
------------------------------------------------------------------------------

.
.
. /*
> ***--------------------------***
> // REGRESSION: REDI Income as IV: Predict Migration
> ***--------------------------***
>
> di in red "Predict migration as function of ASEC ln(income), " ///
>                   "gender, race/ethnicity, education, married, disability"
> svy: logistic migrate ///
>         asec_lnhinc_shp_`conv_year' ///
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison cat
> egory
>         married disability  //
>
> di in red "Predict migration as function of ASEC ln(income), add home ownershi
> p"
> svy: logistic migrate ///
>         asec_lnhinc_shp_`conv_year' ///
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison cat
> egory
>         married disability ownhouse //
>
> */
. ***-----
. // Check if systematically different values between REDI and ACS Research Data
> set
. *use $deriv/redi11_ASEC_regressions-hinc_shp.dta, clear
.
.
. *inflation-adjusted
. table dB_fem ,  c(mean asec_hinc_shp_`conv_year')

--------------------------
Responden |
t's sex   |
(=1 if    |
female)   | mean(ase~2017)
----------+---------------
   0_Male |         92,292
 1_Female |         72,913
--------------------------

. table dG_race,  c(mean asec_hinc_shp_`conv_year')

----------------------------
Categorical |
race        |
variable    | mean(ase~2017)
------------+---------------
      White |         91,308
      Black |         55,051
      Asian |         107312
   Hispanic |         66,722
Other/mixed |         68,257
----------------------------

. table dG_edu,   c(mean asec_hinc_shp_`conv_year')

-----------------------------
Categorical  |
education    |
variable     | mean(ase~2017)
-------------+---------------
        < HS |         40,984
          HS |         58,857
some college |         72,973
     college |         112201
 grad school |         145256
-----------------------------

.
.
. ***--------------------------***
.
.
. capture log close redi11_ASEC_regressions
