--------------------------------------------------------------------------------
      name:  redi11_ASEC_regressions
       log:  /Users/mollymking/Documents/SocResearch/Dissertation/redi/redi11_AS
> EC_regressions.log
  log type:  text
 opened on:  27 Oct 2021, 11:05:49

. 
. //      project:        REDI Methods Paper
. 
. //  task:       Regression of original continuous CPS ASEC variables
. //  data:       CPS ASEC from IPUMS, available: https://cps.ipums.org/
. 
. //  github:     redi
. //  OSF:                https://osf.io/qmhe8/
. 
. //  author:     Molly King
. 
. display "$S_DATE  $S_TIME"
27 Oct 2021  11:05:49

. 
. ***--------------------------***
. // # PROGRAM SETUP
. ***--------------------------***
. 
. version 16 // keeps program consistent for future replications

. set linesize 80

. clear all

. set more off

. set seed 1

. 
. local conv_year = 2017 // this is set in ki11_bidee00_CPI-U-RS.do

. 
. use $deriv/redi05_ASEC_bins-hinc_shp.dta, clear
(CPS ASEC data - Household Income - 2016-2017)

. save $deriv/redi11_ASEC_regressions-hinc_shp.dta, replace
file ~/Documents/SocResearch/Dissertation/data/data_derv/redi11_ASEC_regressions
> -hinc_shp.dta saved

. 
. ***--------------------------***
. // INFLATION
. ***--------------------------***                
.         
. local y = year

. 
. merge m:1 year using $deriv/redi01_CPI-U-RS.dta

    Result                           # of obs.
    -----------------------------------------
    not matched                            39
        from master                         0  (_merge==1)
        from using                         39  (_merge==2)

    matched                           139,441  (_merge==3)
    -----------------------------------------

. keep if _merge == 3 // keep only matches - not matched where different years
(39 observations deleted)

. drop _merge

. svyset [iweight=asecwth]

      iweight: asecwth
          VCE: linearized
  Single unit: missing
     Strata 1: <one>
         SU 1: <observations>
        FPC 1: <zero>

. 
. *original income variable, adjusted for inflation
. gen asec_hinc_shp_`conv_year' = hhincome_asec / conv_factor

. format asec_hinc_shp_`conv_year' %6.0fc

. label var asec_hinc_shp_`conv_year' "Inflation-adjusted household income (ASEC
> ), from shp categories, `conv_year' dollars"

. 
. ***--------------------------***        
. // # CREATE NATURAL LOG INCOME VARIABLES
. ***--------------------------***        
. 
. gen asec_lnhinc_shp_`conv_year' = ln(asec_hinc_shp_`conv_year')
(2,046 missing values generated)

. 
. label var asec_hinc_shp_`conv_year' "Inflation-adjusted natural log household 
> income (ASEC), from shp categories, `conv_year' dollars"
note: label truncated to 80 characters

. 
. 
. ***--------------------------***        
.                 
. save $deriv/redi11_ASEC_regressions-hinc_shp.dta, replace
file ~/Documents/SocResearch/Dissertation/data/data_derv/redi11_ASEC_regressions
> -hinc_shp.dta saved

. 
. ***--------------------------***
. // DEMOGRAPHICS needed for REGRESSION
. ***--------------------------***
.                 
. // #1 GENDER
.  
. local gender_var sex // gender variable in ASEC is "sex"

. tab `gender_var', m

        Sex |      Freq.     Percent        Cum.
------------+-----------------------------------
       Male |     69,958       50.17       50.17
     Female |     69,483       49.83      100.00
------------+-----------------------------------
      Total |    139,441      100.00

. tab `gender_var', nolab m

        Sex |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     69,958       50.17       50.17
          2 |     69,483       49.83      100.00
------------+-----------------------------------
      Total |    139,441      100.00

. 
. include $redi/redi11a_include_female_from2W_1M.doi

. *! include file to convert gender variable
. *! Produces gender dummy bariable from woman=2-->fem=1; man=1-->man=0
. *! version 1.1 \ molly king 2017-03-29
. 
. gen dB_fem = . 
(139,441 missing values generated)

.         replace dB_fem = 1 if `gender_var' == 2
(69,483 real changes made)

.         replace dB_fem = 0 if `gender_var' == 1
(69,958 real changes made)

. 
. label var dB_fem "Respondent's sex (=1 if female)" 

. label define dB_fem 0 "0_Male" 1 "1_Female"

.         label val dB_fem dB_fem

. 
. notes dB_fem: Created from `gender_var' in `data_using' \ `do_file'.do mmk $S_
> DATE

. 
. 
. ***--------------------------***
. 
. // #2 RACE / ETHNICITY - with RACE variable only
. 
. local race_var race

. tab `race_var'

                                   Race |      Freq.     Percent        Cum.
----------------------------------------+-----------------------------------
                                  White |    107,157       76.85       76.85
                            Black/Negro |     19,392       13.91       90.75
           American Indian/Aleut/Eskimo |      2,163        1.55       92.31
                             Asian only |      7,577        5.43       97.74
         Hawaiian/Pacific Islander only |        617        0.44       98.18
                            White-Black |        495        0.35       98.54
                  White-American Indian |      1,148        0.82       99.36
                            White-Asian |        307        0.22       99.58
        White-Hawaiian/Pacific Islander |         98        0.07       99.65
                  Black-American Indian |        155        0.11       99.76
                            Black-Asian |         30        0.02       99.78
        Black-Hawaiian/Pacific Islander |         14        0.01       99.79
                  American Indian-Asian |          7        0.01       99.80
        Asian-Hawaiian/Pacific Islander |         90        0.06       99.86
            White-Black-American Indian |        107        0.08       99.94
                      White-Black-Asian |          7        0.01       99.94
            White-American Indian-Asian |          8        0.01       99.95
  White-Asian-Hawaiian/Pacific Islander |         44        0.03       99.98
      White-Black-American Indian-Asian |          2        0.00       99.98
American Indian-Hawaiian/Pacific Island |          2        0.00       99.98
White-American Indian-Hawaiian/Pacific  |          4        0.00       99.99
            Black-American Indian-Asian |          3        0.00       99.99
White-American Indian-Asian-Hawaiian/Pa |          3        0.00       99.99
        Two or three races, unspecified |          2        0.00       99.99
        Four or five races, unspecified |          9        0.01      100.00
----------------------------------------+-----------------------------------
                                  Total |    139,441      100.00

. tab `race_var', m nolab

       Race |      Freq.     Percent        Cum.
------------+-----------------------------------
        100 |    107,157       76.85       76.85
        200 |     19,392       13.91       90.75
        300 |      2,163        1.55       92.31
        651 |      7,577        5.43       97.74
        652 |        617        0.44       98.18
        801 |        495        0.35       98.54
        802 |      1,148        0.82       99.36
        803 |        307        0.22       99.58
        804 |         98        0.07       99.65
        805 |        155        0.11       99.76
        806 |         30        0.02       99.78
        807 |         14        0.01       99.79
        808 |          7        0.01       99.80
        809 |         90        0.06       99.86
        810 |        107        0.08       99.94
        811 |          7        0.01       99.94
        812 |          8        0.01       99.95
        813 |         44        0.03       99.98
        814 |          2        0.00       99.98
        815 |          2        0.00       99.98
        817 |          4        0.00       99.99
        818 |          3        0.00       99.99
        819 |          3        0.00       99.99
        820 |          2        0.00       99.99
        830 |          9        0.01      100.00
------------+-----------------------------------
      Total |    139,441      100.00

. 
. gen hisp = .
(139,441 missing values generated)

. replace hisp = 1 if hispan >=1
(22,253 real changes made)

. replace hisp = 0 if hispan == 0
(117,188 real changes made)

. 
. replace race = 800 if race >=800
(2,535 real changes made)

. 
. local hisp_var hisp

. 
. if "`hisp_var'" != "none" {
.         tab `hisp_var', m

       hisp |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    117,188       84.04       84.04
          1 |     22,253       15.96      100.00
------------+-----------------------------------
      Total |    139,441      100.00
.         tab `hisp_var', m nolab

       hisp |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    117,188       84.04       84.04
          1 |     22,253       15.96      100.00
------------+-----------------------------------
      Total |    139,441      100.00
.         tab `race_var' `hisp_var'

                      |         hisp
                 Race |         0          1 |     Total
----------------------+----------------------+----------
                White |    86,629     20,528 |   107,157 
          Black/Negro |    18,739        653 |    19,392 
American Indian/Aleut |     1,727        436 |     2,163 
           Asian only |     7,419        158 |     7,577 
Hawaiian/Pacific Isla |       527         90 |       617 
                  800 |     2,147        388 |     2,535 
----------------------+----------------------+----------
                Total |   117,188     22,253 |   139,441 
. }

. 
. *don't know/refused code(s) for `race_var'
. local race_missing_condition none

. 
. local white_race_value =        100 

. local black_race_value =        200

. local asian_race_value =        651

. local hisp_value =                      1

. local other_race_value =        652

. local mult_race_value =         800

. local amerInd_race_value  = 300

. 
. include $redi/redi11b_racethnicity.doi

. *! include file to label race/ethnicity variables
. *! version 1.0 \ molly king 2017-01-20
. 
.   *compilation of originally individual include files that programmed each rac
> e/ethnicity separate
. ***--------------------------***
. 
. // #1 GENERATE ALL VARIABLES, AND LABEL, ADD NOTES
. 
. // White
.                 gen dB_rwhite = 0

.                 // Replace each with . for missing race if there is a race mis
> sing condition: 
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rwhite = . if `race_var' == `race_m
> issing_condition' // don't know/refused
.                         }

.                 label var dB_rwhite "Non-Hispanic White race = 1"

.                         label define dB_rwhite 0 "0_NotWhite" 1 "1_White"

.                 label val dB_rwhite dB_rwhite

.                 notes dB_rwhite: White respondent race created from `race_var'
>  & `hisp_var' in `dataset' \ ki`category'`dataset'.do mmk $S_DATE

. 
. // Black
.                 gen dB_rblack = 0

.                 // Replace each with . for missing race if there is a race mis
> sing condition: 
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rblack = . if  `race_var' == `race_
> missing_condition' // don't know/refused
.                         }

.                 label var dB_rblack "Non-Hispanic Black/AfAmer race = 1"

.                 label define dB_rblack 0 "0_NotBlack" 1 "1_Black"

.                         label val dB_rblack dB_rblack

.                 notes dB_rblack: Black/AfAmer race created from `race_var' & `
> hisp_var' in `dataset' \ ki`category'`dataset'.do mmk $S_DATE

. 
. // Asian
.         if "`asian_race_value'" != "none" {
.                 gen dB_rasian = 0
.                 // Replace each with . for missing race if there is a race mis
> sing condition: 
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rasian = . if `race_var' == `race_m
> issing_condition' 
.                         }
.                 label var dB_rasian "Non-Hispanic Asian race = 1"
.                 label define dB_rasian 0 "0_NotAsian" 1 "1_Asian"
.                         label val dB_rasian dB_rasian
.                 notes dB_rasian: Asian race created from `race_var' & `hisp_va
> r' in `dataset' \ ki`category'`dataset'.do mmk $S_DATE    
.         }

. 
. // Hispanic
.         if "`hisp_value'" != "none" {
.                 gen dB_rhisp = 0
.                 // Replace each with . for missing race if there is a race mis
> sing condition: 
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rhisp  = . if `race_var' == `race_m
> issing_condition' 
.                         }
.                 label var dB_rhisp  "Hispanic ethnicity = 1"
.                 label define dB_rhisp  0 "0_NotHispanic" 1 "1_Hispanic"
.                         label val dB_rhisp dB_rhisp     
.                 notes dB_rhisp: Hispanic ethnicity only created from `race_var
> ' & `hisp_var' in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
.         }

. 
. // Other
.         if "`mult_race_value'" != "none" |  "`other_race_value'" != "none" |  
> "`amerInd_race_value'" != "none" {
.                 gen dB_rother = 0
.                 // Replace each with . for missing race if there is a race mis
> sing condition: 
.                         if "`race_missing_condition'" != "none" {
.                                 replace dB_rother = . if `race_var' == `race_m
> issing_condition' // don't know/refused
.                         }
.                 label var dB_rother "Non-Hispanic Other, mixed race = 1"
.                 label define dB_rother 0 "0_NotOther" 1 "1_Mixed/OtherRace"
.                         label val dB_rother dB_rother   
.                 notes dB_rother: Other, unknown, or mixed race created from `r
> ace_var' & `hisp_var' in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
.         }

.         
.         
. // All Categories
.         gen dG_race = .
(139,441 missing values generated)

.         label var dG_race "Categorical race variable"

.         label define race_5categ 1 "White" 2 "Black" 3 "Asian" 4 "Hispanic" 5 
> "Other/mixed"

.                 label val dG_race race_5categ

.         notes dG_race: Race/ethnicity categorical variable, created from `race
> _var' & `hisp_var'  variable in `dataset' \ ki`category'`dataset'.do mmk $S_DA
> TE

.         
. 
. ***--------------------------***
. 
. // #2 SEPARATE RACE AND HISPANIC VARIABLES
. 
. if "`hisp_var'" != "none" {
. 
. *White: dB_rwhite
.         if "`white_race_value'" != "none" {
.                 replace dB_rwhite = 1   if `race_var' == `white_race_value' & 
> `hisp_var' != `hisp_value'
(86,629 real changes made)
.                 replace dG_race = 1     if `race_var' == `white_race_value' & 
> `hisp_var' != `hisp_value'
(86,629 real changes made)
.         }
.         
. *Black: dB_rblack
.         if "`black_race_value'" != "none" {
.                 replace dB_rblack = 1   if `race_var' == `black_race_value' & 
> `hisp_var' != `hisp_value'
(18,739 real changes made)
.                 replace dG_race = 2     if `race_var' == `black_race_value' & 
> `hisp_var' != `hisp_value'
(18,739 real changes made)
.         }
.         
. *Asian: dB_rasian
.         if "`asian_race_value'" != "none" {
.                 replace dB_rasian = 1   if `race_var' == `asian_race_value' & 
> `hisp_var' != `hisp_value' 
(7,419 real changes made)
.                 replace dG_race = 3     if `race_var' == `asian_race_value' & 
> `hisp_var' != `hisp_value' 
(7,419 real changes made)
.         }
.                 
. *Other/mixed: dB_rother
.         if "`other_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `other_race_value' & 
> `hisp_var' != `hisp_value' 
(527 real changes made)
.                 replace dG_race = 5     if `race_var' == `other_race_value' & 
> `hisp_var' != `hisp_value' 
(527 real changes made)
.         }
.         if "`mult_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `mult_race_value' & `
> hisp_var' != `hisp_value' 
(2,147 real changes made)
.                 replace dG_race = 5     if `race_var' == `mult_race_value' & `
> hisp_var' != `hisp_value' 
(2,147 real changes made)
.         }
.         if "`amerInd_race_value'" != "none" {
.                  replace dB_rother = 1  if `race_var' == `amerInd_race_value' 
> & `hisp_var' != `hisp_value' 
(1,727 real changes made)
.                  replace dG_race = 5    if `race_var' == `amerInd_race_value' 
> & `hisp_var' != `hisp_value' 
(1,727 real changes made)
.         }
.         
. *Hispanic: dB_rhisp
.                 replace dB_rhisp = 1    if `hisp_var' == `hisp_value'
(22,253 real changes made)
.                 replace dG_race = 4     if `hisp_var' == `hisp_value'
(22,253 real changes made)
. }

. 
. 
. ***--------------------------***
. 
. // #3 with RACE variable only
. 
. if "`hisp_var'" == "none" {
. 
. *White: dB_rwhite
.         if "`white_race_value'" != "none" {
.                 replace dB_rwhite = 1   if `race_var' == `white_race_value'
.                 replace dG_race = 1     if `race_var' == `white_race_value'
.         }
.         
. *Black: dB_rblack
.         if "`black_race_value'" != "none" {
.                 replace dB_rblack = 1   if `race_var' == `black_race_value'
.                 replace dG_race = 2     if `race_var' == `black_race_value'
.         }
.         
. *Asian: dB_rasian
.         if "`asian_race_value'" != "none" {
.                 replace dB_rasian = 1   if `race_var' == `asian_race_value'
.                 replace dG_race = 3     if `race_var' == `asian_race_value'
.         }
.         
. *Other/mixed: dB_rother
.         if "`other_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `other_race_value'
.                 replace dG_race = 5     if `race_var' == `other_race_value'
.         }
.         if "`mult_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `mult_race_value'
.                 replace dG_race = 5     if `race_var' == `mult_race_value'
.         }
.         if "`amerInd_race_value'" != "none" {
.                 replace dB_rother = 1   if `race_var' == `amerInd_race_value'
.                 replace dG_race = 5     if `race_var' == `amerInd_race_value'
.         }
.         
. *Hispanic: dB_rhisp
.         if "`hisp_value'" != "none" {
.                 replace dB_rhisp = 1    if `race_var' == `hisp_value'
.                 replace dG_race = 4     if `race_var' == `hisp_value'
.         }
. }

.         
. ***--------------------------***
. 
. //else {
. //      display as err /*
. //      */ "Need to enter either name of Hispanic variable or none after local
>  hisp_var"
. //      exit 198
. //}
.         
. ***--------------------------***
.         
. // #4 CHECK ALL RESULTING VARIABLES     
. ***check all to ensure correct***
. 
. 
. *Check White
. capture confirm variable dB_rwhite

. if !_rc {
.         tab `race_var' dB_rwhite, m

                      |  Non-Hispanic White
                      |       race = 1
                 Race | 0_NotWhit    1_White |     Total
----------------------+----------------------+----------
                White |    20,528     86,629 |   107,157 
          Black/Negro |    19,392          0 |    19,392 
American Indian/Aleut |     2,163          0 |     2,163 
           Asian only |     7,577          0 |     7,577 
Hawaiian/Pacific Isla |       617          0 |       617 
                  800 |     2,535          0 |     2,535 
----------------------+----------------------+----------
                Total |    52,812     86,629 |   139,441 
. }

. 
. *Check Black
. capture confirm variable dB_rblack

. if !_rc {
.         tab `race_var' dB_rblack, m

                      |     Non-Hispanic
                      | Black/AfAmer race = 1
                 Race | 0_NotBlac    1_Black |     Total
----------------------+----------------------+----------
                White |   107,157          0 |   107,157 
          Black/Negro |       653     18,739 |    19,392 
American Indian/Aleut |     2,163          0 |     2,163 
           Asian only |     7,577          0 |     7,577 
Hawaiian/Pacific Isla |       617          0 |       617 
                  800 |     2,535          0 |     2,535 
----------------------+----------------------+----------
                Total |   120,702     18,739 |   139,441 
. }

. 
. *Check Asian
. capture confirm variable dB_rasian

. if !_rc {
.         tab `race_var' dB_rasian, m

                      |  Non-Hispanic Asian
                      |       race = 1
                 Race | 0_NotAsia    1_Asian |     Total
----------------------+----------------------+----------
                White |   107,157          0 |   107,157 
          Black/Negro |    19,392          0 |    19,392 
American Indian/Aleut |     2,163          0 |     2,163 
           Asian only |       158      7,419 |     7,577 
Hawaiian/Pacific Isla |       617          0 |       617 
                  800 |     2,535          0 |     2,535 
----------------------+----------------------+----------
                Total |   132,022      7,419 |   139,441 
. } 

. 
. *Check Other
. capture confirm variable dB_rother

. if !_rc {
.         tab `race_var' dB_rother, m

                      |  Non-Hispanic Other,
                      |    mixed race = 1
                 Race | 0_NotOthe  1_Mixed/O |     Total
----------------------+----------------------+----------
                White |   107,157          0 |   107,157 
          Black/Negro |    19,392          0 |    19,392 
American Indian/Aleut |       436      1,727 |     2,163 
           Asian only |     7,577          0 |     7,577 
Hawaiian/Pacific Isla |        90        527 |       617 
                  800 |       388      2,147 |     2,535 
----------------------+----------------------+----------
                Total |   135,040      4,401 |   139,441 
. }

. 
. *Check Hispanic
. capture confirm variable dB_rhisp

. if !_rc {
.         tab `race_var' dB_rhisp, m

                      | Hispanic ethnicity =
                      |           1
                 Race | 0_NotHisp  1_Hispani |     Total
----------------------+----------------------+----------
                White |    86,629     20,528 |   107,157 
          Black/Negro |    18,739        653 |    19,392 
American Indian/Aleut |     1,727        436 |     2,163 
           Asian only |     7,419        158 |     7,577 
Hawaiian/Pacific Isla |       527         90 |       617 
                  800 |     2,147        388 |     2,535 
----------------------+----------------------+----------
                Total |   117,188     22,253 |   139,441 
. }

. 
. *Check Categorical Race Variable
. tab `race_var' dG_race, m

                      |          Categorical race variable
                 Race |     White      Black      Asian   Hispanic |     Total
----------------------+--------------------------------------------+----------
                White |    86,629          0          0     20,528 |   107,157 
          Black/Negro |         0     18,739          0        653 |    19,392 
American Indian/Aleut |         0          0          0        436 |     2,163 
           Asian only |         0          0      7,419        158 |     7,577 
Hawaiian/Pacific Isla |         0          0          0         90 |       617 
                  800 |         0          0          0        388 |     2,535 
----------------------+--------------------------------------------+----------
                Total |    86,629     18,739      7,419     22,253 |   139,441 


                      | Categorica
                      |   l race
                      |  variable
                 Race | Other/mix |     Total
----------------------+-----------+----------
                White |         0 |   107,157 
          Black/Negro |         0 |    19,392 
American Indian/Aleut |     1,727 |     2,163 
           Asian only |         0 |     7,577 
Hawaiian/Pacific Isla |       527 |       617 
                  800 |     2,147 |     2,535 
----------------------+-----------+----------
                Total |     4,401 |   139,441 

. tab dG_race `race_var', m

Categorical |
       race |                          Race
   variable |     White  Black/Neg  American   Asian onl  Hawaiian/ |     Total
------------+-------------------------------------------------------+----------
      White |    86,629          0          0          0          0 |    86,629 
      Black |         0     18,739          0          0          0 |    18,739 
      Asian |         0          0          0      7,419          0 |     7,419 
   Hispanic |    20,528        653        436        158         90 |    22,253 
Other/mixed |         0          0      1,727          0        527 |     4,401 
------------+-------------------------------------------------------+----------
      Total |   107,157     19,392      2,163      7,577        617 |   139,441 


Categorical |
       race |    Race
   variable |       800 |     Total
------------+-----------+----------
      White |         0 |    86,629 
      Black |         0 |    18,739 
      Asian |         0 |     7,419 
   Hispanic |       388 |    22,253 
Other/mixed |     2,147 |     4,401 
------------+-----------+----------
      Total |     2,535 |   139,441 

. if "`hisp_var'" != "none" {
.         tab dG_race `hisp_var', m

Categorical |
       race |         hisp
   variable |         0          1 |     Total
------------+----------------------+----------
      White |    86,629          0 |    86,629 
      Black |    18,739          0 |    18,739 
      Asian |     7,419          0 |     7,419 
   Hispanic |         0     22,253 |    22,253 
Other/mixed |     4,401          0 |     4,401 
------------+----------------------+----------
      Total |   117,188     22,253 |   139,441 
. }

. 
. 
. fvset base 1 dG_race            // ref: white

. 
. ***--------------------------***
. 
. // #3 EDUCATION
. 
. local edu_var educ

. tab `edu_var'

          Educational attainment recode |      Freq.     Percent        Cum.
----------------------------------------+-----------------------------------
                      None or preschool |        354        0.25        0.25
                   Grades 1, 2, 3, or 4 |        916        0.66        0.91
                          Grades 5 or 6 |      1,933        1.39        2.30
                          Grades 7 or 8 |      2,394        1.72        4.01
                                Grade 9 |      2,245        1.61        5.62
                               Grade 10 |      2,539        1.82        7.44
                               Grade 11 |      3,038        2.18        9.62
                 12th grade, no diploma |      1,811        1.30       10.92
      High school diploma or equivalent |     38,254       27.43       38.36
             Some college but no degree |     25,817       18.51       56.87
Associate's degree, occupational/vocati |      6,154        4.41       61.28
   Associate's degree, academic program |      8,226        5.90       67.18
                      Bachelor's degree |     28,228       20.24       87.43
                        Master's degree |     12,838        9.21       96.63
             Professional school degree |      2,027        1.45       98.09
                       Doctorate degree |      2,667        1.91      100.00
----------------------------------------+-----------------------------------
                                  Total |    139,441      100.00

. tab `edu_var', nolab m

Educational |
 attainment |
     recode |      Freq.     Percent        Cum.
------------+-----------------------------------
          2 |        354        0.25        0.25
         10 |        916        0.66        0.91
         20 |      1,933        1.39        2.30
         30 |      2,394        1.72        4.01
         40 |      2,245        1.61        5.62
         50 |      2,539        1.82        7.44
         60 |      3,038        2.18        9.62
         71 |      1,811        1.30       10.92
         73 |     38,254       27.43       38.36
         81 |     25,817       18.51       56.87
         91 |      6,154        4.41       61.28
         92 |      8,226        5.90       67.18
        111 |     28,228       20.24       87.43
        123 |     12,838        9.21       96.63
        124 |      2,027        1.45       98.09
        125 |      2,667        1.91      100.00
------------+-----------------------------------
      Total |    139,441      100.00

. 
. *don't know/refused code(s) for `edu_var'
. local edu_missing_condition `"`edu_var' == 8 | `edu_var' == 9"'

. 
. * Conditions for each category
. local lHS_condition     `"`edu_var' <= 71"'

. local HS_condition              `"`edu_var' == 73"'

. local sCol_condition    `"`edu_var' == 81 | `edu_var' == 91 | `edu_var' == 92"
> '

. local col_condition             `"`edu_var' == 111"'

. local grad_condition    `"`edu_var' >= 123"'

. 
. include $redi/redi11c_education.doi

. *! include file to label education variables
. *! version 1.0 \ molly king 2017-01-24
. 
.   *compilation of originally individual include files that programmed each edu
> cation variable separate
. ***--------------------------***
. 
. // #1 GENERATE ALL VARIABLES, AND LABEL, ADD NOTES
. 
. 
. // Categorical Education Variable
.         gen dG_edu = .
(139,441 missing values generated)

.         label var dG_edu "Categorical education variable"

.         label define edu_5categ 1 "< HS" 2 "HS" 3 "some college" 4 "college" 5
>  "grad school"

.                 label val dG_edu edu_5categ

.         notes dG_edu: Education categorical variable, created from `edu_var' v
> ariable in `dataset' \ ki`category'`dataset'.do mmk $S_DATE

. 
.         
. // Less than HS
.         if "`lHS_condition'" != "none" {
.                 gen dB_edu_lHS = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_lHS = . if `edu_missing_conditi
> on'
(0 real changes made)
.                         }
.                 label var dB_edu_lHS "<HS"
.                 label define dB_edu_lHS 0 "0_>HS" 1 "1_<HS"
.                         label val dB_edu_lHS dB_edu_lHS
.                 notes dB_edu_lHS: Less than HS edu. created from `edu_var' var
> iable in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
.                 
.                 replace dB_edu_lHS = 1 if `lHS_condition'
(15,230 real changes made)
.                 replace dG_edu     = 1 if `lHS_condition'
(15,230 real changes made)
.         }

.         
. 
. // High School
.         if "`HS_condition'" != "none" {
.                 gen dB_edu_HS = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_HS = . if `edu_missing_conditio
> n'
(0 real changes made)
.                         }
.                 label var dB_edu_HS "HS"
.                 label define dB_edu_HS 0 "0_notHS" 1 "1_HS"
.                         label val dB_edu_HS dB_edu_HS
.                 notes dB_edu_HS: HS edu. created from `edu_var' variable in `d
> ataset' \ ki`category'`dataset'.do mmk $S_DATE
.                 
.                 replace dB_edu_HS = 1 if `HS_condition'
(38,254 real changes made)
.                 replace dG_edu    = 2 if `HS_condition'
(38,254 real changes made)
.         }

.         
.         
. // Some college
.         if "`sCol_condition'" != "none" {
.                 gen dB_edu_sCol = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_sCol = . if `edu_missing_condit
> ion'
(0 real changes made)
.                         }
.                 label var dB_edu_sCol "Some College / Voc. Training"
.                 label define dB_edu_sCol 0 "0_notSomeCol" 1 "1_SomeCol"
.                         label val dB_edu_sCol dB_edu_sCol
.                 notes dB_edu_sCol: Some College edu. created from `edu_var' va
> riable in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
. 
.                 replace dB_edu_sCol = 1 if `sCol_condition'
(40,197 real changes made)
.                 replace dG_edu      = 3 if `sCol_condition'
(40,197 real changes made)
.         }

. 
.         
. // College Degree
.         if "`col_condition'" != "none" {
.                 gen dB_edu_col = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_col = . if `edu_missing_conditi
> on'
(0 real changes made)
.                         }
.                 label var dB_edu_col "College degree"
.                 label define dB_edu_col 0 "0_notCol" 1 "1_College"
.                         label val dB_edu_col dB_edu_col
.                 notes dB_edu_col: College degree, created from `edu_var' varia
> ble in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
.         
.                 replace dB_edu_col = 1 if `col_condition'
(28,228 real changes made)
.                 replace dG_edu     = 4 if `col_condition'
(28,228 real changes made)
.         }

.         
.         
. // Post-graduate degree
.         if "`grad_condition'" != "none" {
.                 gen dB_edu_grad = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_grad = . if `edu_missing_condit
> ion'
(0 real changes made)
.                         }
.                 label var dB_edu_grad "Graduate degree"
.                 label define dB_edu_grad 0 "0_<GradDeg" 1 "1_GradDegree"
.                         label val dB_edu_grad dB_edu_grad
.                 notes dB_edu_grad: Graduate degree, created from `edu_var' var
> iable in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
.                 
.                 replace dB_edu_grad = 1 if `grad_condition'
(17,532 real changes made)
.                 replace dG_edu      = 5 if `grad_condition'
(17,532 real changes made)
.         }

.         
. 
. // College + post-graduate
.         if "`grad_condition'" != "none" & "`col_condition'" != "none" {
.                 gen dB_edu_colp = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_colp = . if `edu_missing_condit
> ion'
(0 real changes made)
.                         }
.                 label var dB_edu_colp "College or Graduate Degree"
.                 label define dB_edu_colp 0 "0_NoBA" 1 "1_BA+"
.                         label val dB_edu_colp dB_edu_colp       
.                 notes dB_edu_colp: College plus grad, created from `edu_var' v
> ariable in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
. 
.                 replace dB_edu_colp = 1  if `col_condition' | `grad_condition'
(45,760 real changes made)
.         }

. 
. // College + post-graduate, where can't disentangle the two
.         if "`grad_condition'" == "none" & "`col_condition'" != "none" {
.                 gen dB_edu_colp = 0
.                 // Replace each with . for missing edu. if there is a edu. mis
> sing condition: 
.                         if "`edu_missing_condition'" != "none" {
.                                 replace dB_edu_colp = . if `edu_missing_condit
> ion'
.                         }
.                 label var dB_edu_colp "College or Graduate Degree"
.                 label define dB_edu_colp 0 "0_NoBA" 1 "1_BA+"
.                         label val dB_edu_colp dB_edu_colp       
.                 notes dB_edu_colp: College plus grad, created from `edu_var' v
> ariable in `dataset' \ ki`category'`dataset'.do mmk $S_DATE
. 
.                 replace dB_edu_colp = 1  if `col_condition' 
.                 // here, the college condition covers both those who have a ba
> chelors and more
.                 drop dB_edu_col
.         }

.         
. 
. 
. // # CHECK TO ENSURE CORRECT
. if "`lHS_condition'" != "none" {
.         tab `edu_var' dB_edu_lHS, m

          Educational |          <HS
    attainment recode |     0_>HS      1_<HS |     Total
----------------------+----------------------+----------
    None or preschool |         0        354 |       354 
 Grades 1, 2, 3, or 4 |         0        916 |       916 
        Grades 5 or 6 |         0      1,933 |     1,933 
        Grades 7 or 8 |         0      2,394 |     2,394 
              Grade 9 |         0      2,245 |     2,245 
             Grade 10 |         0      2,539 |     2,539 
             Grade 11 |         0      3,038 |     3,038 
12th grade, no diplom |         0      1,811 |     1,811 
High school diploma o |    38,254          0 |    38,254 
Some college but no d |    25,817          0 |    25,817 
Associate's degree, o |     6,154          0 |     6,154 
Associate's degree, a |     8,226          0 |     8,226 
    Bachelor's degree |    28,228          0 |    28,228 
      Master's degree |    12,838          0 |    12,838 
Professional school d |     2,027          0 |     2,027 
     Doctorate degree |     2,667          0 |     2,667 
----------------------+----------------------+----------
                Total |   124,211     15,230 |   139,441 
. }

. if "`HS_condition'" != "none" {
.         tab `edu_var' dB_edu_HS, m

          Educational |          HS
    attainment recode |   0_notHS       1_HS |     Total
----------------------+----------------------+----------
    None or preschool |       354          0 |       354 
 Grades 1, 2, 3, or 4 |       916          0 |       916 
        Grades 5 or 6 |     1,933          0 |     1,933 
        Grades 7 or 8 |     2,394          0 |     2,394 
              Grade 9 |     2,245          0 |     2,245 
             Grade 10 |     2,539          0 |     2,539 
             Grade 11 |     3,038          0 |     3,038 
12th grade, no diplom |     1,811          0 |     1,811 
High school diploma o |         0     38,254 |    38,254 
Some college but no d |    25,817          0 |    25,817 
Associate's degree, o |     6,154          0 |     6,154 
Associate's degree, a |     8,226          0 |     8,226 
    Bachelor's degree |    28,228          0 |    28,228 
      Master's degree |    12,838          0 |    12,838 
Professional school d |     2,027          0 |     2,027 
     Doctorate degree |     2,667          0 |     2,667 
----------------------+----------------------+----------
                Total |   101,187     38,254 |   139,441 
. }

. if "`sCol_condition'" != "none" {
.         tab `edu_var' dB_edu_sCol, m

                      |  Some College / Voc.
          Educational |       Training
    attainment recode | 0_notSome  1_SomeCol |     Total
----------------------+----------------------+----------
    None or preschool |       354          0 |       354 
 Grades 1, 2, 3, or 4 |       916          0 |       916 
        Grades 5 or 6 |     1,933          0 |     1,933 
        Grades 7 or 8 |     2,394          0 |     2,394 
              Grade 9 |     2,245          0 |     2,245 
             Grade 10 |     2,539          0 |     2,539 
             Grade 11 |     3,038          0 |     3,038 
12th grade, no diplom |     1,811          0 |     1,811 
High school diploma o |    38,254          0 |    38,254 
Some college but no d |         0     25,817 |    25,817 
Associate's degree, o |         0      6,154 |     6,154 
Associate's degree, a |         0      8,226 |     8,226 
    Bachelor's degree |    28,228          0 |    28,228 
      Master's degree |    12,838          0 |    12,838 
Professional school d |     2,027          0 |     2,027 
     Doctorate degree |     2,667          0 |     2,667 
----------------------+----------------------+----------
                Total |    99,244     40,197 |   139,441 
. }

. if "`col_condition'" != "none" & "`grad_condition'" != "none" {
.         tab `edu_var' dB_edu_col, m

          Educational |    College degree
    attainment recode |  0_notCol  1_College |     Total
----------------------+----------------------+----------
    None or preschool |       354          0 |       354 
 Grades 1, 2, 3, or 4 |       916          0 |       916 
        Grades 5 or 6 |     1,933          0 |     1,933 
        Grades 7 or 8 |     2,394          0 |     2,394 
              Grade 9 |     2,245          0 |     2,245 
             Grade 10 |     2,539          0 |     2,539 
             Grade 11 |     3,038          0 |     3,038 
12th grade, no diplom |     1,811          0 |     1,811 
High school diploma o |    38,254          0 |    38,254 
Some college but no d |    25,817          0 |    25,817 
Associate's degree, o |     6,154          0 |     6,154 
Associate's degree, a |     8,226          0 |     8,226 
    Bachelor's degree |         0     28,228 |    28,228 
      Master's degree |    12,838          0 |    12,838 
Professional school d |     2,027          0 |     2,027 
     Doctorate degree |     2,667          0 |     2,667 
----------------------+----------------------+----------
                Total |   111,213     28,228 |   139,441 
. }

. if "`col_condition'" != "none" {
.         tab `edu_var' dB_edu_colp, m

                      |  College or Graduate
          Educational |        Degree
    attainment recode |    0_NoBA      1_BA+ |     Total
----------------------+----------------------+----------
    None or preschool |       354          0 |       354 
 Grades 1, 2, 3, or 4 |       916          0 |       916 
        Grades 5 or 6 |     1,933          0 |     1,933 
        Grades 7 or 8 |     2,394          0 |     2,394 
              Grade 9 |     2,245          0 |     2,245 
             Grade 10 |     2,539          0 |     2,539 
             Grade 11 |     3,038          0 |     3,038 
12th grade, no diplom |     1,811          0 |     1,811 
High school diploma o |    38,254          0 |    38,254 
Some college but no d |    25,817          0 |    25,817 
Associate's degree, o |     6,154          0 |     6,154 
Associate's degree, a |     8,226          0 |     8,226 
    Bachelor's degree |         0     28,228 |    28,228 
      Master's degree |         0     12,838 |    12,838 
Professional school d |         0      2,027 |     2,027 
     Doctorate degree |         0      2,667 |     2,667 
----------------------+----------------------+----------
                Total |    93,681     45,760 |   139,441 
. }

. if "`grad_condition'" != "none" {
.         tab `edu_var' dB_edu_grad, m

          Educational |    Graduate degree
    attainment recode | 0_<GradDe  1_GradDeg |     Total
----------------------+----------------------+----------
    None or preschool |       354          0 |       354 
 Grades 1, 2, 3, or 4 |       916          0 |       916 
        Grades 5 or 6 |     1,933          0 |     1,933 
        Grades 7 or 8 |     2,394          0 |     2,394 
              Grade 9 |     2,245          0 |     2,245 
             Grade 10 |     2,539          0 |     2,539 
             Grade 11 |     3,038          0 |     3,038 
12th grade, no diplom |     1,811          0 |     1,811 
High school diploma o |    38,254          0 |    38,254 
Some college but no d |    25,817          0 |    25,817 
Associate's degree, o |     6,154          0 |     6,154 
Associate's degree, a |     8,226          0 |     8,226 
    Bachelor's degree |    28,228          0 |    28,228 
      Master's degree |         0     12,838 |    12,838 
Professional school d |         0      2,027 |     2,027 
     Doctorate degree |         0      2,667 |     2,667 
----------------------+----------------------+----------
                Total |   121,909     17,532 |   139,441 
.         tab `edu_var' dB_edu_grad, m nolabel

Educationa |
         l |
attainment |    Graduate degree
    recode |         0          1 |     Total
-----------+----------------------+----------
         2 |       354          0 |       354 
        10 |       916          0 |       916 
        20 |     1,933          0 |     1,933 
        30 |     2,394          0 |     2,394 
        40 |     2,245          0 |     2,245 
        50 |     2,539          0 |     2,539 
        60 |     3,038          0 |     3,038 
        71 |     1,811          0 |     1,811 
        73 |    38,254          0 |    38,254 
        81 |    25,817          0 |    25,817 
        91 |     6,154          0 |     6,154 
        92 |     8,226          0 |     8,226 
       111 |    28,228          0 |    28,228 
       123 |         0     12,838 |    12,838 
       124 |         0      2,027 |     2,027 
       125 |         0      2,667 |     2,667 
-----------+----------------------+----------
     Total |   121,909     17,532 |   139,441 
. }

. tab `edu_var' dG_edu, m

          Educational |       Categorical education variable
    attainment recode |      < HS         HS  some coll    college |     Total
----------------------+--------------------------------------------+----------
    None or preschool |       354          0          0          0 |       354 
 Grades 1, 2, 3, or 4 |       916          0          0          0 |       916 
        Grades 5 or 6 |     1,933          0          0          0 |     1,933 
        Grades 7 or 8 |     2,394          0          0          0 |     2,394 
              Grade 9 |     2,245          0          0          0 |     2,245 
             Grade 10 |     2,539          0          0          0 |     2,539 
             Grade 11 |     3,038          0          0          0 |     3,038 
12th grade, no diplom |     1,811          0          0          0 |     1,811 
High school diploma o |         0     38,254          0          0 |    38,254 
Some college but no d |         0          0     25,817          0 |    25,817 
Associate's degree, o |         0          0      6,154          0 |     6,154 
Associate's degree, a |         0          0      8,226          0 |     8,226 
    Bachelor's degree |         0          0          0     28,228 |    28,228 
      Master's degree |         0          0          0          0 |    12,838 
Professional school d |         0          0          0          0 |     2,027 
     Doctorate degree |         0          0          0          0 |     2,667 
----------------------+--------------------------------------------+----------
                Total |    15,230     38,254     40,197     28,228 |   139,441 


                      | Categorica
                      |     l
                      | education
          Educational |  variable
    attainment recode | grad scho |     Total
----------------------+-----------+----------
    None or preschool |         0 |       354 
 Grades 1, 2, 3, or 4 |         0 |       916 
        Grades 5 or 6 |         0 |     1,933 
        Grades 7 or 8 |         0 |     2,394 
              Grade 9 |         0 |     2,245 
             Grade 10 |         0 |     2,539 
             Grade 11 |         0 |     3,038 
12th grade, no diplom |         0 |     1,811 
High school diploma o |         0 |    38,254 
Some college but no d |         0 |    25,817 
Associate's degree, o |         0 |     6,154 
Associate's degree, a |         0 |     8,226 
    Bachelor's degree |         0 |    28,228 
      Master's degree |    12,838 |    12,838 
Professional school d |     2,027 |     2,027 
     Doctorate degree |     2,667 |     2,667 
----------------------+-----------+----------
                Total |    17,532 |   139,441 

.         
. 
. 
. fvset base 1 dG_edu             // ref: less than HS

. 
. ***--------------------------***
. 
. // # LABOR FORCE
. 
. /*LABFORCE is a dichotomous variable indicating whether a person participated 
> in the labor force. See EMPSTAT for a non-dichotomous variable that indicates 
> whether the respondent was part of the labor force -- working or seeking work 
> -- and, if so, whether the person was currently unemployed.*/
. 
. tab labforce

        Labor force status |      Freq.     Percent        Cum.
---------------------------+-----------------------------------
                       NIU |        684        0.49        0.49
No, not in the labor force |     47,911       34.36       34.85
   Yes, in the labor force |     90,846       65.15      100.00
---------------------------+-----------------------------------
                     Total |    139,441      100.00

. tab labforce, nolab m

Labor force |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        684        0.49        0.49
          1 |     47,911       34.36       34.85
          2 |     90,846       65.15      100.00
------------+-----------------------------------
      Total |    139,441      100.00

. 
. generate labor = .
(139,441 missing values generated)

. replace labor = 1 if labforce == 2
(90,846 real changes made)

. replace labor = 0 if labforce == 1
(47,911 real changes made)

. 
. tab labforce labor, m

                      |              labor
   Labor force status |         0          1          . |     Total
----------------------+---------------------------------+----------
                  NIU |         0          0        684 |       684 
No, not in the labor  |    47,911          0          0 |    47,911 
Yes, in the labor for |         0     90,846          0 |    90,846 
----------------------+---------------------------------+----------
                Total |    47,911     90,846        684 |   139,441 

. 
. 
. ***--------------------------***
. 
. // # INDEPENDENT LIVING DIFFICULTY
. 
. /*DIFFMOB indicates whether the respondent has any physical, mental, or 
> emotional condition lasting six months or more that makes it difficult or 
> impossible to perform basic activities outside the home alone. 
> This does not include temporary health problems, such as broken bones.*/
. 
. tab diffmob 

    Disability limiting |
               mobility |      Freq.     Percent        Cum.
------------------------+-----------------------------------
                    NIU |        684        0.49        0.49
 No mobility limitation |    132,292       94.87       95.36
Has mobility limitation |      6,465        4.64      100.00
------------------------+-----------------------------------
                  Total |    139,441      100.00

. tab diffmob, nolab

 Disability |
   limiting |
   mobility |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        684        0.49        0.49
          1 |    132,292       94.87       95.36
          2 |      6,465        4.64      100.00
------------+-----------------------------------
      Total |    139,441      100.00

. 
. generate disability = .
(139,441 missing values generated)

. replace disability = 1 if diffmob == 2
(6,465 real changes made)

. replace disability = 0 if diffmob == 1
(132,292 real changes made)

. 
. tab diffmob disability, m

  Disability limiting |            disability
             mobility |         0          1          . |     Total
----------------------+---------------------------------+----------
                  NIU |         0          0        684 |       684 
No mobility limitatio |   132,292          0          0 |   132,292 
Has mobility limitati |         0      6,465          0 |     6,465 
----------------------+---------------------------------+----------
                Total |   132,292      6,465        684 |   139,441 

. 
. 
. ***--------------------------***
. 
. // # MARITAL STATUS
. 
. tab marst

         Marital status |      Freq.     Percent        Cum.
------------------------+-----------------------------------
Married, spouse present |     70,203       50.35       50.35
 Married, spouse absent |      2,457        1.76       52.11
              Separated |      3,993        2.86       54.97
               Divorced |     20,847       14.95       69.92
                Widowed |     12,237        8.78       78.70
   Never married/single |     29,704       21.30      100.00
------------------------+-----------------------------------
                  Total |    139,441      100.00

. tab marst, nolab

    Marital |
     status |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     70,203       50.35       50.35
          2 |      2,457        1.76       52.11
          3 |      3,993        2.86       54.97
          4 |     20,847       14.95       69.92
          5 |     12,237        8.78       78.70
          6 |     29,704       21.30      100.00
------------+-----------------------------------
      Total |    139,441      100.00

. 
. generate married = .
(139,441 missing values generated)

. replace married = 1 if marst == 1 | marst == 2
(72,660 real changes made)

. replace married = 0 if marst == 3 | marst == 4 |  marst == 5 | marst == 6
(66,781 real changes made)

. 
. tab marst married, m

                      |        married
       Marital status |         0          1 |     Total
----------------------+----------------------+----------
Married, spouse prese |         0     70,203 |    70,203 
Married, spouse absen |         0      2,457 |     2,457 
            Separated |     3,993          0 |     3,993 
             Divorced |    20,847          0 |    20,847 
              Widowed |    12,237          0 |    12,237 
 Never married/single |    29,704          0 |    29,704 
----------------------+----------------------+----------
                Total |    66,781     72,660 |   139,441 

. 
. ***--------------------------***
. 
. // # OWNERSHIP OF HOUSING
. 
. /*OWNERSHP indicates whether the housing unit was rented or owned by its inhab
> itants. 
> Housing units acquired with a mortgage or other lending arrangement(s) are 
> classified as "owned," even if repayment was not yet completed.*/
. 
. tab ownershp

Ownership of dwelling |      Freq.     Percent        Cum.
----------------------+-----------------------------------
Owned or being bought |     89,370       64.09       64.09
         No cash rent |      1,999        1.43       65.53
       With cash rent |     48,072       34.47      100.00
----------------------+-----------------------------------
                Total |    139,441      100.00

. tab ownershp, nolab

  Ownership |
of dwelling |      Freq.     Percent        Cum.
------------+-----------------------------------
         10 |     89,370       64.09       64.09
         21 |      1,999        1.43       65.53
         22 |     48,072       34.47      100.00
------------+-----------------------------------
      Total |    139,441      100.00

. 
. generate ownhouse = .
(139,441 missing values generated)

. replace ownhouse = 1 if ownershp == 10
(89,370 real changes made)

. replace ownhouse = 0 if ownershp == 21 | ownershp == 22
(50,071 real changes made)

. 
. tab ownershp ownhouse, m

                      |       ownhouse
Ownership of dwelling |         0          1 |     Total
----------------------+----------------------+----------
Owned or being bought |         0     89,370 |    89,370 
         No cash rent |     1,999          0 |     1,999 
       With cash rent |    48,072          0 |    48,072 
----------------------+----------------------+----------
                Total |    50,071     89,370 |   139,441 

. 
. ***--------------------------***
. 
. // # MIGRATION STATUS
. 
. /*MIGRATE1 indicates whether the respondent had changed residence in the past 
> year. Those who were living in the same house as one year ago were considered 
> non-movers and were asked no further questions about migration over the past y
> ear. Movers were asked about the city, county and state and/or the U.S. territ
> ory or foreign country where they resided one year ago.*/
. 
. tab migrate1

            Migration status, 1 year |      Freq.     Percent        Cum.
-------------------------------------+-----------------------------------
                          Same house |    125,953       90.33       90.33
                 Moved within county |      8,312        5.96       96.29
Moved within state, different county |      2,573        1.85       98.13
                Moved between states |      2,187        1.57       99.70
                              Abroad |        416        0.30      100.00
-------------------------------------+-----------------------------------
                               Total |    139,441      100.00

. tab migrate1, nolab

  Migration |
  status, 1 |
       year |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |    125,953       90.33       90.33
          3 |      8,312        5.96       96.29
          4 |      2,573        1.85       98.13
          5 |      2,187        1.57       99.70
          6 |        416        0.30      100.00
------------+-----------------------------------
      Total |    139,441      100.00

. 
. generate migrate = .
(139,441 missing values generated)

. replace migrate = 1 if migrate1 == 2 | migrate1 == 3 | migrate1 == 4 | migrate
> 1 == 5 | migrate1 == 6
(13,488 real changes made)

. replace migrate = 0 if migrate1 == 1
(125,953 real changes made)

. 
. 
. ***--------------------------***
. 
. save $deriv/redi11_ASEC_regressions-hinc_shp.dta, replace
file ~/Documents/SocResearch/Dissertation/data/data_derv/redi11_ASEC_regressions
> -hinc_shp.dta saved

. use $deriv/redi11_ASEC_regressions-hinc_shp.dta, clear
(CPS ASEC data - Household Income - 2016-2017)

. 
. ***--------------------------***
. // REGRESSION: CPS ASEC Income as DV
. ***--------------------------***        
. 
. di in red "Predict ASEC income as a function of gender of householder, " ///
>                   "race/ethnicity, education, married, disability"      
Predict ASEC income as a function of gender of householder, race/ethnicity, educ
> ation, married, disability

. 
. svy: reg asec_hinc_shp_`conv_year' /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison cat
> egory
>         married disability
(running regress on estimation sample)

Survey: Linear regression

Number of strata   =         1                Number of obs     =      138,757
Number of PSUs     =   138,757                Population size   =  251,607,554
                                              Design df         =      138,756
                                              F(  11, 138746)   =      1872.60
                                              Prob > F          =       0.0000
                                              R-squared         =       0.1773

------------------------------------------------------------------------------
             |             Linearized
asec_hi~2017 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      dB_fem |  -7950.761   557.2913   -14.27   0.000    -9043.041    -6858.48
   dB_rblack |  -12902.57   645.5849   -19.99   0.000     -14167.9   -11637.23
   dB_rasian |   1994.287   1454.166     1.37   0.170    -855.8505    4844.425
    dB_rhisp |  -6655.502    714.406    -9.32   0.000    -8055.724   -5255.279
   dB_rother |  -6547.779   1529.823    -4.28   0.000    -9546.203   -3549.355
   dB_edu_HS |   12788.09   668.2333    19.14   0.000     11478.37    14097.82
 dB_edu_sCol |   26424.27   689.9065    38.30   0.000     25072.07    27776.48
  dB_edu_col |   58257.43    883.666    65.93   0.000     56525.47     59989.4
 dB_edu_grad |   86862.51   1271.471    68.32   0.000     84370.45    89354.57
     married |   43890.41   553.8387    79.25   0.000     42804.89    44975.92
  disability |  -23014.23    627.728   -36.66   0.000    -24244.56   -21783.89
       _cons |   33243.48   745.0325    44.62   0.000     31783.23    34703.73
------------------------------------------------------------------------------

. 
.         
. 
. ***--------------------------***
. // REGRESSION: REDI Income as IV: Predict Migration
. ***--------------------------***        
. 
. di in red "Predict migration as function of ASEC ln(income), " ///
>                   "gender, race/ethnicity, education, married, disability"
Predict migration as function of ASEC ln(income), gender, race/ethnicity, educat
> ion, married, disability

. svy: logistic migrate ///
>         asec_lnhinc_shp_`conv_year' /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison cat
> egory
>         married disability  //
(running logistic on estimation sample)

Survey: Logistic regression

Number of strata   =         1                Number of obs     =      136,715
Number of PSUs     =   136,715                Population size   =  247,937,719
                                              Design df         =      136,714
                                              F(  12, 136703)   =       129.70
                                              Prob > F          =       0.0000

-------------------------------------------------------------------------------
              |             Linearized
      migrate | Odds Ratio   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
asec_lnh~2017 |   .9006567    .008508   -11.08   0.000     .8841347    .9174875
       dB_fem |    .927798   .0209531    -3.32   0.001     .8876259    .9697882
    dB_rblack |   1.276707   .0417977     7.46   0.000     1.197357    1.361315
    dB_rasian |   1.615808   .0723745    10.71   0.000     1.480004    1.764074
     dB_rhisp |   1.375262   .0437047    10.03   0.000     1.292215    1.463646
    dB_rother |   1.623903   .1022853     7.70   0.000     1.435306     1.83728
    dB_edu_HS |    1.10237   .0464852     2.31   0.021     1.014924    1.197351
  dB_edu_sCol |   1.370141   .0569714     7.57   0.000     1.262907     1.48648
   dB_edu_col |   1.429937   .0637061     8.03   0.000     1.310371    1.560414
  dB_edu_grad |   1.332273   .0664151     5.75   0.000     1.208258    1.469017
      married |   .5101633   .0125984   -27.25   0.000     .4860587    .5354634
   disability |   .5949029   .0343012    -9.01   0.000     .5313329    .6660786
        _cons |   .3725067   .0384161    -9.58   0.000     .3043337     .455951
-------------------------------------------------------------------------------
Note: _cons estimates baseline odds.

. 
. di in red "Predict migration as function of ASEC ln(income), add home ownershi
> p"
Predict migration as function of ASEC ln(income), add home ownership

. svy: logistic migrate ///
>         asec_lnhinc_shp_`conv_year' /// 
>         dB_fem /// men comparison
>         dB_rblack dB_rasian dB_rhisp dB_rother /// white comparison category
>         dB_edu_HS dB_edu_sCol dB_edu_col dB_edu_grad /// lessHS comparison cat
> egory
>         married disability ownhouse //
(running logistic on estimation sample)

Survey: Logistic regression

Number of strata   =         1                Number of obs     =      136,715
Number of PSUs     =   136,715                Population size   =  247,937,719
                                              Design df         =      136,714
                                              F(  13, 136702)   =       469.19
                                              Prob > F          =       0.0000

-------------------------------------------------------------------------------
              |             Linearized
      migrate | Odds Ratio   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
asec_lnh~2017 |   .9847682   .0110329    -1.37   0.171     .9633796    1.006632
       dB_fem |   .9473839   .0218744    -2.34   0.019     .9054661    .9912422
    dB_rblack |   .9000123   .0304473    -3.11   0.002     .8422715    .9617113
    dB_rasian |   1.147902   .0542864     2.92   0.004     1.046284    1.259389
     dB_rhisp |   .9149694   .0305668    -2.66   0.008     .8569783    .9768847
    dB_rother |   1.214148   .0789962     2.98   0.003     1.068783    1.379285
    dB_edu_HS |   1.206189   .0514328     4.40   0.000     1.109479    1.311328
  dB_edu_sCol |   1.478121   .0624725     9.25   0.000      1.36061     1.60578
   dB_edu_col |   1.559543   .0711787     9.74   0.000     1.426092    1.705482
  dB_edu_grad |   1.542811   .0793818     8.43   0.000     1.394812    1.706514
      married |   .8078052   .0209599    -8.23   0.000     .7677512    .8499488
   disability |   .5478396   .0320592   -10.28   0.000     .4884738    .6144203
     ownhouse |   .1641215   .0043373   -68.38   0.000     .1558369    .1728464
        _cons |    .284376   .0341215   -10.48   0.000     .2247805     .359772
-------------------------------------------------------------------------------
Note: _cons estimates baseline odds.

.         
. 
. ***--------------------------***
. 
. 
. capture log close redi11_ASEC_regressions
